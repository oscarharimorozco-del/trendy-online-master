function cv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function dv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bh={exports:{}},Ss={},Mh={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=Symbol.for("react.element"),fv=Symbol.for("react.portal"),hv=Symbol.for("react.fragment"),pv=Symbol.for("react.strict_mode"),mv=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),vv=Symbol.for("react.context"),yv=Symbol.for("react.forward_ref"),_v=Symbol.for("react.suspense"),wv=Symbol.for("react.memo"),Sv=Symbol.for("react.lazy"),dc=Symbol.iterator;function Ev(t){return t===null||typeof t!="object"?null:(t=dc&&t[dc]||t["@@iterator"],typeof t=="function"?t:null)}var Lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dh=Object.assign,Uh={};function Dr(t,e,n){this.props=t,this.context=e,this.refs=Uh,this.updater=n||Lh}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Oh(){}Oh.prototype=Dr.prototype;function eu(t,e,n){this.props=t,this.context=e,this.refs=Uh,this.updater=n||Lh}var tu=eu.prototype=new Oh;tu.constructor=eu;Dh(tu,Dr.prototype);tu.isPureReactComponent=!0;var fc=Array.isArray,Fh=Object.prototype.hasOwnProperty,nu={current:null},$h={key:!0,ref:!0,__self:!0,__source:!0};function Vh(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Fh.call(e,r)&&!$h.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:qi,type:t,key:o,ref:s,props:i,_owner:nu.current}}function Tv(t,e){return{$$typeof:qi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ru(t){return typeof t=="object"&&t!==null&&t.$$typeof===qi}function Cv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hc=/\/+/g;function js(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cv(""+t.key):e.toString(36)}function ko(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case qi:case fv:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+js(s,0):r,fc(i)?(n="",t!=null&&(n=t.replace(hc,"$&/")+"/"),ko(i,e,n,"",function(c){return c})):i!=null&&(ru(i)&&(i=Tv(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(hc,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",fc(t))for(var a=0;a<t.length;a++){o=t[a];var u=r+js(o,a);s+=ko(o,e,n,u,i)}else if(u=Ev(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=r+js(o,a++),s+=ko(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Xi(t,e,n){if(t==null)return t;var r=[],i=0;return ko(t,r,"","",function(o){return e.call(n,o,i++)}),r}function xv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Le={current:null},Ro={transition:null},Iv={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:Ro,ReactCurrentOwner:nu};function Gh(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Xi,forEach:function(t,e,n){Xi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xi(t,function(){e++}),e},toArray:function(t){return Xi(t,function(e){return e})||[]},only:function(t){if(!ru(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Dr;H.Fragment=hv;H.Profiler=mv;H.PureComponent=eu;H.StrictMode=pv;H.Suspense=_v;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iv;H.act=Gh;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dh({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=nu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Fh.call(e,u)&&!$h.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qi,type:t.type,key:i,ref:o,props:r,_owner:s}};H.createContext=function(t){return t={$$typeof:vv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gv,_context:t},t.Consumer=t};H.createElement=Vh;H.createFactory=function(t){var e=Vh.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:yv,render:t}};H.isValidElement=ru;H.lazy=function(t){return{$$typeof:Sv,_payload:{_status:-1,_result:t},_init:xv}};H.memo=function(t,e){return{$$typeof:wv,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=Ro.transition;Ro.transition={};try{t()}finally{Ro.transition=e}};H.unstable_act=Gh;H.useCallback=function(t,e){return Le.current.useCallback(t,e)};H.useContext=function(t){return Le.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Le.current.useDeferredValue(t)};H.useEffect=function(t,e){return Le.current.useEffect(t,e)};H.useId=function(){return Le.current.useId()};H.useImperativeHandle=function(t,e,n){return Le.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return Le.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Le.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Le.current.useMemo(t,e)};H.useReducer=function(t,e,n){return Le.current.useReducer(t,e,n)};H.useRef=function(t){return Le.current.useRef(t)};H.useState=function(t){return Le.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return Le.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return Le.current.useTransition()};H.version="18.3.1";Mh.exports=H;var A=Mh.exports;const Bh=dv(A),Av=cv({__proto__:null,default:Bh},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=A,Rv=Symbol.for("react.element"),Nv=Symbol.for("react.fragment"),Pv=Object.prototype.hasOwnProperty,bv=kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mv={key:!0,ref:!0,__self:!0,__source:!0};function Hh(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Pv.call(e,r)&&!Mv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Rv,type:t,key:o,ref:s,props:i,_owner:bv.current}}Ss.Fragment=Nv;Ss.jsx=Hh;Ss.jsxs=Hh;bh.exports=Ss;var g=bh.exports,Ma={},qh={exports:{}},Ke={},zh={exports:{}},Wh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,O){var B=P.length;P.push(O);e:for(;0<B;){var Y=B-1>>>1,le=P[Y];if(0<i(le,O))P[Y]=O,P[B]=le,B=Y;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var O=P[0],B=P.pop();if(B!==O){P[0]=B;e:for(var Y=0,le=P.length,Bn=le>>>1;Y<Bn;){var Ct=2*(Y+1)-1,Yi=P[Ct],vt=Ct+1,Hn=P[vt];if(0>i(Yi,B))vt<le&&0>i(Hn,Yi)?(P[Y]=Hn,P[vt]=B,Y=vt):(P[Y]=Yi,P[Ct]=B,Y=Ct);else if(vt<le&&0>i(Hn,B))P[Y]=Hn,P[vt]=B,Y=vt;else break e}}return O}function i(P,O){var B=P.sortIndex-O.sortIndex;return B!==0?B:P.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],c=[],f=1,h=null,p=3,m=!1,v=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=P)r(c),O.sortIndex=O.expirationTime,e(u,O);else break;O=n(c)}}function T(P){if(S=!1,w(P),!v)if(n(u)!==null)v=!0,F(C);else{var O=n(c);O!==null&&de(T,O.startTime-P)}}function C(P,O){v=!1,S&&(S=!1,_(N),N=-1),m=!0;var B=p;try{for(w(O),h=n(u);h!==null&&(!(h.expirationTime>O)||P&&!q());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var le=Y(h.expirationTime<=O);O=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(u)&&r(u),w(O)}else r(u);h=n(u)}if(h!==null)var Bn=!0;else{var Ct=n(c);Ct!==null&&de(T,Ct.startTime-O),Bn=!1}return Bn}finally{h=null,p=B,m=!1}}var x=!1,I=null,N=-1,b=5,M=-1;function q(){return!(t.unstable_now()-M<b)}function se(){if(I!==null){var P=t.unstable_now();M=P;var O=!0;try{O=I(!0,P)}finally{O?ee():(x=!1,I=null)}}else x=!1}var ee;if(typeof y=="function")ee=function(){y(se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,k=ae.port2;ae.port1.onmessage=se,ee=function(){k.postMessage(null)}}else ee=function(){E(se,0)};function F(P){I=P,x||(x=!0,ee())}function de(P,O){N=E(function(){P(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,F(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var B=p;p=O;try{return P()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,O){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=p;p=P;try{return O()}finally{p=B}},t.unstable_scheduleCallback=function(P,O,B){var Y=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Y+B:Y):B=Y,P){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=B+le,P={id:f++,callback:O,priorityLevel:P,startTime:B,expirationTime:le,sortIndex:-1},B>Y?(P.sortIndex=B,e(c,P),n(u)===null&&P===n(c)&&(S?(_(N),N=-1):S=!0,de(T,B-Y))):(P.sortIndex=le,e(u,P),v||m||(v=!0,F(C))),P},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(P){var O=p;return function(){var B=p;p=O;try{return P.apply(this,arguments)}finally{p=B}}}})(Wh);zh.exports=Wh;var Lv=zh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=A,Je=Lv;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jh=new Set,vi={};function On(t,e){Ar(t,e),Ar(t+"Capture",e)}function Ar(t,e){for(vi[t]=e,t=0;t<e.length;t++)Jh.add(e[t])}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=Object.prototype.hasOwnProperty,Uv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pc={},mc={};function Ov(t){return La.call(mc,t)?!0:La.call(pc,t)?!1:Uv.test(t)?mc[t]=!0:(pc[t]=!0,!1)}function Fv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $v(t,e,n,r){if(e===null||typeof e>"u"||Fv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ce[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ce[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ce[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ce[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ce[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ce[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ce[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ce[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ce[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var iu=/[\-:]([a-z])/g;function ou(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iu,ou);Ce[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iu,ou);Ce[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iu,ou);Ce[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ce[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ce[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function su(t,e,n,r){var i=Ce.hasOwnProperty(e)?Ce[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($v(e,n,i,r)&&(n=null),r||i===null?Ov(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ut=Dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zi=Symbol.for("react.element"),rr=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),au=Symbol.for("react.strict_mode"),Da=Symbol.for("react.profiler"),Kh=Symbol.for("react.provider"),jh=Symbol.for("react.context"),lu=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),Oa=Symbol.for("react.suspense_list"),uu=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),Yh=Symbol.for("react.offscreen"),gc=Symbol.iterator;function Hr(t){return t===null||typeof t!="object"?null:(t=gc&&t[gc]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,Ys;function ei(t){if(Ys===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ys=e&&e[1]||""}return`
`+Ys+t}var Qs=!1;function Xs(t,e){if(!t||Qs)return"";Qs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=a);break}}}finally{Qs=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ei(t):""}function Vv(t){switch(t.tag){case 5:return ei(t.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return t=Xs(t.type,!1),t;case 11:return t=Xs(t.type.render,!1),t;case 1:return t=Xs(t.type,!0),t;default:return""}}function Fa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ir:return"Fragment";case rr:return"Portal";case Da:return"Profiler";case au:return"StrictMode";case Ua:return"Suspense";case Oa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jh:return(t.displayName||"Context")+".Consumer";case Kh:return(t._context.displayName||"Context")+".Provider";case lu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uu:return e=t.displayName||null,e!==null?e:Fa(t.type)||"Memo";case Gt:e=t._payload,t=t._init;try{return Fa(t(e))}catch{}}return null}function Gv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(e);case 8:return e===au?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bv(t){var e=Qh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eo(t){t._valueTracker||(t._valueTracker=Bv(t))}function Xh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $a(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ln(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zh(t,e){e=e.checked,e!=null&&su(t,"checked",e,!1)}function Va(t,e){Zh(t,e);var n=ln(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ga(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ga(t,e.type,ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ga(t,e,n){(e!=="number"||Bo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ti=Array.isArray;function yr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ln(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ba(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _c(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(ti(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ln(n)}}function ep(t,e){var n=ln(e.value),r=ln(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ha(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var to,np=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(to=to||document.createElement("div"),to.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=to.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hv=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(t){Hv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),si[e]=si[t]})});function rp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||si.hasOwnProperty(t)&&si[t]?(""+e).trim():e+"px"}function ip(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qv=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(t,e){if(e){if(qv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function za(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wa=null;function cu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ja=null,_r=null,wr=null;function Sc(t){if(t=Ji(t)){if(typeof Ja!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Is(e),Ja(t.stateNode,t.type,e))}}function op(t){_r?wr?wr.push(t):wr=[t]:_r=t}function sp(){if(_r){var t=_r,e=wr;if(wr=_r=null,Sc(t),e)for(t=0;t<e.length;t++)Sc(e[t])}}function ap(t,e){return t(e)}function lp(){}var Zs=!1;function up(t,e,n){if(Zs)return t(e,n);Zs=!0;try{return ap(t,e,n)}finally{Zs=!1,(_r!==null||wr!==null)&&(lp(),sp())}}function _i(t,e){var n=t.stateNode;if(n===null)return null;var r=Is(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Ka=!1;if(Pt)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{Ka=!1}function zv(t,e,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ai=!1,Ho=null,qo=!1,ja=null,Wv={onError:function(t){ai=!0,Ho=t}};function Jv(t,e,n,r,i,o,s,a,u){ai=!1,Ho=null,zv.apply(Wv,arguments)}function Kv(t,e,n,r,i,o,s,a,u){if(Jv.apply(this,arguments),ai){if(ai){var c=Ho;ai=!1,Ho=null}else throw Error(R(198));qo||(qo=!0,ja=c)}}function Fn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ec(t){if(Fn(t)!==t)throw Error(R(188))}function jv(t){var e=t.alternate;if(!e){if(e=Fn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ec(i),t;if(o===r)return Ec(i),e;o=o.sibling}throw Error(R(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function dp(t){return t=jv(t),t!==null?fp(t):null}function fp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fp(t);if(e!==null)return e;t=t.sibling}return null}var hp=Je.unstable_scheduleCallback,Tc=Je.unstable_cancelCallback,Yv=Je.unstable_shouldYield,Qv=Je.unstable_requestPaint,ue=Je.unstable_now,Xv=Je.unstable_getCurrentPriorityLevel,du=Je.unstable_ImmediatePriority,pp=Je.unstable_UserBlockingPriority,zo=Je.unstable_NormalPriority,Zv=Je.unstable_LowPriority,mp=Je.unstable_IdlePriority,Es=null,Et=null;function ey(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Es,t,void 0,(t.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:ry,ty=Math.log,ny=Math.LN2;function ry(t){return t>>>=0,t===0?32:31-(ty(t)/ny|0)|0}var no=64,ro=4194304;function ni(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=ni(a):(o&=s,o!==0&&(r=ni(o)))}else s=n&~i,s!==0?r=ni(s):o!==0&&(r=ni(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dt(e),i=1<<n,r|=t[n],e&=~i;return r}function iy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-dt(o),a=1<<s,u=i[s];u===-1?(!(a&n)||a&r)&&(i[s]=iy(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function Ya(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gp(){var t=no;return no<<=1,!(no&4194240)&&(no=64),t}function ea(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dt(e),t[e]=n}function sy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-dt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function fu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var J=0;function vp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yp,hu,_p,wp,Sp,Qa=!1,io=[],Xt=null,Zt=null,en=null,wi=new Map,Si=new Map,zt=[],ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cc(t,e){switch(t){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Si.delete(e.pointerId)}}function zr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ji(e),e!==null&&hu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ly(t,e,n,r,i){switch(e){case"focusin":return Xt=zr(Xt,t,e,n,r,i),!0;case"dragenter":return Zt=zr(Zt,t,e,n,r,i),!0;case"mouseover":return en=zr(en,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return wi.set(o,zr(wi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Si.set(o,zr(Si.get(o)||null,t,e,n,r,i)),!0}return!1}function Ep(t){var e=xn(t.target);if(e!==null){var n=Fn(e);if(n!==null){if(e=n.tag,e===13){if(e=cp(n),e!==null){t.blockedOn=e,Sp(t.priority,function(){_p(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function No(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wa=r,n.target.dispatchEvent(r),Wa=null}else return e=Ji(n),e!==null&&hu(e),t.blockedOn=n,!1;e.shift()}return!0}function xc(t,e,n){No(t)&&n.delete(e)}function uy(){Qa=!1,Xt!==null&&No(Xt)&&(Xt=null),Zt!==null&&No(Zt)&&(Zt=null),en!==null&&No(en)&&(en=null),wi.forEach(xc),Si.forEach(xc)}function Wr(t,e){t.blockedOn===e&&(t.blockedOn=null,Qa||(Qa=!0,Je.unstable_scheduleCallback(Je.unstable_NormalPriority,uy)))}function Ei(t){function e(i){return Wr(i,t)}if(0<io.length){Wr(io[0],t);for(var n=1;n<io.length;n++){var r=io[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xt!==null&&Wr(Xt,t),Zt!==null&&Wr(Zt,t),en!==null&&Wr(en,t),wi.forEach(e),Si.forEach(e),n=0;n<zt.length;n++)r=zt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zt.length&&(n=zt[0],n.blockedOn===null);)Ep(n),n.blockedOn===null&&zt.shift()}var Sr=Ut.ReactCurrentBatchConfig,Jo=!0;function cy(t,e,n,r){var i=J,o=Sr.transition;Sr.transition=null;try{J=1,pu(t,e,n,r)}finally{J=i,Sr.transition=o}}function dy(t,e,n,r){var i=J,o=Sr.transition;Sr.transition=null;try{J=4,pu(t,e,n,r)}finally{J=i,Sr.transition=o}}function pu(t,e,n,r){if(Jo){var i=Xa(t,e,n,r);if(i===null)ca(t,e,r,Ko,n),Cc(t,r);else if(ly(i,t,e,n,r))r.stopPropagation();else if(Cc(t,r),e&4&&-1<ay.indexOf(t)){for(;i!==null;){var o=Ji(i);if(o!==null&&yp(o),o=Xa(t,e,n,r),o===null&&ca(t,e,r,Ko,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ca(t,e,r,null,n)}}var Ko=null;function Xa(t,e,n,r){if(Ko=null,t=cu(r),t=xn(t),t!==null)if(e=Fn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ko=t,null}function Tp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xv()){case du:return 1;case pp:return 4;case zo:case Zv:return 16;case mp:return 536870912;default:return 16}default:return 16}}var Kt=null,mu=null,Po=null;function Cp(){if(Po)return Po;var t,e=mu,n=e.length,r,i="value"in Kt?Kt.value:Kt.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Po=i.slice(t,1<r?1-r:void 0)}function bo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function oo(){return!0}function Ic(){return!1}function je(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?oo:Ic,this.isPropagationStopped=Ic,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=oo)},persist:function(){},isPersistent:oo}),e}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gu=je(Ur),Wi=re({},Ur,{view:0,detail:0}),fy=je(Wi),ta,na,Jr,Ts=re({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jr&&(Jr&&t.type==="mousemove"?(ta=t.screenX-Jr.screenX,na=t.screenY-Jr.screenY):na=ta=0,Jr=t),ta)},movementY:function(t){return"movementY"in t?t.movementY:na}}),Ac=je(Ts),hy=re({},Ts,{dataTransfer:0}),py=je(hy),my=re({},Wi,{relatedTarget:0}),ra=je(my),gy=re({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),vy=je(gy),yy=re({},Ur,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_y=je(yy),wy=re({},Ur,{data:0}),kc=je(wy),Sy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ty={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ty[t])?!!e[t]:!1}function vu(){return Cy}var xy=re({},Wi,{key:function(t){if(t.key){var e=Sy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ey[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(t){return t.type==="keypress"?bo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iy=je(xy),Ay=re({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rc=je(Ay),ky=re({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),Ry=je(ky),Ny=re({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Py=je(Ny),by=re({},Ts,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),My=je(by),Ly=[9,13,27,32],yu=Pt&&"CompositionEvent"in window,li=null;Pt&&"documentMode"in document&&(li=document.documentMode);var Dy=Pt&&"TextEvent"in window&&!li,xp=Pt&&(!yu||li&&8<li&&11>=li),Nc=" ",Pc=!1;function Ip(t,e){switch(t){case"keyup":return Ly.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var or=!1;function Uy(t,e){switch(t){case"compositionend":return Ap(e);case"keypress":return e.which!==32?null:(Pc=!0,Nc);case"textInput":return t=e.data,t===Nc&&Pc?null:t;default:return null}}function Oy(t,e){if(or)return t==="compositionend"||!yu&&Ip(t,e)?(t=Cp(),Po=mu=Kt=null,or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xp&&e.locale!=="ko"?null:e.data;default:return null}}var Fy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fy[t.type]:e==="textarea"}function kp(t,e,n,r){op(r),e=jo(e,"onChange"),0<e.length&&(n=new gu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ui=null,Ti=null;function $y(t){$p(t,0)}function Cs(t){var e=lr(t);if(Xh(e))return t}function Vy(t,e){if(t==="change")return e}var Rp=!1;if(Pt){var ia;if(Pt){var oa="oninput"in document;if(!oa){var Mc=document.createElement("div");Mc.setAttribute("oninput","return;"),oa=typeof Mc.oninput=="function"}ia=oa}else ia=!1;Rp=ia&&(!document.documentMode||9<document.documentMode)}function Lc(){ui&&(ui.detachEvent("onpropertychange",Np),Ti=ui=null)}function Np(t){if(t.propertyName==="value"&&Cs(Ti)){var e=[];kp(e,Ti,t,cu(t)),up($y,e)}}function Gy(t,e,n){t==="focusin"?(Lc(),ui=e,Ti=n,ui.attachEvent("onpropertychange",Np)):t==="focusout"&&Lc()}function By(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cs(Ti)}function Hy(t,e){if(t==="click")return Cs(e)}function qy(t,e){if(t==="input"||t==="change")return Cs(e)}function zy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mt=typeof Object.is=="function"?Object.is:zy;function Ci(t,e){if(mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!La.call(e,i)||!mt(t[i],e[i]))return!1}return!0}function Dc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uc(t,e){var n=Dc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dc(n)}}function Pp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bp(){for(var t=window,e=Bo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bo(t.document)}return e}function _u(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wy(t){var e=bp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pp(n.ownerDocument.documentElement,n)){if(r!==null&&_u(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Uc(n,o);var s=Uc(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jy=Pt&&"documentMode"in document&&11>=document.documentMode,sr=null,Za=null,ci=null,el=!1;function Oc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;el||sr==null||sr!==Bo(r)||(r=sr,"selectionStart"in r&&_u(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ci&&Ci(ci,r)||(ci=r,r=jo(Za,"onSelect"),0<r.length&&(e=new gu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=sr)))}function so(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ar={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionend:so("Transition","TransitionEnd")},sa={},Mp={};Pt&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function xs(t){if(sa[t])return sa[t];if(!ar[t])return t;var e=ar[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mp)return sa[t]=e[n];return t}var Lp=xs("animationend"),Dp=xs("animationiteration"),Up=xs("animationstart"),Op=xs("transitionend"),Fp=new Map,Fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(t,e){Fp.set(t,e),On(e,[t])}for(var aa=0;aa<Fc.length;aa++){var la=Fc[aa],Ky=la.toLowerCase(),jy=la[0].toUpperCase()+la.slice(1);cn(Ky,"on"+jy)}cn(Lp,"onAnimationEnd");cn(Dp,"onAnimationIteration");cn(Up,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn(Op,"onTransitionEnd");Ar("onMouseEnter",["mouseout","mouseover"]);Ar("onMouseLeave",["mouseout","mouseover"]);Ar("onPointerEnter",["pointerout","pointerover"]);Ar("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function $c(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Kv(r,e,void 0,t),t.currentTarget=null}function $p(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;$c(i,a,c),o=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,c=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;$c(i,a,c),o=u}}}if(qo)throw t=ja,qo=!1,ja=null,t}function Q(t,e){var n=e[ol];n===void 0&&(n=e[ol]=new Set);var r=t+"__bubble";n.has(r)||(Vp(e,t,2,!1),n.add(r))}function ua(t,e,n){var r=0;e&&(r|=4),Vp(n,t,r,e)}var ao="_reactListening"+Math.random().toString(36).slice(2);function xi(t){if(!t[ao]){t[ao]=!0,Jh.forEach(function(n){n!=="selectionchange"&&(Yy.has(n)||ua(n,!1,t),ua(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ao]||(e[ao]=!0,ua("selectionchange",!1,e))}}function Vp(t,e,n,r){switch(Tp(e)){case 1:var i=cy;break;case 4:i=dy;break;default:i=pu}n=i.bind(null,e,n,t),i=void 0,!Ka||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ca(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=xn(a),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}a=a.parentNode}}r=r.return}up(function(){var c=o,f=cu(n),h=[];e:{var p=Fp.get(t);if(p!==void 0){var m=gu,v=t;switch(t){case"keypress":if(bo(n)===0)break e;case"keydown":case"keyup":m=Iy;break;case"focusin":v="focus",m=ra;break;case"focusout":v="blur",m=ra;break;case"beforeblur":case"afterblur":m=ra;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ry;break;case Lp:case Dp:case Up:m=vy;break;case Op:m=Py;break;case"scroll":m=fy;break;case"wheel":m=My;break;case"copy":case"cut":case"paste":m=_y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Rc}var S=(e&4)!==0,E=!S&&t==="scroll",_=S?p!==null?p+"Capture":null:p;S=[];for(var y=c,w;y!==null;){w=y;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,_!==null&&(T=_i(y,_),T!=null&&S.push(Ii(y,T,w)))),E)break;y=y.return}0<S.length&&(p=new m(p,v,null,n,f),h.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Wa&&(v=n.relatedTarget||n.fromElement)&&(xn(v)||v[bt]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?xn(v):null,v!==null&&(E=Fn(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(S=Ac,T="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=Rc,T="onPointerLeave",_="onPointerEnter",y="pointer"),E=m==null?p:lr(m),w=v==null?p:lr(v),p=new S(T,y+"leave",m,n,f),p.target=E,p.relatedTarget=w,T=null,xn(f)===c&&(S=new S(_,y+"enter",v,n,f),S.target=w,S.relatedTarget=E,T=S),E=T,m&&v)t:{for(S=m,_=v,y=0,w=S;w;w=qn(w))y++;for(w=0,T=_;T;T=qn(T))w++;for(;0<y-w;)S=qn(S),y--;for(;0<w-y;)_=qn(_),w--;for(;y--;){if(S===_||_!==null&&S===_.alternate)break t;S=qn(S),_=qn(_)}S=null}else S=null;m!==null&&Vc(h,p,m,S,!1),v!==null&&E!==null&&Vc(h,E,v,S,!0)}}e:{if(p=c?lr(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=Vy;else if(bc(p))if(Rp)C=qy;else{C=By;var x=Gy}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=Hy);if(C&&(C=C(t,c))){kp(h,C,n,f);break e}x&&x(t,p,c),t==="focusout"&&(x=p._wrapperState)&&x.controlled&&p.type==="number"&&Ga(p,"number",p.value)}switch(x=c?lr(c):window,t){case"focusin":(bc(x)||x.contentEditable==="true")&&(sr=x,Za=c,ci=null);break;case"focusout":ci=Za=sr=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,Oc(h,n,f);break;case"selectionchange":if(Jy)break;case"keydown":case"keyup":Oc(h,n,f)}var I;if(yu)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else or?Ip(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(xp&&n.locale!=="ko"&&(or||N!=="onCompositionStart"?N==="onCompositionEnd"&&or&&(I=Cp()):(Kt=f,mu="value"in Kt?Kt.value:Kt.textContent,or=!0)),x=jo(c,N),0<x.length&&(N=new kc(N,t,null,n,f),h.push({event:N,listeners:x}),I?N.data=I:(I=Ap(n),I!==null&&(N.data=I)))),(I=Dy?Uy(t,n):Oy(t,n))&&(c=jo(c,"onBeforeInput"),0<c.length&&(f=new kc("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=I))}$p(h,e)})}function Ii(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_i(t,n),o!=null&&r.unshift(Ii(t,o,i)),o=_i(t,e),o!=null&&r.push(Ii(t,o,i))),t=t.return}return r}function qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vc(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=_i(n,o),u!=null&&s.unshift(Ii(n,u,a))):i||(u=_i(n,o),u!=null&&s.push(Ii(n,u,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Qy=/\r\n?/g,Xy=/\u0000|\uFFFD/g;function Gc(t){return(typeof t=="string"?t:""+t).replace(Qy,`
`).replace(Xy,"")}function lo(t,e,n){if(e=Gc(e),Gc(t)!==e&&n)throw Error(R(425))}function Yo(){}var tl=null,nl=null;function rl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var il=typeof setTimeout=="function"?setTimeout:void 0,Zy=typeof clearTimeout=="function"?clearTimeout:void 0,Bc=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof Bc<"u"?function(t){return Bc.resolve(null).then(t).catch(t0)}:il;function t0(t){setTimeout(function(){throw t})}function da(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ei(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ei(e)}function tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Or=Math.random().toString(36).slice(2),wt="__reactFiber$"+Or,Ai="__reactProps$"+Or,bt="__reactContainer$"+Or,ol="__reactEvents$"+Or,n0="__reactListeners$"+Or,r0="__reactHandles$"+Or;function xn(t){var e=t[wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bt]||n[wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hc(t);t!==null;){if(n=t[wt])return n;t=Hc(t)}return e}t=n,n=t.parentNode}return null}function Ji(t){return t=t[wt]||t[bt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Is(t){return t[Ai]||null}var sl=[],ur=-1;function dn(t){return{current:t}}function X(t){0>ur||(t.current=sl[ur],sl[ur]=null,ur--)}function j(t,e){ur++,sl[ur]=t.current,t.current=e}var un={},Re=dn(un),$e=dn(!1),bn=un;function kr(t,e){var n=t.type.contextTypes;if(!n)return un;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ve(t){return t=t.childContextTypes,t!=null}function Qo(){X($e),X(Re)}function qc(t,e,n){if(Re.current!==un)throw Error(R(168));j(Re,e),j($e,n)}function Gp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(R(108,Gv(t)||"Unknown",i));return re({},n,r)}function Xo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||un,bn=Re.current,j(Re,t),j($e,$e.current),!0}function zc(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=Gp(t,e,bn),r.__reactInternalMemoizedMergedChildContext=t,X($e),X(Re),j(Re,t)):X($e),j($e,n)}var At=null,As=!1,fa=!1;function Bp(t){At===null?At=[t]:At.push(t)}function i0(t){As=!0,Bp(t)}function fn(){if(!fa&&At!==null){fa=!0;var t=0,e=J;try{var n=At;for(J=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}At=null,As=!1}catch(i){throw At!==null&&(At=At.slice(t+1)),hp(du,fn),i}finally{J=e,fa=!1}}return null}var cr=[],dr=0,Zo=null,es=0,Ye=[],Qe=0,Mn=null,kt=1,Rt="";function yn(t,e){cr[dr++]=es,cr[dr++]=Zo,Zo=t,es=e}function Hp(t,e,n){Ye[Qe++]=kt,Ye[Qe++]=Rt,Ye[Qe++]=Mn,Mn=t;var r=kt;t=Rt;var i=32-dt(r)-1;r&=~(1<<i),n+=1;var o=32-dt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,kt=1<<32-dt(e)+i|n<<i|r,Rt=o+t}else kt=1<<o|n<<i|r,Rt=t}function wu(t){t.return!==null&&(yn(t,1),Hp(t,1,0))}function Su(t){for(;t===Zo;)Zo=cr[--dr],cr[dr]=null,es=cr[--dr],cr[dr]=null;for(;t===Mn;)Mn=Ye[--Qe],Ye[Qe]=null,Rt=Ye[--Qe],Ye[Qe]=null,kt=Ye[--Qe],Ye[Qe]=null}var We=null,ze=null,Z=!1,ct=null;function qp(t,e){var n=Xe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,We=t,ze=tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,We=t,ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mn!==null?{id:kt,overflow:Rt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,We=t,ze=null,!0):!1;default:return!1}}function al(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ll(t){if(Z){var e=ze;if(e){var n=e;if(!Wc(t,e)){if(al(t))throw Error(R(418));e=tn(n.nextSibling);var r=We;e&&Wc(t,e)?qp(r,n):(t.flags=t.flags&-4097|2,Z=!1,We=t)}}else{if(al(t))throw Error(R(418));t.flags=t.flags&-4097|2,Z=!1,We=t}}}function Jc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;We=t}function uo(t){if(t!==We)return!1;if(!Z)return Jc(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rl(t.type,t.memoizedProps)),e&&(e=ze)){if(al(t))throw zp(),Error(R(418));for(;e;)qp(t,e),e=tn(e.nextSibling)}if(Jc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ze=tn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ze=null}}else ze=We?tn(t.stateNode.nextSibling):null;return!0}function zp(){for(var t=ze;t;)t=tn(t.nextSibling)}function Rr(){ze=We=null,Z=!1}function Eu(t){ct===null?ct=[t]:ct.push(t)}var o0=Ut.ReactCurrentBatchConfig;function Kr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function co(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kc(t){var e=t._init;return e(t._payload)}function Wp(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=sn(_,y),_.index=0,_.sibling=null,_}function o(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,T){return y===null||y.tag!==6?(y=_a(w,_.mode,T),y.return=_,y):(y=i(y,w),y.return=_,y)}function u(_,y,w,T){var C=w.type;return C===ir?f(_,y,w.props.children,T,w.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Gt&&Kc(C)===y.type)?(T=i(y,w.props),T.ref=Kr(_,y,w),T.return=_,T):(T=$o(w.type,w.key,w.props,null,_.mode,T),T.ref=Kr(_,y,w),T.return=_,T)}function c(_,y,w,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=wa(w,_.mode,T),y.return=_,y):(y=i(y,w.children||[]),y.return=_,y)}function f(_,y,w,T,C){return y===null||y.tag!==7?(y=Pn(w,_.mode,T,C),y.return=_,y):(y=i(y,w),y.return=_,y)}function h(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_a(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zi:return w=$o(y.type,y.key,y.props,null,_.mode,w),w.ref=Kr(_,null,y),w.return=_,w;case rr:return y=wa(y,_.mode,w),y.return=_,y;case Gt:var T=y._init;return h(_,T(y._payload),w)}if(ti(y)||Hr(y))return y=Pn(y,_.mode,w,null),y.return=_,y;co(_,y)}return null}function p(_,y,w,T){var C=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(_,y,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zi:return w.key===C?u(_,y,w,T):null;case rr:return w.key===C?c(_,y,w,T):null;case Gt:return C=w._init,p(_,y,C(w._payload),T)}if(ti(w)||Hr(w))return C!==null?null:f(_,y,w,T,null);co(_,w)}return null}function m(_,y,w,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return _=_.get(w)||null,a(y,_,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Zi:return _=_.get(T.key===null?w:T.key)||null,u(y,_,T,C);case rr:return _=_.get(T.key===null?w:T.key)||null,c(y,_,T,C);case Gt:var x=T._init;return m(_,y,w,x(T._payload),C)}if(ti(T)||Hr(T))return _=_.get(w)||null,f(y,_,T,C,null);co(y,T)}return null}function v(_,y,w,T){for(var C=null,x=null,I=y,N=y=0,b=null;I!==null&&N<w.length;N++){I.index>N?(b=I,I=null):b=I.sibling;var M=p(_,I,w[N],T);if(M===null){I===null&&(I=b);break}t&&I&&M.alternate===null&&e(_,I),y=o(M,y,N),x===null?C=M:x.sibling=M,x=M,I=b}if(N===w.length)return n(_,I),Z&&yn(_,N),C;if(I===null){for(;N<w.length;N++)I=h(_,w[N],T),I!==null&&(y=o(I,y,N),x===null?C=I:x.sibling=I,x=I);return Z&&yn(_,N),C}for(I=r(_,I);N<w.length;N++)b=m(I,_,N,w[N],T),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?N:b.key),y=o(b,y,N),x===null?C=b:x.sibling=b,x=b);return t&&I.forEach(function(q){return e(_,q)}),Z&&yn(_,N),C}function S(_,y,w,T){var C=Hr(w);if(typeof C!="function")throw Error(R(150));if(w=C.call(w),w==null)throw Error(R(151));for(var x=C=null,I=y,N=y=0,b=null,M=w.next();I!==null&&!M.done;N++,M=w.next()){I.index>N?(b=I,I=null):b=I.sibling;var q=p(_,I,M.value,T);if(q===null){I===null&&(I=b);break}t&&I&&q.alternate===null&&e(_,I),y=o(q,y,N),x===null?C=q:x.sibling=q,x=q,I=b}if(M.done)return n(_,I),Z&&yn(_,N),C;if(I===null){for(;!M.done;N++,M=w.next())M=h(_,M.value,T),M!==null&&(y=o(M,y,N),x===null?C=M:x.sibling=M,x=M);return Z&&yn(_,N),C}for(I=r(_,I);!M.done;N++,M=w.next())M=m(I,_,N,M.value,T),M!==null&&(t&&M.alternate!==null&&I.delete(M.key===null?N:M.key),y=o(M,y,N),x===null?C=M:x.sibling=M,x=M);return t&&I.forEach(function(se){return e(_,se)}),Z&&yn(_,N),C}function E(_,y,w,T){if(typeof w=="object"&&w!==null&&w.type===ir&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zi:e:{for(var C=w.key,x=y;x!==null;){if(x.key===C){if(C=w.type,C===ir){if(x.tag===7){n(_,x.sibling),y=i(x,w.props.children),y.return=_,_=y;break e}}else if(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Gt&&Kc(C)===x.type){n(_,x.sibling),y=i(x,w.props),y.ref=Kr(_,x,w),y.return=_,_=y;break e}n(_,x);break}else e(_,x);x=x.sibling}w.type===ir?(y=Pn(w.props.children,_.mode,T,w.key),y.return=_,_=y):(T=$o(w.type,w.key,w.props,null,_.mode,T),T.ref=Kr(_,y,w),T.return=_,_=T)}return s(_);case rr:e:{for(x=w.key;y!==null;){if(y.key===x)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=i(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=wa(w,_.mode,T),y.return=_,_=y}return s(_);case Gt:return x=w._init,E(_,y,x(w._payload),T)}if(ti(w))return v(_,y,w,T);if(Hr(w))return S(_,y,w,T);co(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,w),y.return=_,_=y):(n(_,y),y=_a(w,_.mode,T),y.return=_,_=y),s(_)):n(_,y)}return E}var Nr=Wp(!0),Jp=Wp(!1),ts=dn(null),ns=null,fr=null,Tu=null;function Cu(){Tu=fr=ns=null}function xu(t){var e=ts.current;X(ts),t._currentValue=e}function ul(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Er(t,e){ns=t,Tu=fr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function tt(t){var e=t._currentValue;if(Tu!==t)if(t={context:t,memoizedValue:e,next:null},fr===null){if(ns===null)throw Error(R(308));fr=t,ns.dependencies={lanes:0,firstContext:t}}else fr=fr.next=t;return e}var In=null;function Iu(t){In===null?In=[t]:In.push(t)}function Kp(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Iu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mt(t,r)}function Mt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bt=!1;function Au(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,z&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mt(t,n)}return i=r.interleaved,i===null?(e.next=e,Iu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mt(t,n)}function Mo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fu(t,n)}}function jc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rs(t,e,n,r){var i=t.updateQueue;Bt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(o!==null){var h=i.baseState;s=0,f=c=u=null,a=o;do{var p=a.lane,m=a.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,S=a;switch(p=e,m=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=re({},h,p);break e;case 2:Bt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=m,u=h):f=f.next=m,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Dn|=s,t.lanes=s,t.memoizedState=h}}function Yc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(R(191,i));i.call(r)}}}var Ki={},Tt=dn(Ki),ki=dn(Ki),Ri=dn(Ki);function An(t){if(t===Ki)throw Error(R(174));return t}function ku(t,e){switch(j(Ri,e),j(ki,t),j(Tt,Ki),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ha(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ha(e,t)}X(Tt),j(Tt,e)}function Pr(){X(Tt),X(ki),X(Ri)}function Yp(t){An(Ri.current);var e=An(Tt.current),n=Ha(e,t.type);e!==n&&(j(ki,t),j(Tt,n))}function Ru(t){ki.current===t&&(X(Tt),X(ki))}var te=dn(0);function is(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ha=[];function Nu(){for(var t=0;t<ha.length;t++)ha[t]._workInProgressVersionPrimary=null;ha.length=0}var Lo=Ut.ReactCurrentDispatcher,pa=Ut.ReactCurrentBatchConfig,Ln=0,ne=null,me=null,ve=null,os=!1,di=!1,Ni=0,s0=0;function xe(){throw Error(R(321))}function Pu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mt(t[n],e[n]))return!1;return!0}function bu(t,e,n,r,i,o){if(Ln=o,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lo.current=t===null||t.memoizedState===null?c0:d0,t=n(r,i),di){o=0;do{if(di=!1,Ni=0,25<=o)throw Error(R(301));o+=1,ve=me=null,e.updateQueue=null,Lo.current=f0,t=n(r,i)}while(di)}if(Lo.current=ss,e=me!==null&&me.next!==null,Ln=0,ve=me=ne=null,os=!1,e)throw Error(R(300));return t}function Mu(){var t=Ni!==0;return Ni=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?ne.memoizedState=ve=t:ve=ve.next=t,ve}function nt(){if(me===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=me.next;var e=ve===null?ne.memoizedState:ve.next;if(e!==null)ve=e,me=t;else{if(t===null)throw Error(R(310));me=t,t={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ve===null?ne.memoizedState=ve=t:ve=ve.next=t}return ve}function Pi(t,e){return typeof e=="function"?e(t):e}function ma(t){var e=nt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=me,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,u=null,c=o;do{var f=c.lane;if((Ln&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,s=r):u=u.next=h,ne.lanes|=f,Dn|=f}c=c.next}while(c!==null&&c!==o);u===null?s=r:u.next=a,mt(r,e.memoizedState)||(Fe=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ne.lanes|=o,Dn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ga(t){var e=nt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);mt(o,e.memoizedState)||(Fe=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Qp(){}function Xp(t,e){var n=ne,r=nt(),i=e(),o=!mt(r.memoizedState,i);if(o&&(r.memoizedState=i,Fe=!0),r=r.queue,Lu(tm.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ve!==null&&ve.memoizedState.tag&1){if(n.flags|=2048,bi(9,em.bind(null,n,r,i,e),void 0,null),ye===null)throw Error(R(349));Ln&30||Zp(n,e,i)}return i}function Zp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function em(t,e,n,r){e.value=n,e.getSnapshot=r,nm(e)&&rm(t)}function tm(t,e,n){return n(function(){nm(e)&&rm(t)})}function nm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mt(t,n)}catch{return!0}}function rm(t){var e=Mt(t,1);e!==null&&ft(e,t,1,-1)}function Qc(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:t},e.queue=t,t=t.dispatch=u0.bind(null,ne,t),[e.memoizedState,t]}function bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function im(){return nt().memoizedState}function Do(t,e,n,r){var i=_t();ne.flags|=t,i.memoizedState=bi(1|e,n,void 0,r===void 0?null:r)}function ks(t,e,n,r){var i=nt();r=r===void 0?null:r;var o=void 0;if(me!==null){var s=me.memoizedState;if(o=s.destroy,r!==null&&Pu(r,s.deps)){i.memoizedState=bi(e,n,o,r);return}}ne.flags|=t,i.memoizedState=bi(1|e,n,o,r)}function Xc(t,e){return Do(8390656,8,t,e)}function Lu(t,e){return ks(2048,8,t,e)}function om(t,e){return ks(4,2,t,e)}function sm(t,e){return ks(4,4,t,e)}function am(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lm(t,e,n){return n=n!=null?n.concat([t]):null,ks(4,4,am.bind(null,e,t),n)}function Du(){}function um(t,e){var n=nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cm(t,e){var n=nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dm(t,e,n){return Ln&21?(mt(n,e)||(n=gp(),ne.lanes|=n,Dn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=n)}function a0(t,e){var n=J;J=n!==0&&4>n?n:4,t(!0);var r=pa.transition;pa.transition={};try{t(!1),e()}finally{J=n,pa.transition=r}}function fm(){return nt().memoizedState}function l0(t,e,n){var r=on(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hm(t))pm(e,n);else if(n=Kp(t,e,n,r),n!==null){var i=be();ft(n,t,r,i),mm(n,e,r)}}function u0(t,e,n){var r=on(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hm(t))pm(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,mt(a,s)){var u=e.interleaved;u===null?(i.next=i,Iu(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Kp(t,e,i,r),n!==null&&(i=be(),ft(n,t,r,i),mm(n,e,r))}}function hm(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function pm(t,e){di=os=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fu(t,n)}}var ss={readContext:tt,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},c0={readContext:tt,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:tt,useEffect:Xc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Do(4194308,4,am.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Do(4194308,4,t,e)},useInsertionEffect:function(t,e){return Do(4,2,t,e)},useMemo:function(t,e){var n=_t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_t();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=l0.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:Qc,useDebugValue:Du,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=Qc(!1),e=t[0];return t=a0.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,i=_t();if(Z){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),ye===null)throw Error(R(349));Ln&30||Zp(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Xc(tm.bind(null,r,o,t),[t]),r.flags|=2048,bi(9,em.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=_t(),e=ye.identifierPrefix;if(Z){var n=Rt,r=kt;n=(r&~(1<<32-dt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ni++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=s0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d0={readContext:tt,useCallback:um,useContext:tt,useEffect:Lu,useImperativeHandle:lm,useInsertionEffect:om,useLayoutEffect:sm,useMemo:cm,useReducer:ma,useRef:im,useState:function(){return ma(Pi)},useDebugValue:Du,useDeferredValue:function(t){var e=nt();return dm(e,me.memoizedState,t)},useTransition:function(){var t=ma(Pi)[0],e=nt().memoizedState;return[t,e]},useMutableSource:Qp,useSyncExternalStore:Xp,useId:fm,unstable_isNewReconciler:!1},f0={readContext:tt,useCallback:um,useContext:tt,useEffect:Lu,useImperativeHandle:lm,useInsertionEffect:om,useLayoutEffect:sm,useMemo:cm,useReducer:ga,useRef:im,useState:function(){return ga(Pi)},useDebugValue:Du,useDeferredValue:function(t){var e=nt();return me===null?e.memoizedState=t:dm(e,me.memoizedState,t)},useTransition:function(){var t=ga(Pi)[0],e=nt().memoizedState;return[t,e]},useMutableSource:Qp,useSyncExternalStore:Xp,useId:fm,unstable_isNewReconciler:!1};function st(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rs={isMounted:function(t){return(t=t._reactInternals)?Fn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=be(),i=on(t),o=Nt(r,i);o.payload=e,n!=null&&(o.callback=n),e=nn(t,o,i),e!==null&&(ft(e,t,i,r),Mo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=be(),i=on(t),o=Nt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=nn(t,o,i),e!==null&&(ft(e,t,i,r),Mo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=be(),r=on(t),i=Nt(n,r);i.tag=2,e!=null&&(i.callback=e),e=nn(t,i,r),e!==null&&(ft(e,t,r,n),Mo(e,t,r))}};function Zc(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ci(n,r)||!Ci(i,o):!0}function gm(t,e,n){var r=!1,i=un,o=e.contextType;return typeof o=="object"&&o!==null?o=tt(o):(i=Ve(e)?bn:Re.current,r=e.contextTypes,o=(r=r!=null)?kr(t,i):un),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ed(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rs.enqueueReplaceState(e,e.state,null)}function dl(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Au(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=tt(o):(o=Ve(e)?bn:Re.current,i.context=kr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(cl(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rs.enqueueReplaceState(i,i.state,null),rs(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function br(t,e){try{var n="",r=e;do n+=Vv(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function va(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var h0=typeof WeakMap=="function"?WeakMap:Map;function vm(t,e,n){n=Nt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ls||(ls=!0,El=r),fl(t,e)},n}function ym(t,e,n){n=Nt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fl(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){fl(t,e),typeof r!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function td(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new h0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=A0.bind(null,t,e,n),e.then(t,t))}function nd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nt(-1,1),e.tag=2,nn(n,e,1))),n.lanes|=1),t)}var p0=Ut.ReactCurrentOwner,Fe=!1;function Pe(t,e,n,r){e.child=t===null?Jp(e,null,n,r):Nr(e,t.child,n,r)}function id(t,e,n,r,i){n=n.render;var o=e.ref;return Er(e,i),r=bu(t,e,n,r,o,i),n=Mu(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lt(t,e,i)):(Z&&n&&wu(e),e.flags|=1,Pe(t,e,r,i),e.child)}function od(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Hu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,_m(t,e,o,r,i)):(t=$o(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ci,n(s,r)&&t.ref===e.ref)return Lt(t,e,i)}return e.flags|=1,t=sn(o,r),t.ref=e.ref,t.return=e,e.child=t}function _m(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ci(o,r)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,Lt(t,e,i)}return hl(t,e,n,r,i)}function wm(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},j(pr,He),He|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,j(pr,He),He|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,j(pr,He),He|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,j(pr,He),He|=r;return Pe(t,e,i,n),e.child}function Sm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hl(t,e,n,r,i){var o=Ve(n)?bn:Re.current;return o=kr(e,o),Er(e,i),n=bu(t,e,n,r,o,i),r=Mu(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lt(t,e,i)):(Z&&r&&wu(e),e.flags|=1,Pe(t,e,n,i),e.child)}function sd(t,e,n,r,i){if(Ve(n)){var o=!0;Xo(e)}else o=!1;if(Er(e,i),e.stateNode===null)Uo(t,e),gm(e,n,r),dl(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=tt(c):(c=Ve(n)?bn:Re.current,c=kr(e,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==c)&&ed(e,s,r,c),Bt=!1;var p=e.memoizedState;s.state=p,rs(e,r,s,i),u=e.memoizedState,a!==r||p!==u||$e.current||Bt?(typeof f=="function"&&(cl(e,n,f,r),u=e.memoizedState),(a=Bt||Zc(e,n,a,r,p,u,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,jp(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:st(e.type,a),s.props=c,h=e.pendingProps,p=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=tt(u):(u=Ve(n)?bn:Re.current,u=kr(e,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==u)&&ed(e,s,r,u),Bt=!1,p=e.memoizedState,s.state=p,rs(e,r,s,i);var v=e.memoizedState;a!==h||p!==v||$e.current||Bt?(typeof m=="function"&&(cl(e,n,m,r),v=e.memoizedState),(c=Bt||Zc(e,n,c,r,p,v,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return pl(t,e,n,r,o,i)}function pl(t,e,n,r,i,o){Sm(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&zc(e,n,!1),Lt(t,e,o);r=e.stateNode,p0.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Nr(e,t.child,null,o),e.child=Nr(e,null,a,o)):Pe(t,e,a,o),e.memoizedState=r.state,i&&zc(e,n,!0),e.child}function Em(t){var e=t.stateNode;e.pendingContext?qc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qc(t,e.context,!1),ku(t,e.containerInfo)}function ad(t,e,n,r,i){return Rr(),Eu(i),e.flags|=256,Pe(t,e,n,r),e.child}var ml={dehydrated:null,treeContext:null,retryLane:0};function gl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tm(t,e,n){var r=e.pendingProps,i=te.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),j(te,i&1),t===null)return ll(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=bs(s,r,0,null),t=Pn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=gl(n),e.memoizedState=ml,t):Uu(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return m0(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=sn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=sn(a,o):(o=Pn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?gl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ml,r}return o=t.child,t=o.sibling,r=sn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uu(t,e){return e=bs({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fo(t,e,n,r){return r!==null&&Eu(r),Nr(e,t.child,null,n),t=Uu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m0(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=va(Error(R(422))),fo(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=bs({mode:"visible",children:r.children},i,0,null),o=Pn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Nr(e,t.child,null,s),e.child.memoizedState=gl(s),e.memoizedState=ml,o);if(!(e.mode&1))return fo(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(R(419)),r=va(o,r,void 0),fo(t,e,s,r)}if(a=(s&t.childLanes)!==0,Fe||a){if(r=ye,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Mt(t,i),ft(r,t,i,-1))}return Bu(),r=va(Error(R(421))),fo(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=k0.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ze=tn(i.nextSibling),We=e,Z=!0,ct=null,t!==null&&(Ye[Qe++]=kt,Ye[Qe++]=Rt,Ye[Qe++]=Mn,kt=t.id,Rt=t.overflow,Mn=e),e=Uu(e,r.children),e.flags|=4096,e)}function ld(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ul(t.return,e,n)}function ya(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Cm(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Pe(t,e,r.children,n),r=te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ld(t,n,e);else if(t.tag===19)ld(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(j(te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&is(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ya(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&is(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ya(e,!0,n,null,o);break;case"together":ya(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=sn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g0(t,e,n){switch(e.tag){case 3:Em(e),Rr();break;case 5:Yp(e);break;case 1:Ve(e.type)&&Xo(e);break;case 4:ku(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;j(ts,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(j(te,te.current&1),e.flags|=128,null):n&e.child.childLanes?Tm(t,e,n):(j(te,te.current&1),t=Lt(t,e,n),t!==null?t.sibling:null);j(te,te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Cm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),j(te,te.current),r)break;return null;case 22:case 23:return e.lanes=0,wm(t,e,n)}return Lt(t,e,n)}var xm,vl,Im,Am;xm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vl=function(){};Im=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,An(Tt.current);var o=null;switch(n){case"input":i=$a(t,i),r=$a(t,r),o=[];break;case"select":i=re({},i,{value:void 0}),r=re({},r,{value:void 0}),o=[];break;case"textarea":i=Ba(t,i),r=Ba(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yo)}qa(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vi.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vi.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Q("scroll",t),o||a===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};Am=function(t,e,n,r){n!==r&&(e.flags|=4)};function jr(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function v0(t,e,n){var r=e.pendingProps;switch(Su(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Ve(e.type)&&Qo(),Ie(e),null;case 3:return r=e.stateNode,Pr(),X($e),X(Re),Nu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ct!==null&&(xl(ct),ct=null))),vl(t,e),Ie(e),null;case 5:Ru(e);var i=An(Ri.current);if(n=e.type,t!==null&&e.stateNode!=null)Im(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return Ie(e),null}if(t=An(Tt.current),uo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[wt]=e,r[Ai]=o,t=(e.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(i=0;i<ri.length;i++)Q(ri[i],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":vc(r,o),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Q("invalid",r);break;case"textarea":_c(r,o),Q("invalid",r)}qa(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&lo(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&lo(r.textContent,a,t),i=["children",""+a]):vi.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Q("scroll",r)}switch(n){case"input":eo(r),yc(r,o,!0);break;case"textarea":eo(r),wc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Yo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[wt]=e,t[Ai]=r,xm(t,e,!1,!1),e.stateNode=t;e:{switch(s=za(n,r),n){case"dialog":Q("cancel",t),Q("close",t),i=r;break;case"iframe":case"object":case"embed":Q("load",t),i=r;break;case"video":case"audio":for(i=0;i<ri.length;i++)Q(ri[i],t);i=r;break;case"source":Q("error",t),i=r;break;case"img":case"image":case"link":Q("error",t),Q("load",t),i=r;break;case"details":Q("toggle",t),i=r;break;case"input":vc(t,r),i=$a(t,r),Q("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=re({},r,{value:void 0}),Q("invalid",t);break;case"textarea":_c(t,r),i=Ba(t,r),Q("invalid",t);break;default:i=r}qa(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?ip(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&np(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&yi(t,u):typeof u=="number"&&yi(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vi.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Q("scroll",t):u!=null&&su(t,o,u,s))}switch(n){case"input":eo(t),yc(t,r,!1);break;case"textarea":eo(t),wc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ln(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?yr(t,!!r.multiple,o,!1):r.defaultValue!=null&&yr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)Am(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=An(Ri.current),An(Tt.current),uo(e)){if(r=e.stateNode,n=e.memoizedProps,r[wt]=e,(o=r.nodeValue!==n)&&(t=We,t!==null))switch(t.tag){case 3:lo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wt]=e,e.stateNode=r}return Ie(e),null;case 13:if(X(te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&ze!==null&&e.mode&1&&!(e.flags&128))zp(),Rr(),e.flags|=98560,o=!1;else if(o=uo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(R(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(R(317));o[wt]=e}else Rr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),o=!1}else ct!==null&&(xl(ct),ct=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?ge===0&&(ge=3):Bu())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return Pr(),vl(t,e),t===null&&xi(e.stateNode.containerInfo),Ie(e),null;case 10:return xu(e.type._context),Ie(e),null;case 17:return Ve(e.type)&&Qo(),Ie(e),null;case 19:if(X(te),o=e.memoizedState,o===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)jr(o,!1);else{if(ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=is(t),s!==null){for(e.flags|=128,jr(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return j(te,te.current&1|2),e.child}t=t.sibling}o.tail!==null&&ue()>Mr&&(e.flags|=128,r=!0,jr(o,!1),e.lanes=4194304)}else{if(!r)if(t=is(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Z)return Ie(e),null}else 2*ue()-o.renderingStartTime>Mr&&n!==1073741824&&(e.flags|=128,r=!0,jr(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ue(),e.sibling=null,n=te.current,j(te,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return Gu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?He&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function y0(t,e){switch(Su(e),e.tag){case 1:return Ve(e.type)&&Qo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pr(),X($e),X(Re),Nu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ru(e),null;case 13:if(X(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));Rr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(te),null;case 4:return Pr(),null;case 10:return xu(e.type._context),null;case 22:case 23:return Gu(),null;case 24:return null;default:return null}}var ho=!1,Ae=!1,_0=typeof WeakSet=="function"?WeakSet:Set,D=null;function hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){oe(t,e,r)}else n.current=null}function yl(t,e,n){try{n()}catch(r){oe(t,e,r)}}var ud=!1;function w0(t,e){if(tl=Jo,t=bp(),_u(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,c=0,f=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(u=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=s),p===o&&++f===r&&(u=s),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nl={focusedElem:t,selectionRange:n},Jo=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?S:st(e.type,S),E);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(T){oe(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return v=ud,ud=!1,v}function fi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&yl(e,n,o)}i=i.next}while(i!==r)}}function Ns(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _l(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function km(t){var e=t.alternate;e!==null&&(t.alternate=null,km(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wt],delete e[Ai],delete e[ol],delete e[n0],delete e[r0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rm(t){return t.tag===5||t.tag===3||t.tag===4}function cd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yo));else if(r!==4&&(t=t.child,t!==null))for(wl(t,e,n),t=t.sibling;t!==null;)wl(t,e,n),t=t.sibling}function Sl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sl(t,e,n),t=t.sibling;t!==null;)Sl(t,e,n),t=t.sibling}var Ee=null,lt=!1;function Vt(t,e,n){for(n=n.child;n!==null;)Nm(t,e,n),n=n.sibling}function Nm(t,e,n){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Es,n)}catch{}switch(n.tag){case 5:Ae||hr(n,e);case 6:var r=Ee,i=lt;Ee=null,Vt(t,e,n),Ee=r,lt=i,Ee!==null&&(lt?(t=Ee,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ee.removeChild(n.stateNode));break;case 18:Ee!==null&&(lt?(t=Ee,n=n.stateNode,t.nodeType===8?da(t.parentNode,n):t.nodeType===1&&da(t,n),Ei(t)):da(Ee,n.stateNode));break;case 4:r=Ee,i=lt,Ee=n.stateNode.containerInfo,lt=!0,Vt(t,e,n),Ee=r,lt=i;break;case 0:case 11:case 14:case 15:if(!Ae&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&yl(n,e,s),i=i.next}while(i!==r)}Vt(t,e,n);break;case 1:if(!Ae&&(hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){oe(n,e,a)}Vt(t,e,n);break;case 21:Vt(t,e,n);break;case 22:n.mode&1?(Ae=(r=Ae)||n.memoizedState!==null,Vt(t,e,n),Ae=r):Vt(t,e,n);break;default:Vt(t,e,n)}}function dd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _0),e.forEach(function(r){var i=R0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function it(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ee=a.stateNode,lt=!1;break e;case 3:Ee=a.stateNode.containerInfo,lt=!0;break e;case 4:Ee=a.stateNode.containerInfo,lt=!0;break e}a=a.return}if(Ee===null)throw Error(R(160));Nm(o,s,i),Ee=null,lt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){oe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pm(e,t),e=e.sibling}function Pm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(it(e,t),yt(t),r&4){try{fi(3,t,t.return),Ns(3,t)}catch(S){oe(t,t.return,S)}try{fi(5,t,t.return)}catch(S){oe(t,t.return,S)}}break;case 1:it(e,t),yt(t),r&512&&n!==null&&hr(n,n.return);break;case 5:if(it(e,t),yt(t),r&512&&n!==null&&hr(n,n.return),t.flags&32){var i=t.stateNode;try{yi(i,"")}catch(S){oe(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Zh(i,o),za(a,s);var c=za(a,o);for(s=0;s<u.length;s+=2){var f=u[s],h=u[s+1];f==="style"?ip(i,h):f==="dangerouslySetInnerHTML"?np(i,h):f==="children"?yi(i,h):su(i,f,h,c)}switch(a){case"input":Va(i,o);break;case"textarea":ep(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?yr(i,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?yr(i,!!o.multiple,o.defaultValue,!0):yr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ai]=o}catch(S){oe(t,t.return,S)}}break;case 6:if(it(e,t),yt(t),r&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(S){oe(t,t.return,S)}}break;case 3:if(it(e,t),yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ei(e.containerInfo)}catch(S){oe(t,t.return,S)}break;case 4:it(e,t),yt(t);break;case 13:it(e,t),yt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||($u=ue())),r&4&&dd(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ae=(c=Ae)||f,it(e,t),Ae=c):it(e,t),yt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(D=t,f=t.child;f!==null;){for(h=D=f;D!==null;){switch(p=D,m=p.child,p.tag){case 0:case 11:case 14:case 15:fi(4,p,p.return);break;case 1:hr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){oe(r,n,S)}}break;case 5:hr(p,p.return);break;case 22:if(p.memoizedState!==null){hd(h);continue}}m!==null?(m.return=p,D=m):hd(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,u=h.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=rp("display",s))}catch(S){oe(t,t.return,S)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(S){oe(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:it(e,t),yt(t),r&4&&dd(t);break;case 21:break;default:it(e,t),yt(t)}}function yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rm(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yi(i,""),r.flags&=-33);var o=cd(t);Sl(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=cd(t);wl(t,a,s);break;default:throw Error(R(161))}}catch(u){oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S0(t,e,n){D=t,bm(t)}function bm(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var i=D,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ho;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Ae;a=ho;var c=Ae;if(ho=s,(Ae=u)&&!c)for(D=i;D!==null;)s=D,u=s.child,s.tag===22&&s.memoizedState!==null?pd(i):u!==null?(u.return=s,D=u):pd(i);for(;o!==null;)D=o,bm(o),o=o.sibling;D=i,ho=a,Ae=c}fd(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,D=o):fd(t)}}function fd(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ae||Ns(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ae)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:st(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Yc(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yc(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ei(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ae||e.flags&512&&_l(e)}catch(p){oe(e,e.return,p)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function hd(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function pd(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ns(4,e)}catch(u){oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){oe(e,i,u)}}var o=e.return;try{_l(e)}catch(u){oe(e,o,u)}break;case 5:var s=e.return;try{_l(e)}catch(u){oe(e,s,u)}}}catch(u){oe(e,e.return,u)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var E0=Math.ceil,as=Ut.ReactCurrentDispatcher,Ou=Ut.ReactCurrentOwner,Ze=Ut.ReactCurrentBatchConfig,z=0,ye=null,he=null,Te=0,He=0,pr=dn(0),ge=0,Mi=null,Dn=0,Ps=0,Fu=0,hi=null,Oe=null,$u=0,Mr=1/0,xt=null,ls=!1,El=null,rn=null,po=!1,jt=null,us=0,pi=0,Tl=null,Oo=-1,Fo=0;function be(){return z&6?ue():Oo!==-1?Oo:Oo=ue()}function on(t){return t.mode&1?z&2&&Te!==0?Te&-Te:o0.transition!==null?(Fo===0&&(Fo=gp()),Fo):(t=J,t!==0||(t=window.event,t=t===void 0?16:Tp(t.type)),t):1}function ft(t,e,n,r){if(50<pi)throw pi=0,Tl=null,Error(R(185));zi(t,n,r),(!(z&2)||t!==ye)&&(t===ye&&(!(z&2)&&(Ps|=n),ge===4&&Wt(t,Te)),Ge(t,r),n===1&&z===0&&!(e.mode&1)&&(Mr=ue()+500,As&&fn()))}function Ge(t,e){var n=t.callbackNode;oy(t,e);var r=Wo(t,t===ye?Te:0);if(r===0)n!==null&&Tc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Tc(n),e===1)t.tag===0?i0(md.bind(null,t)):Bp(md.bind(null,t)),e0(function(){!(z&6)&&fn()}),n=null;else{switch(vp(r)){case 1:n=du;break;case 4:n=pp;break;case 16:n=zo;break;case 536870912:n=mp;break;default:n=zo}n=Vm(n,Mm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Mm(t,e){if(Oo=-1,Fo=0,z&6)throw Error(R(327));var n=t.callbackNode;if(Tr()&&t.callbackNode!==n)return null;var r=Wo(t,t===ye?Te:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cs(t,r);else{e=r;var i=z;z|=2;var o=Dm();(ye!==t||Te!==e)&&(xt=null,Mr=ue()+500,Nn(t,e));do try{x0();break}catch(a){Lm(t,a)}while(!0);Cu(),as.current=o,z=i,he!==null?e=0:(ye=null,Te=0,e=ge)}if(e!==0){if(e===2&&(i=Ya(t),i!==0&&(r=i,e=Cl(t,i))),e===1)throw n=Mi,Nn(t,0),Wt(t,r),Ge(t,ue()),n;if(e===6)Wt(t,r);else{if(i=t.current.alternate,!(r&30)&&!T0(i)&&(e=cs(t,r),e===2&&(o=Ya(t),o!==0&&(r=o,e=Cl(t,o))),e===1))throw n=Mi,Nn(t,0),Wt(t,r),Ge(t,ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:_n(t,Oe,xt);break;case 3:if(Wt(t,r),(r&130023424)===r&&(e=$u+500-ue(),10<e)){if(Wo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){be(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=il(_n.bind(null,t,Oe,xt),e);break}_n(t,Oe,xt);break;case 4:if(Wt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-dt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*E0(r/1960))-r,10<r){t.timeoutHandle=il(_n.bind(null,t,Oe,xt),r);break}_n(t,Oe,xt);break;case 5:_n(t,Oe,xt);break;default:throw Error(R(329))}}}return Ge(t,ue()),t.callbackNode===n?Mm.bind(null,t):null}function Cl(t,e){var n=hi;return t.current.memoizedState.isDehydrated&&(Nn(t,e).flags|=256),t=cs(t,e),t!==2&&(e=Oe,Oe=n,e!==null&&xl(e)),t}function xl(t){Oe===null?Oe=t:Oe.push.apply(Oe,t)}function T0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!mt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wt(t,e){for(e&=~Fu,e&=~Ps,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dt(e),r=1<<n;t[n]=-1,e&=~r}}function md(t){if(z&6)throw Error(R(327));Tr();var e=Wo(t,0);if(!(e&1))return Ge(t,ue()),null;var n=cs(t,e);if(t.tag!==0&&n===2){var r=Ya(t);r!==0&&(e=r,n=Cl(t,r))}if(n===1)throw n=Mi,Nn(t,0),Wt(t,e),Ge(t,ue()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_n(t,Oe,xt),Ge(t,ue()),null}function Vu(t,e){var n=z;z|=1;try{return t(e)}finally{z=n,z===0&&(Mr=ue()+500,As&&fn())}}function Un(t){jt!==null&&jt.tag===0&&!(z&6)&&Tr();var e=z;z|=1;var n=Ze.transition,r=J;try{if(Ze.transition=null,J=1,t)return t()}finally{J=r,Ze.transition=n,z=e,!(z&6)&&fn()}}function Gu(){He=pr.current,X(pr)}function Nn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zy(n)),he!==null)for(n=he.return;n!==null;){var r=n;switch(Su(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qo();break;case 3:Pr(),X($e),X(Re),Nu();break;case 5:Ru(r);break;case 4:Pr();break;case 13:X(te);break;case 19:X(te);break;case 10:xu(r.type._context);break;case 22:case 23:Gu()}n=n.return}if(ye=t,he=t=sn(t.current,null),Te=He=e,ge=0,Mi=null,Fu=Ps=Dn=0,Oe=hi=null,In!==null){for(e=0;e<In.length;e++)if(n=In[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}In=null}return t}function Lm(t,e){do{var n=he;try{if(Cu(),Lo.current=ss,os){for(var r=ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}os=!1}if(Ln=0,ve=me=ne=null,di=!1,Ni=0,Ou.current=null,n===null||n.return===null){ge=1,Mi=e,he=null;break}e:{var o=t,s=n.return,a=n,u=e;if(e=Te,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=nd(s);if(m!==null){m.flags&=-257,rd(m,s,a,o,e),m.mode&1&&td(o,c,e),e=m,u=c;var v=e.updateQueue;if(v===null){var S=new Set;S.add(u),e.updateQueue=S}else v.add(u);break e}else{if(!(e&1)){td(o,c,e),Bu();break e}u=Error(R(426))}}else if(Z&&a.mode&1){var E=nd(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),rd(E,s,a,o,e),Eu(br(u,a));break e}}o=u=br(u,a),ge!==4&&(ge=2),hi===null?hi=[o]:hi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=vm(o,u,e);jc(o,_);break e;case 1:a=u;var y=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(rn===null||!rn.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=ym(o,a,e);jc(o,T);break e}}o=o.return}while(o!==null)}Om(n)}catch(C){e=C,he===n&&n!==null&&(he=n=n.return);continue}break}while(!0)}function Dm(){var t=as.current;return as.current=ss,t===null?ss:t}function Bu(){(ge===0||ge===3||ge===2)&&(ge=4),ye===null||!(Dn&268435455)&&!(Ps&268435455)||Wt(ye,Te)}function cs(t,e){var n=z;z|=2;var r=Dm();(ye!==t||Te!==e)&&(xt=null,Nn(t,e));do try{C0();break}catch(i){Lm(t,i)}while(!0);if(Cu(),z=n,as.current=r,he!==null)throw Error(R(261));return ye=null,Te=0,ge}function C0(){for(;he!==null;)Um(he)}function x0(){for(;he!==null&&!Yv();)Um(he)}function Um(t){var e=$m(t.alternate,t,He);t.memoizedProps=t.pendingProps,e===null?Om(t):he=e,Ou.current=null}function Om(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y0(n,e),n!==null){n.flags&=32767,he=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ge=6,he=null;return}}else if(n=v0(n,e,He),n!==null){he=n;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);ge===0&&(ge=5)}function _n(t,e,n){var r=J,i=Ze.transition;try{Ze.transition=null,J=1,I0(t,e,n,r)}finally{Ze.transition=i,J=r}return null}function I0(t,e,n,r){do Tr();while(jt!==null);if(z&6)throw Error(R(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sy(t,o),t===ye&&(he=ye=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||po||(po=!0,Vm(zo,function(){return Tr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ze.transition,Ze.transition=null;var s=J;J=1;var a=z;z|=4,Ou.current=null,w0(t,n),Pm(n,t),Wy(nl),Jo=!!tl,nl=tl=null,t.current=n,S0(n),Qv(),z=a,J=s,Ze.transition=o}else t.current=n;if(po&&(po=!1,jt=t,us=i),o=t.pendingLanes,o===0&&(rn=null),ey(n.stateNode),Ge(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ls)throw ls=!1,t=El,El=null,t;return us&1&&t.tag!==0&&Tr(),o=t.pendingLanes,o&1?t===Tl?pi++:(pi=0,Tl=t):pi=0,fn(),null}function Tr(){if(jt!==null){var t=vp(us),e=Ze.transition,n=J;try{if(Ze.transition=null,J=16>t?16:t,jt===null)var r=!1;else{if(t=jt,jt=null,us=0,z&6)throw Error(R(331));var i=z;for(z|=4,D=t.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(D=c;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:fi(8,f,o)}var h=f.child;if(h!==null)h.return=f,D=h;else for(;D!==null;){f=D;var p=f.sibling,m=f.return;if(km(f),f===c){D=null;break}if(p!==null){p.return=m,D=p;break}D=m}}}var v=o.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fi(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,D=_;break e}D=o.return}}var y=t.current;for(D=y;D!==null;){s=D;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,D=w;else e:for(s=y;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ns(9,a)}}catch(C){oe(a,a.return,C)}if(a===s){D=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,D=T;break e}D=a.return}}if(z=i,fn(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Es,t)}catch{}r=!0}return r}finally{J=n,Ze.transition=e}}return!1}function gd(t,e,n){e=br(n,e),e=vm(t,e,1),t=nn(t,e,1),e=be(),t!==null&&(zi(t,1,e),Ge(t,e))}function oe(t,e,n){if(t.tag===3)gd(t,t,n);else for(;e!==null;){if(e.tag===3){gd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rn===null||!rn.has(r))){t=br(n,t),t=ym(e,t,1),e=nn(e,t,1),t=be(),e!==null&&(zi(e,1,t),Ge(e,t));break}}e=e.return}}function A0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=be(),t.pingedLanes|=t.suspendedLanes&n,ye===t&&(Te&n)===n&&(ge===4||ge===3&&(Te&130023424)===Te&&500>ue()-$u?Nn(t,0):Fu|=n),Ge(t,e)}function Fm(t,e){e===0&&(t.mode&1?(e=ro,ro<<=1,!(ro&130023424)&&(ro=4194304)):e=1);var n=be();t=Mt(t,e),t!==null&&(zi(t,e,n),Ge(t,n))}function k0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fm(t,n)}function R0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),Fm(t,n)}var $m;$m=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$e.current)Fe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fe=!1,g0(t,e,n);Fe=!!(t.flags&131072)}else Fe=!1,Z&&e.flags&1048576&&Hp(e,es,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uo(t,e),t=e.pendingProps;var i=kr(e,Re.current);Er(e,n),i=bu(null,e,r,t,i,n);var o=Mu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ve(r)?(o=!0,Xo(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Au(e),i.updater=Rs,e.stateNode=i,i._reactInternals=e,dl(e,r,t,n),e=pl(null,e,r,!0,o,n)):(e.tag=0,Z&&o&&wu(e),Pe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=P0(r),t=st(r,t),i){case 0:e=hl(null,e,r,t,n);break e;case 1:e=sd(null,e,r,t,n);break e;case 11:e=id(null,e,r,t,n);break e;case 14:e=od(null,e,r,st(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:st(r,i),hl(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:st(r,i),sd(t,e,r,i,n);case 3:e:{if(Em(e),t===null)throw Error(R(387));r=e.pendingProps,o=e.memoizedState,i=o.element,jp(t,e),rs(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=br(Error(R(423)),e),e=ad(t,e,r,n,i);break e}else if(r!==i){i=br(Error(R(424)),e),e=ad(t,e,r,n,i);break e}else for(ze=tn(e.stateNode.containerInfo.firstChild),We=e,Z=!0,ct=null,n=Jp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rr(),r===i){e=Lt(t,e,n);break e}Pe(t,e,r,n)}e=e.child}return e;case 5:return Yp(e),t===null&&ll(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,rl(r,i)?s=null:o!==null&&rl(r,o)&&(e.flags|=32),Sm(t,e),Pe(t,e,s,n),e.child;case 6:return t===null&&ll(e),null;case 13:return Tm(t,e,n);case 4:return ku(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Nr(e,null,r,n):Pe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:st(r,i),id(t,e,r,i,n);case 7:return Pe(t,e,e.pendingProps,n),e.child;case 8:return Pe(t,e,e.pendingProps.children,n),e.child;case 12:return Pe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,j(ts,r._currentValue),r._currentValue=s,o!==null)if(mt(o.value,s)){if(o.children===i.children&&!$e.current){e=Lt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Nt(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),ul(o.return,n,e),a.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(R(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ul(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Pe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Er(e,n),i=tt(i),r=r(i),e.flags|=1,Pe(t,e,r,n),e.child;case 14:return r=e.type,i=st(r,e.pendingProps),i=st(r.type,i),od(t,e,r,i,n);case 15:return _m(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:st(r,i),Uo(t,e),e.tag=1,Ve(r)?(t=!0,Xo(e)):t=!1,Er(e,n),gm(e,r,i),dl(e,r,i,n),pl(null,e,r,!0,t,n);case 19:return Cm(t,e,n);case 22:return wm(t,e,n)}throw Error(R(156,e.tag))};function Vm(t,e){return hp(t,e)}function N0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(t,e,n,r){return new N0(t,e,n,r)}function Hu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function P0(t){if(typeof t=="function")return Hu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lu)return 11;if(t===uu)return 14}return 2}function sn(t,e){var n=t.alternate;return n===null?(n=Xe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $o(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Hu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ir:return Pn(n.children,i,o,e);case au:s=8,i|=8;break;case Da:return t=Xe(12,n,e,i|2),t.elementType=Da,t.lanes=o,t;case Ua:return t=Xe(13,n,e,i),t.elementType=Ua,t.lanes=o,t;case Oa:return t=Xe(19,n,e,i),t.elementType=Oa,t.lanes=o,t;case Yh:return bs(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kh:s=10;break e;case jh:s=9;break e;case lu:s=11;break e;case uu:s=14;break e;case Gt:s=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=Xe(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Pn(t,e,n,r){return t=Xe(7,t,r,e),t.lanes=n,t}function bs(t,e,n,r){return t=Xe(22,t,r,e),t.elementType=Yh,t.lanes=n,t.stateNode={isHidden:!1},t}function _a(t,e,n){return t=Xe(6,t,null,e),t.lanes=n,t}function wa(t,e,n){return e=Xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qu(t,e,n,r,i,o,s,a,u){return t=new b0(t,e,n,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xe(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Au(o),t}function M0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Gm(t){if(!t)return un;t=t._reactInternals;e:{if(Fn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ve(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Ve(n))return Gp(t,n,e)}return e}function Bm(t,e,n,r,i,o,s,a,u){return t=qu(n,r,!0,t,i,o,s,a,u),t.context=Gm(null),n=t.current,r=be(),i=on(n),o=Nt(r,i),o.callback=e??null,nn(n,o,i),t.current.lanes=i,zi(t,i,r),Ge(t,r),t}function Ms(t,e,n,r){var i=e.current,o=be(),s=on(i);return n=Gm(n),e.context===null?e.context=n:e.pendingContext=n,e=Nt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nn(i,e,s),t!==null&&(ft(t,i,s,o),Mo(t,i,s)),s}function ds(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zu(t,e){vd(t,e),(t=t.alternate)&&vd(t,e)}function L0(){return null}var Hm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wu(t){this._internalRoot=t}Ls.prototype.render=Wu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));Ms(t,e,null,null)};Ls.prototype.unmount=Wu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Un(function(){Ms(null,t,null,null)}),e[bt]=null}};function Ls(t){this._internalRoot=t}Ls.prototype.unstable_scheduleHydration=function(t){if(t){var e=wp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zt.length&&e!==0&&e<zt[n].priority;n++);zt.splice(n,0,t),n===0&&Ep(t)}};function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ds(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yd(){}function D0(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=ds(s);o.call(c)}}var s=Bm(e,r,t,0,null,!1,!1,"",yd);return t._reactRootContainer=s,t[bt]=s.current,xi(t.nodeType===8?t.parentNode:t),Un(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ds(u);a.call(c)}}var u=qu(t,0,!1,null,null,!1,!1,"",yd);return t._reactRootContainer=u,t[bt]=u.current,xi(t.nodeType===8?t.parentNode:t),Un(function(){Ms(e,u,n,r)}),u}function Us(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=ds(s);a.call(u)}}Ms(e,s,t,i)}else s=D0(n,e,t,i,r);return ds(s)}yp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ni(e.pendingLanes);n!==0&&(fu(e,n|1),Ge(e,ue()),!(z&6)&&(Mr=ue()+500,fn()))}break;case 13:Un(function(){var r=Mt(t,1);if(r!==null){var i=be();ft(r,t,1,i)}}),zu(t,1)}};hu=function(t){if(t.tag===13){var e=Mt(t,134217728);if(e!==null){var n=be();ft(e,t,134217728,n)}zu(t,134217728)}};_p=function(t){if(t.tag===13){var e=on(t),n=Mt(t,e);if(n!==null){var r=be();ft(n,t,e,r)}zu(t,e)}};wp=function(){return J};Sp=function(t,e){var n=J;try{return J=t,e()}finally{J=n}};Ja=function(t,e,n){switch(e){case"input":if(Va(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Is(r);if(!i)throw Error(R(90));Xh(r),Va(r,i)}}}break;case"textarea":ep(t,n);break;case"select":e=n.value,e!=null&&yr(t,!!n.multiple,e,!1)}};ap=Vu;lp=Un;var U0={usingClientEntryPoint:!1,Events:[Ji,lr,Is,op,sp,Vu]},Yr={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O0={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dp(t),t===null?null:t.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||L0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{Es=mo.inject(O0),Et=mo}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U0;Ke.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ju(e))throw Error(R(200));return M0(t,e,null,n)};Ke.createRoot=function(t,e){if(!Ju(t))throw Error(R(299));var n=!1,r="",i=Hm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qu(t,1,!1,null,null,n,!1,r,i),t[bt]=e.current,xi(t.nodeType===8?t.parentNode:t),new Wu(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=dp(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return Un(t)};Ke.hydrate=function(t,e,n){if(!Ds(e))throw Error(R(200));return Us(null,t,e,!0,n)};Ke.hydrateRoot=function(t,e,n){if(!Ju(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Hm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Bm(e,null,t,1,n??null,i,!1,o,s),t[bt]=e.current,xi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ls(e)};Ke.render=function(t,e,n){if(!Ds(e))throw Error(R(200));return Us(null,t,e,!1,n)};Ke.unmountComponentAtNode=function(t){if(!Ds(t))throw Error(R(40));return t._reactRootContainer?(Un(function(){Us(null,null,t,!1,function(){t._reactRootContainer=null,t[bt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Vu;Ke.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ds(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return Us(t,e,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function qm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qm)}catch(t){console.error(t)}}qm(),qh.exports=Ke;var F0=qh.exports,_d=F0;Ma.createRoot=_d.createRoot,Ma.hydrateRoot=_d.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Li(){return Li=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Li.apply(this,arguments)}var Yt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yt||(Yt={}));const wd="popstate";function $0(t){t===void 0&&(t={});function e(i,o){let{pathname:s="/",search:a="",hash:u=""}=$n(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Il("",{pathname:s,search:a,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");a=c===-1?u:u.slice(0,c)}return a+"#"+(typeof o=="string"?o:fs(o))}function r(i,o){Os(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return G0(e,n,r,t)}function ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Os(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V0(){return Math.random().toString(36).substr(2,8)}function Sd(t,e){return{usr:t.state,key:t.key,idx:e}}function Il(t,e,n,r){return n===void 0&&(n=null),Li({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$n(e):e,{state:n,key:e&&e.key||r||V0()})}function fs(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $n(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function G0(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Yt.Pop,u=null,c=f();c==null&&(c=0,s.replaceState(Li({},s.state,{idx:c}),""));function f(){return(s.state||{idx:null}).idx}function h(){a=Yt.Pop;let E=f(),_=E==null?null:E-c;c=E,u&&u({action:a,location:S.location,delta:_})}function p(E,_){a=Yt.Push;let y=Il(S.location,E,_);n&&n(y,E),c=f()+1;let w=Sd(y,c),T=S.createHref(y);try{s.pushState(w,"",T)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(T)}o&&u&&u({action:a,location:S.location,delta:1})}function m(E,_){a=Yt.Replace;let y=Il(S.location,E,_);n&&n(y,E),c=f();let w=Sd(y,c),T=S.createHref(y);s.replaceState(w,"",T),o&&u&&u({action:a,location:S.location,delta:0})}function v(E){let _=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof E=="string"?E:fs(E);return y=y.replace(/ $/,"%20"),ce(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let S={get action(){return a},get location(){return t(i,s)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(wd,h),u=E,()=>{i.removeEventListener(wd,h),u=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let _=v(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(E){return s.go(E)}};return S}var Ed;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ed||(Ed={}));function B0(t,e,n){return n===void 0&&(n="/"),H0(t,e,n)}function H0(t,e,n,r){let i=typeof e=="string"?$n(e):e,o=Ku(i.pathname||"/",n);if(o==null)return null;let s=zm(t);q0(s);let a=null;for(let u=0;a==null&&u<s.length;++u){let c=n_(o);a=Z0(s[u],c)}return a}function zm(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(ce(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=an([r,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(ce(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),zm(o.children,e,f,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:Q0(c,o.index),routesMeta:f})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let u of Wm(o.path))i(o,s,u)}),e}function Wm(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Wm(r.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function q0(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:X0(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const z0=/^:[\w-]+$/,W0=3,J0=2,K0=1,j0=10,Y0=-2,Td=t=>t==="*";function Q0(t,e){let n=t.split("/"),r=n.length;return n.some(Td)&&(r+=Y0),e&&(r+=J0),n.filter(i=>!Td(i)).reduce((i,o)=>i+(z0.test(o)?W0:o===""?K0:j0),r)}function X0(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Z0(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,f=o==="/"?e:e.slice(o.length)||"/",h=e_({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),p=u.route;if(!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:an([o,h.pathname]),pathnameBase:a_(an([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=an([o,h.pathnameBase]))}return s}function e_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=t_(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,f,h)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let S=a[h]||"";s=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function t_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Os(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function n_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Os(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ku(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const r_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i_=t=>r_.test(t);function o_(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?$n(t):t,o;if(n)if(i_(n))o=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Os(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?o=Cd(n.substring(1),"/"):o=Cd(n,e)}else o=e;return{pathname:o,search:l_(r),hash:u_(i)}}function Cd(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sa(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ju(t,e){let n=s_(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yu(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=$n(t):(i=Li({},t),ce(!i.pathname||!i.pathname.includes("?"),Sa("?","pathname","search",i)),ce(!i.pathname||!i.pathname.includes("#"),Sa("#","pathname","hash",i)),ce(!i.search||!i.search.includes("#"),Sa("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let u=o_(i,a),c=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const an=t=>t.join("/").replace(/\/\/+/g,"/"),a_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),l_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,u_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function c_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Jm=["post","put","patch","delete"];new Set(Jm);const d_=["get",...Jm];new Set(d_);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Di(){return Di=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Di.apply(this,arguments)}const Qu=A.createContext(null),f_=A.createContext(null),hn=A.createContext(null),Fs=A.createContext(null),pn=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Km=A.createContext(null);function h_(t,e){let{relative:n}=e===void 0?{}:e;Fr()||ce(!1);let{basename:r,navigator:i}=A.useContext(hn),{hash:o,pathname:s,search:a}=Ym(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:an([r,s])),i.createHref({pathname:u,search:a,hash:o})}function Fr(){return A.useContext(Fs)!=null}function Vn(){return Fr()||ce(!1),A.useContext(Fs).location}function jm(t){A.useContext(hn).static||A.useLayoutEffect(t)}function Xu(){let{isDataRoute:t}=A.useContext(pn);return t?I_():p_()}function p_(){Fr()||ce(!1);let t=A.useContext(Qu),{basename:e,future:n,navigator:r}=A.useContext(hn),{matches:i}=A.useContext(pn),{pathname:o}=Vn(),s=JSON.stringify(ju(i,n.v7_relativeSplatPath)),a=A.useRef(!1);return jm(()=>{a.current=!0}),A.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Yu(c,JSON.parse(s),o,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:an([e,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[e,r,s,o,t])}function Ym(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(hn),{matches:i}=A.useContext(pn),{pathname:o}=Vn(),s=JSON.stringify(ju(i,r.v7_relativeSplatPath));return A.useMemo(()=>Yu(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function m_(t,e){return g_(t,e)}function g_(t,e,n,r){Fr()||ce(!1);let{navigator:i}=A.useContext(hn),{matches:o}=A.useContext(pn),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let c=Vn(),f;if(e){var h;let E=typeof e=="string"?$n(e):e;u==="/"||(h=E.pathname)!=null&&h.startsWith(u)||ce(!1),f=E}else f=c;let p=f.pathname||"/",m=p;if(u!=="/"){let E=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=B0(t,{pathname:m}),S=S_(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:an([u,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:an([u,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return e&&S?A.createElement(Fs.Provider,{value:{location:Di({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Yt.Pop}},S):S}function v_(){let t=x_(),e=c_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,null)}const y_=A.createElement(v_,null);class __ extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(pn.Provider,{value:this.props.routeContext},A.createElement(Km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w_(t){let{routeContext:e,match:n,children:r}=t,i=A.useContext(Qu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(pn.Provider,{value:e},r)}function S_(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=s.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);f>=0||ce(!1),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let h=s[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:p,errors:m}=n,v=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((f,h,p)=>{let m,v=!1,S=null,E=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,S=h.route.errorElement||y_,u&&(c<0&&p===0?(A_("route-fallback"),v=!0,E=null):c===p&&(v=!0,E=h.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,p+1)),y=()=>{let w;return m?w=S:v?w=E:h.route.Component?w=A.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=f,A.createElement(w_,{match:h,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?A.createElement(__,{location:n.location,revalidation:n.revalidation,component:S,error:m,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var Qm=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Qm||{}),Xm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xm||{});function E_(t){let e=A.useContext(Qu);return e||ce(!1),e}function T_(t){let e=A.useContext(f_);return e||ce(!1),e}function C_(t){let e=A.useContext(pn);return e||ce(!1),e}function Zm(t){let e=C_(),n=e.matches[e.matches.length-1];return n.route.id||ce(!1),n.route.id}function x_(){var t;let e=A.useContext(Km),n=T_(),r=Zm();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function I_(){let{router:t}=E_(Qm.UseNavigateStable),e=Zm(Xm.UseNavigateStable),n=A.useRef(!1);return jm(()=>{n.current=!0}),A.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Di({fromRouteId:e},o)))},[t,e])}const xd={};function A_(t,e,n){xd[t]||(xd[t]=!0)}function k_(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ea(t){let{to:e,replace:n,state:r,relative:i}=t;Fr()||ce(!1);let{future:o,static:s}=A.useContext(hn),{matches:a}=A.useContext(pn),{pathname:u}=Vn(),c=Xu(),f=Yu(e,ju(a,o.v7_relativeSplatPath),u,i==="path"),h=JSON.stringify(f);return A.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function wn(t){ce(!1)}function R_(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yt.Pop,navigator:o,static:s=!1,future:a}=t;Fr()&&ce(!1);let u=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:u,navigator:o,static:s,future:Di({v7_relativeSplatPath:!1},a)}),[u,a,o,s]);typeof r=="string"&&(r=$n(r));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:v="default"}=r,S=A.useMemo(()=>{let E=Ku(f,u);return E==null?null:{location:{pathname:E,search:h,hash:p,state:m,key:v},navigationType:i}},[u,f,h,p,m,v,i]);return S==null?null:A.createElement(hn.Provider,{value:c},A.createElement(Fs.Provider,{children:n,value:S}))}function N_(t){let{children:e,location:n}=t;return m_(Al(e),n)}new Promise(()=>{});function Al(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let o=[...e,i];if(r.type===A.Fragment){n.push.apply(n,Al(r.props.children,o));return}r.type!==wn&&ce(!1),!r.props.index||!r.props.children||ce(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Al(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kl.apply(this,arguments)}function P_(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function b_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function M_(t,e){return t.button===0&&(!e||e==="_self")&&!b_(t)}const L_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],D_="6";try{window.__reactRouterVersion=D_}catch{}const U_="startTransition",Id=Av[U_];function O_(t){let{basename:e,children:n,future:r,window:i}=t,o=A.useRef();o.current==null&&(o.current=$0({window:i,v5Compat:!0}));let s=o.current,[a,u]=A.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},f=A.useCallback(h=>{c&&Id?Id(()=>u(h)):u(h)},[u,c]);return A.useLayoutEffect(()=>s.listen(f),[s,f]),A.useEffect(()=>k_(r),[r]),A.createElement(R_,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}const F_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=A.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:u,to:c,preventScrollReset:f,viewTransition:h}=e,p=P_(e,L_),{basename:m}=A.useContext(hn),v,S=!1;if(typeof c=="string"&&$_.test(c)&&(v=c,F_))try{let w=new URL(window.location.href),T=c.startsWith("//")?new URL(w.protocol+c):new URL(c),C=Ku(T.pathname,m);T.origin===w.origin&&C!=null?c=C+T.search+T.hash:S=!0}catch{}let E=h_(c,{relative:i}),_=V_(c,{replace:s,state:a,target:u,preventScrollReset:f,relative:i,viewTransition:h});function y(w){r&&r(w),w.defaultPrevented||_(w)}return A.createElement("a",kl({},p,{href:v||E,onClick:S||o?r:y,ref:n,target:u}))});var Ad;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ad||(Ad={}));var kd;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kd||(kd={}));function V_(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=e===void 0?{}:e,u=Xu(),c=Vn(),f=Ym(t,{relative:s});return A.useCallback(h=>{if(M_(h,n)){h.preventDefault();let p=r!==void 0?r:fs(c)===fs(f);u(t,{replace:p,state:i,preventScrollReset:o,relative:s,viewTransition:a})}},[c,u,f,r,i,n,t,o,s,a])}var G_={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let B_,H_;function q_(){return{geminiUrl:B_,vertexUrl:H_}}function z_(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=q_();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ot{}function L(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const u=t[a];if(Array.isArray(n))for(let c=0;c<u.length;c++){const f=u[c];d(f,e.slice(o+1),n[c])}else for(const c of u)d(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const u=t[a];d(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>l(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function W_(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){a=u;break}if(a!==-1&&o.length>a)for(let u=a;u<o.length;u++){const c=o[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Rl(t,i,o,0,s)}}function Rl(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const u of a[s])Rl(u,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),u={};for(const c of a)u[c]=s[c];for(const[c,f]of Object.entries(u)){const h=[];for(const p of n.slice(r))p==="*"?h.push(c):h.push(p);d(s,h,f)}for(const c of a)delete s[c]}}else{const s=t;o in s&&Rl(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zu(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J_(t){const e={},n=l(t,["operationName"]);n!=null&&d(e,["operationName"],n);const r=l(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function K_(t){const e={},n=l(t,["name"]);n!=null&&d(e,["name"],n);const r=l(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=l(t,["done"]);i!=null&&d(e,["done"],i);const o=l(t,["error"]);o!=null&&d(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],Y_(s)),e}function j_(t){const e={},n=l(t,["name"]);n!=null&&d(e,["name"],n);const r=l(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=l(t,["done"]);i!=null&&d(e,["done"],i);const o=l(t,["error"]);o!=null&&d(e,["error"],o);const s=l(t,["response"]);return s!=null&&d(e,["response"],Q_(s)),e}function Y_(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>X_(s))),d(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function Q_(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Z_(s))),d(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function X_(t){const e={},n=l(t,["video"]);return n!=null&&d(e,["video"],ow(n)),e}function Z_(t){const e={},n=l(t,["_self"]);return n!=null&&d(e,["video"],sw(n)),e}function ew(t){const e={},n=l(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function tw(t){const e={},n=l(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function nw(t){const e={},n=l(t,["name"]);n!=null&&d(e,["name"],n);const r=l(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=l(t,["done"]);i!=null&&d(e,["done"],i);const o=l(t,["error"]);o!=null&&d(e,["error"],o);const s=l(t,["response"]);return s!=null&&d(e,["response"],rw(s)),e}function rw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&d(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function eg(t){const e={},n=l(t,["name"]);n!=null&&d(e,["name"],n);const r=l(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=l(t,["done"]);i!=null&&d(e,["done"],i);const o=l(t,["error"]);o!=null&&d(e,["error"],o);const s=l(t,["response"]);return s!=null&&d(e,["response"],iw(s)),e}function iw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&d(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function ow(t){const e={},n=l(t,["uri"]);n!=null&&d(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],Zu(r));const i=l(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function sw(t){const e={},n=l(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],Zu(r));const i=l(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rd;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Rd||(Rd={}));var Nd;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Nd||(Nd={}));var Pd;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Pd||(Pd={}));var Qt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Qt||(Qt={}));var bd;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(bd||(bd={}));var Md;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Md||(Md={}));var Ld;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ld||(Ld={}));var Dd;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Dd||(Dd={}));var Ud;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ud||(Ud={}));var Od;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Od||(Od={}));var Fd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Fd||(Fd={}));var $d;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})($d||($d={}));var Vd;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Vd||(Vd={}));var Gd;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Gd||(Gd={}));var Bd;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Bd||(Bd={}));var Hd;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Hd||(Hd={}));var qd;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qd||(qd={}));var zd;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zd||(zd={}));var Wd;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wd||(Wd={}));var Jd;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Jd||(Jd={}));var Kd;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kd||(Kd={}));var Lr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Lr||(Lr={}));var jd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jd||(jd={}));var Yd;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Yd||(Yd={}));var Qd;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qd||(Qd={}));var Nl;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Nl||(Nl={}));var Xd;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Xd||(Xd={}));var Zd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Zd||(Zd={}));var Pl;(function(t){t.COLLECTION="COLLECTION"})(Pl||(Pl={}));var ef;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ef||(ef={}));var tf;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tf||(tf={}));var nf;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(nf||(nf={}));var rf;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(rf||(rf={}));var of;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(of||(of={}));var sf;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sf||(sf={}));var af;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(af||(af={}));var lf;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lf||(lf={}));var uf;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uf||(uf={}));var cf;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(cf||(cf={}));var df;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(df||(df={}));var ff;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ff||(ff={}));var hf;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(hf||(hf={}));var pf;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(pf||(pf={}));var mf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(mf||(mf={}));var gf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gf||(gf={}));var vf;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(vf||(vf={}));var yf;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(yf||(yf={}));var _f;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(_f||(_f={}));var wf;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(wf||(wf={}));var Sf;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Sf||(Sf={}));var Ef;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ef||(Ef={}));var Tf;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tf||(Tf={}));var Cf;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Cf||(Cf={}));var xf;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xf||(xf={}));var If;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(If||(If={}));var Af;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Af||(Af={}));var mr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(mr||(mr={}));class bl{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Qr{get text(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const h=[];for(const p of(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[m,v]of Object.entries(p))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(v!==null||v!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const h of(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class kf{}class Rf{}class aw{}class lw{}class uw{}class cw{}class Nf{}class Pf{}class bf{}class dw{}class hs{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new hs;let i;const o=e;return n?i=j_(o):i=K_(o),Object.assign(r,i),r}}class Mf{}class Lf{}class Df{}class Uf{}class fw{}class hw{}class pw{}class ec{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ec,o=nw(e);return Object.assign(r,o),r}}class mw{}class gw{}class vw{}class yw{}class Of{}class _w{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,u]of Object.entries(s))a!=="inlineData"&&u!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class ww{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class tc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new tc,o=eg(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tg(t,e){const n=W(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ng(t){return Array.isArray(t)?t.map(e=>ps(e)):[ps(t)]}function ps(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function rg(t){const e=ps(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ig(t){const e=ps(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ff(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function og(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ff(e)):[Ff(t)]}function Ml(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function $f(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vf(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ke(t){if(t==null)throw new Error("ContentUnion is required");return Ml(t)?t:{role:"user",parts:og(t)}}function nc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ke(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ke(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ke(n)):[ke(e)]}function et(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if($f(t)||Vf(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ke(t)]}const e=[],n=[],r=Ml(t[0]);for(const i of t){const o=Ml(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if($f(i)||Vf(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:og(n)}),e}function Sw(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Qt).includes(n[0].toUpperCase())?n[0].toUpperCase():Qt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Qt).includes(r.toUpperCase())?r.toUpperCase():Qt.TYPE_UNSPECIFIED})}}function Cr(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Sw(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Qt).includes(a.toUpperCase())?a.toUpperCase():Qt.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Cr(a);else if(r.includes(s)){const u=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}u.push(Cr(c))}e[s]=u}else if(i.includes(s)){const u={};for(const[c,f]of Object.entries(a))u[c]=Cr(f);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=a}return e}function rc(t){return Cr(t)}function ic(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function oc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function $r(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Cr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Cr(e.response));return t}function Vr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ew(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Ft(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ew(t,e,"cachedContents")}function sg(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mn(t){return Zu(t)}function Tw(t){return t!=null&&typeof t=="object"&&"name"in t}function Cw(t){return t!=null&&typeof t=="object"&&"video"in t}function xw(t){return t!=null&&typeof t=="object"&&"uri"in t}function ag(t){var e;let n;if(Tw(t)&&(n=t.name),!(xw(t)&&(n=t.uri,n===void 0))&&!(Cw(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function lg(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function ug(t){for(const e of["models","tunedModels","publisherModels"])if(Iw(t,e))return t[e];return[]}function Iw(t,e){return t!==null&&typeof t=="object"&&e in t}function Aw(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function kw(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=Aw(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function cg(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Rw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function dg(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Gr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function fg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nw(t){const e={},n=l(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>cS(s))),d(e,["inlinedResponses"],o)}const i=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function Pw(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function bw(t){const e={},n=l(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&d(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vo(t){const e={},n=l(t,["name"]);n!=null&&d(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&d(e,["state"],fg(i));const o=l(t,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&d(e,["updateTime"],a);const u=l(t,["metadata","model"]);u!=null&&d(e,["model"],u);const c=l(t,["metadata","output"]);return c!=null&&d(e,["dest"],Nw(dg(c))),e}function Ll(t){const e={},n=l(t,["name"]);n!=null&&d(e,["name"],n);const r=l(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=l(t,["state"]);i!=null&&d(e,["state"],fg(i));const o=l(t,["error"]);o!=null&&d(e,["error"],o);const s=l(t,["createTime"]);s!=null&&d(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&d(e,["startTime"],a);const u=l(t,["endTime"]);u!=null&&d(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const f=l(t,["model"]);f!=null&&d(e,["model"],f);const h=l(t,["inputConfig"]);h!=null&&d(e,["src"],Mw(h));const p=l(t,["outputConfig"]);p!=null&&d(e,["dest"],Pw(dg(p)));const m=l(t,["completionStats"]);return m!=null&&d(e,["completionStats"],m),e}function Mw(t){const e={},n=l(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function Lw(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&d(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>uS(t,s))),d(n,["requests","requests"],o)}return n}function Dw(t){const e={},n=l(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&d(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Uw(t){const e={},n=l(t,["data"]);if(n!=null&&d(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Ow(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Gr(t,r)),n}function Fw(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Gr(t,r)),n}function $w(t){const e={},n=l(t,["content"]);n!=null&&d(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],Vw(r));const i=l(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=l(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);const u=l(t,["index"]);u!=null&&d(e,["index"],u);const c=l(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const f=l(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),d(e,["safetyRatings"],p)}const h=l(t,["urlContextMetadata"]);return h!=null&&d(e,["urlContextMetadata"],h),e}function Vw(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function hg(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vS(o))),d(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&d(e,["role"],r),e}function Gw(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Bw(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&d(e,["outputConfig"],bw(Rw(i))),n}function Gf(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["_url","model"],W(t,r));const i=l(e,["src"]);i!=null&&d(n,["batch","inputConfig"],Lw(t,cg(t,i)));const o=l(e,["config"]);return o!=null&&Gw(o,n),n}function Hw(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["model"],W(t,r));const i=l(e,["src"]);i!=null&&d(n,["inputConfig"],Dw(cg(t,i)));const o=l(e,["config"]);return o!=null&&Bw(o,n),n}function qw(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),n}function zw(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["_url","model"],W(t,r));const i=l(e,["src"]);i!=null&&d(n,["batch","inputConfig"],Xw(t,i));const o=l(e,["config"]);return o!=null&&qw(o,n),n}function Ww(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Gr(t,r)),n}function Jw(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Gr(t,r)),n}function Kw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&d(e,["name"],r);const i=l(t,["done"]);i!=null&&d(e,["done"],i);const o=l(t,["error"]);return o!=null&&d(e,["error"],o),e}function jw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&d(e,["name"],r);const i=l(t,["done"]);i!=null&&d(e,["done"],i);const o=l(t,["error"]);return o!=null&&d(e,["error"],o),e}function Yw(t,e){const n={},r=l(e,["contents"]);if(r!=null){let o=nc(t,r);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["requests[]","request","content"],o)}const i=l(e,["config"]);return i!=null&&(d(n,["_self"],Qw(i,n)),W_(n,{"requests[].*":"requests[].request.*"})),n}function Qw(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Xw(t,e){const n={},r=l(e,["fileName"]);r!=null&&d(n,["file_name"],r);const i=l(e,["inlinedRequests"]);return i!=null&&d(n,["requests"],Yw(t,i)),n}function Zw(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function eS(t){const e={},n=l(t,["id"]);n!=null&&d(e,["id"],n);const r=l(t,["args"]);r!=null&&d(e,["args"],r);const i=l(t,["name"]);if(i!=null&&d(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tS(t){const e={},n=l(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const r=l(t,["mode"]);if(r!=null&&d(e,["mode"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nS(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],hg(ke(i)));const o=l(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&d(r,["topP"],s);const a=l(e,["topK"]);a!=null&&d(r,["topK"],a);const u=l(e,["candidateCount"]);u!=null&&d(r,["candidateCount"],u);const c=l(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const f=l(e,["stopSequences"]);f!=null&&d(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&d(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&d(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&d(r,["presencePenalty"],m);const v=l(e,["frequencyPenalty"]);v!=null&&d(r,["frequencyPenalty"],v);const S=l(e,["seed"]);S!=null&&d(r,["seed"],S);const E=l(e,["responseMimeType"]);E!=null&&d(r,["responseMimeType"],E);const _=l(e,["responseSchema"]);_!=null&&d(r,["responseSchema"],rc(_));const y=l(e,["responseJsonSchema"]);if(y!=null&&d(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let ee=w;Array.isArray(ee)&&(ee=ee.map(ae=>yS(ae))),d(n,["safetySettings"],ee)}const T=l(e,["tools"]);if(n!==void 0&&T!=null){let ee=Vr(T);Array.isArray(ee)&&(ee=ee.map(ae=>wS($r(ae)))),d(n,["tools"],ee)}const C=l(e,["toolConfig"]);if(n!==void 0&&C!=null&&d(n,["toolConfig"],_S(C)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=l(e,["cachedContent"]);n!==void 0&&x!=null&&d(n,["cachedContent"],Ft(t,x));const I=l(e,["responseModalities"]);I!=null&&d(r,["responseModalities"],I);const N=l(e,["mediaResolution"]);N!=null&&d(r,["mediaResolution"],N);const b=l(e,["speechConfig"]);if(b!=null&&d(r,["speechConfig"],ic(b)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(e,["thinkingConfig"]);M!=null&&d(r,["thinkingConfig"],M);const q=l(e,["imageConfig"]);q!=null&&d(r,["imageConfig"],lS(q));const se=l(e,["enableEnhancedCivicAnswers"]);if(se!=null&&d(r,["enableEnhancedCivicAnswers"],se),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function rS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>$w(c))),d(e,["candidates"],u)}const i=l(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&d(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function iS(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Gr(t,r)),n}function oS(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Gr(t,r)),n}function sS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function aS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function lS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function uS(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["request","model"],W(t,r));const i=l(e,["contents"]);if(i!=null){let a=et(i);Array.isArray(a)&&(a=a.map(u=>hg(u))),d(n,["request","contents"],a)}const o=l(e,["metadata"]);o!=null&&d(n,["metadata"],o);const s=l(e,["config"]);return s!=null&&d(n,["request","generationConfig"],nS(t,s,l(n,["request"],{}))),n}function cS(t){const e={},n=l(t,["response"]);n!=null&&d(e,["response"],rS(n));const r=l(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=l(t,["error"]);return i!=null&&d(e,["error"],i),e}function dS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function fS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function hS(t){const e={},n=l(t,["config"]);return n!=null&&dS(n,e),e}function pS(t){const e={},n=l(t,["config"]);return n!=null&&fS(n,e),e}function mS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Vo(s))),d(e,["batchJobs"],o)}return e}function gS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ll(s))),d(e,["batchJobs"],o)}return e}function vS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&d(e,["fileData"],Zw(o));const s=l(t,["functionCall"]);s!=null&&d(e,["functionCall"],eS(s));const a=l(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&d(e,["inlineData"],Uw(u));const c=l(t,["text"]);c!=null&&d(e,["text"],c);const f=l(t,["thought"]);f!=null&&d(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function yS(t){const e={},n=l(t,["category"]);if(n!=null&&d(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function _S(t){const e={},n=l(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const r=l(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],tS(r)),e}function wS(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=l(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=l(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],sS(s));const a=l(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],aS(a));const u=l(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=l(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Dt||(Dt={}));class Gn{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SS extends Ot{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gn(Dt.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Gf(this.apiClient,e),r=n._url,i=L("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,u=a.requests,c=[];for(const f of u){const h=Object.assign({},f);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const m=h.request;m.systemInstruction=p,h.request=m}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=Hw(this.apiClient,e);return a=L("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ll(f))}else{const c=Gf(this.apiClient,e);return a=L("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Vo(f))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zw(this.apiClient,e);return o=L("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>Vo(u))}}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=oS(this.apiClient,e);return a=L("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ll(f))}else{const c=iS(this.apiClient,e);return a=L("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Vo(f))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const u=Fw(this.apiClient,e);s=L("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=Ow(this.apiClient,e);s=L("batches/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=pS(e);return a=L("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=gS(f),p=new Of;return Object.assign(p,h),p})}else{const c=hS(e);return a=L("batches",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=mS(f),p=new Of;return Object.assign(p,h),p})}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=Jw(this.apiClient,e);return a=L("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>jw(f))}else{const c=Ww(this.apiClient,e);return a=L("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>Kw(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ES(t){const e={},n=l(t,["data"]);if(n!=null&&d(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Bf(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>zS(o))),d(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&d(e,["role"],r),e}function TS(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=et(s);Array.isArray(f)&&(f=f.map(h=>Bf(h))),d(e,["contents"],f)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],Bf(ke(a)));const u=l(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>JS(h))),d(e,["tools"],f)}const c=l(t,["toolConfig"]);if(e!==void 0&&c!=null&&d(e,["toolConfig"],WS(c)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function CS(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=et(s);Array.isArray(h)&&(h=h.map(p=>p)),d(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],ke(a));const u=l(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>KS(p))),d(e,["tools"],h)}const c=l(t,["toolConfig"]);e!==void 0&&c!=null&&d(e,["toolConfig"],c);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&d(e,["encryption_spec","kmsKeyName"],f),n}function xS(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["model"],tg(t,r));const i=l(e,["config"]);return i!=null&&TS(i,n),n}function IS(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["model"],tg(t,r));const i=l(e,["config"]);return i!=null&&CS(i,n),n}function AS(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Ft(t,r)),n}function kS(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Ft(t,r)),n}function RS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function NS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function PS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function bS(t){const e={},n=l(t,["id"]);n!=null&&d(e,["id"],n);const r=l(t,["args"]);r!=null&&d(e,["args"],r);const i=l(t,["name"]);if(i!=null&&d(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MS(t){const e={},n=l(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const r=l(t,["mode"]);if(r!=null&&d(e,["mode"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LS(t){const e={},n=l(t,["description"]);n!=null&&d(e,["description"],n);const r=l(t,["name"]);r!=null&&d(e,["name"],r);const i=l(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&d(e,["response"],s);const a=l(t,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function DS(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Ft(t,r)),n}function US(t,e){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],Ft(t,r)),n}function OS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function FS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function $S(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function VS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function GS(t){const e={},n=l(t,["config"]);return n!=null&&$S(n,e),e}function BS(t){const e={},n=l(t,["config"]);return n!=null&&VS(n,e),e}function HS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function qS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function zS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&d(e,["fileData"],PS(o));const s=l(t,["functionCall"]);s!=null&&d(e,["functionCall"],bS(s));const a=l(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&d(e,["inlineData"],ES(u));const c=l(t,["text"]);c!=null&&d(e,["text"],c);const f=l(t,["thought"]);f!=null&&d(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function WS(t){const e={},n=l(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const r=l(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],MS(r)),e}function JS(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=l(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=l(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],OS(s));const a=l(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],FS(a));const u=l(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=l(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function KS(t){const e={},n=l(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const r=l(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(t,["codeExecution"]);i!=null&&d(e,["codeExecution"],i);const o=l(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>LS(p))),d(e,["functionDeclarations"],h)}const a=l(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);const u=l(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=l(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=l(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function jS(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function YS(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function QS(t,e){const n={},r=l(e,["name"]);r!=null&&d(n,["_url","name"],Ft(t,r));const i=l(e,["config"]);return i!=null&&jS(i,n),n}function XS(t,e){const n={},r=l(e,["name"]);r!=null&&d(n,["_url","name"],Ft(t,r));const i=l(e,["config"]);return i!=null&&YS(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZS extends Ot{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gn(Dt.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=IS(this.apiClient,e);return a=L("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=xS(this.apiClient,e);return a=L("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=US(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=DS(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=kS(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=NS(f),p=new Df;return Object.assign(p,h),p})}else{const c=AS(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=RS(f),p=new Df;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=XS(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=QS(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=BS(e);return a=L("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=qS(f),p=new Uf;return Object.assign(p,h),p})}else{const c=GS(e);return a=L("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=HS(f),p=new Uf;return Object.assign(p,h),p})}}}function ms(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Hf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(t){return this instanceof G?(this.v=t,this):new G(t)}function ht(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(v){return Promise.resolve(v).then(m,h)}}function a(m,v){r[m]&&(i[m]=function(S){return new Promise(function(E,_){o.push([m,S,E,_])>1||u(m,S)})},v&&(i[m]=v(i[m])))}function u(m,v){try{c(r[m](v))}catch(S){p(o[0][3],S)}}function c(m){m.value instanceof G?Promise.resolve(m.value.v).then(f,h):p(o[0][2],m)}function f(m){u("next",m)}function h(m){u("throw",m)}function p(m,v){m(v),o.shift(),o.length&&u(o[0][0],o[0][1])}}function pt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Hf=="function"?Hf(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eE(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:pg(n)}function pg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function tE(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function qf(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!pg(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class nE{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new rE(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class rE{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),tE(o)}async sendMessage(e){var n;await this.sendPromise;const r=ke(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const u=await i,c=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(a=f.slice(h))!==null&&a!==void 0?a:[]);const m=c?[c]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=ke(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?qf(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ht(this,arguments,function*(){var i,o,s,a,u,c;const f=[];try{for(var h=!0,p=pt(e),m;m=yield G(p.next()),i=m.done,!i;h=!0){a=m.value,h=!1;const v=a;if(eE(v)){const S=(c=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;S!==void 0&&f.push(S)}yield yield G(v)}}catch(v){o={error:v}}finally{try{!h&&!i&&(s=p.return)&&(yield G(s.call(p)))}finally{if(o)throw o.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...qf(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ui extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ui.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iE(t){const e={},n=l(t,["file"]);return n!=null&&d(e,["file"],n),e}function oE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function sE(t){const e={},n=l(t,["name"]);return n!=null&&d(e,["_url","file"],ag(n)),e}function aE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function lE(t){const e={},n=l(t,["name"]);return n!=null&&d(e,["_url","file"],ag(n)),e}function uE(t){const e={},n=l(t,["uris"]);return n!=null&&d(e,["uris"],n),e}function cE(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function dE(t){const e={},n=l(t,["config"]);return n!=null&&cE(n,e),e}function fE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}function hE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pE extends Ot{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gn(Dt.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dE(e);return o=L("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=fE(u),f=new mw;return Object.assign(f,c),f})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iE(e);return o=L("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=oE(u),f=new gw;return Object.assign(f,c),f})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lE(e);return o=L("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sE(e);return o=L("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=aE(u),f=new vw;return Object.assign(f,c),f})}}async registerFilesInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uE(e);return o=L("files:register",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=hE(u),f=new yw;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Go(t){const e={},n=l(t,["data"]);if(n!=null&&d(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function mE(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>PE(o))),d(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&d(e,["role"],r),e}function gE(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function vE(t){const e={},n=l(t,["id"]);n!=null&&d(e,["id"],n);const r=l(t,["args"]);r!=null&&d(e,["args"],r);const i=l(t,["name"]);if(i!=null&&d(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yE(t){const e={},n=l(t,["description"]);n!=null&&d(e,["description"],n);const r=l(t,["name"]);r!=null&&d(e,["name"],r);const i=l(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&d(e,["response"],s);const a=l(t,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function _E(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const i=l(t,["audioTimestamp"]);i!=null&&d(e,["audioTimestamp"],i);const o=l(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=l(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);const u=l(t,["logprobs"]);u!=null&&d(e,["logprobs"],u);const c=l(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const f=l(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&d(e,["presencePenalty"],h);const p=l(t,["responseLogprobs"]);p!=null&&d(e,["responseLogprobs"],p);const m=l(t,["responseMimeType"]);m!=null&&d(e,["responseMimeType"],m);const v=l(t,["responseModalities"]);v!=null&&d(e,["responseModalities"],v);const S=l(t,["responseSchema"]);S!=null&&d(e,["responseSchema"],S);const E=l(t,["routingConfig"]);E!=null&&d(e,["routingConfig"],E);const _=l(t,["seed"]);_!=null&&d(e,["seed"],_);const y=l(t,["speechConfig"]);y!=null&&d(e,["speechConfig"],y);const w=l(t,["stopSequences"]);w!=null&&d(e,["stopSequences"],w);const T=l(t,["temperature"]);T!=null&&d(e,["temperature"],T);const C=l(t,["thinkingConfig"]);C!=null&&d(e,["thinkingConfig"],C);const x=l(t,["topK"]);x!=null&&d(e,["topK"],x);const I=l(t,["topP"]);if(I!=null&&d(e,["topP"],I),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function wE(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function SE(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function EE(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const u=l(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=l(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],oc(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],m);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&d(e,["setup","systemInstruction"],mE(ke(v)));const S=l(t,["tools"]);if(e!==void 0&&S!=null){let x=Vr(S);Array.isArray(x)&&(x=x.map(I=>ME($r(I)))),d(e,["setup","tools"],x)}const E=l(t,["sessionResumption"]);e!==void 0&&E!=null&&d(e,["setup","sessionResumption"],bE(E));const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","inputAudioTranscription"],_);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&d(e,["setup","outputAudioTranscription"],y);const w=l(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&d(e,["setup","realtimeInputConfig"],w);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&d(e,["setup","contextWindowCompression"],T);const C=l(t,["proactivity"]);if(e!==void 0&&C!=null&&d(e,["setup","proactivity"],C),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function TE(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],_E(r));const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const u=l(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=l(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],oc(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],m);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&d(e,["setup","systemInstruction"],ke(v));const S=l(t,["tools"]);if(e!==void 0&&S!=null){let I=Vr(S);Array.isArray(I)&&(I=I.map(N=>LE($r(N)))),d(e,["setup","tools"],I)}const E=l(t,["sessionResumption"]);e!==void 0&&E!=null&&d(e,["setup","sessionResumption"],E);const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","inputAudioTranscription"],_);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&d(e,["setup","outputAudioTranscription"],y);const w=l(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&d(e,["setup","realtimeInputConfig"],w);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&d(e,["setup","contextWindowCompression"],T);const C=l(t,["proactivity"]);e!==void 0&&C!=null&&d(e,["setup","proactivity"],C);const x=l(t,["explicitVadSignal"]);return e!==void 0&&x!=null&&d(e,["setup","explicitVadSignal"],x),n}function CE(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["setup","model"],W(t,r));const i=l(e,["config"]);return i!=null&&d(n,["config"],EE(i,n)),n}function xE(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["setup","model"],W(t,r));const i=l(e,["config"]);return i!=null&&d(n,["config"],TE(i,n)),n}function IE(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function AE(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["weightedPrompts"],r)}return e}function kE(t){const e={},n=l(t,["media"]);if(n!=null){let c=ng(n);Array.isArray(c)&&(c=c.map(f=>Go(f))),d(e,["mediaChunks"],c)}const r=l(t,["audio"]);r!=null&&d(e,["audio"],Go(ig(r)));const i=l(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&d(e,["video"],Go(rg(o)));const s=l(t,["text"]);s!=null&&d(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);const u=l(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function RE(t){const e={},n=l(t,["media"]);if(n!=null){let c=ng(n);Array.isArray(c)&&(c=c.map(f=>f)),d(e,["mediaChunks"],c)}const r=l(t,["audio"]);r!=null&&d(e,["audio"],ig(r));const i=l(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&d(e,["video"],rg(o));const s=l(t,["text"]);s!=null&&d(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);const u=l(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function NE(t){const e={},n=l(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const r=l(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);const i=l(t,["toolCall"]);i!=null&&d(e,["toolCall"],i);const o=l(t,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);const s=l(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],DE(s));const a=l(t,["goAway"]);a!=null&&d(e,["goAway"],a);const u=l(t,["sessionResumptionUpdate"]);u!=null&&d(e,["sessionResumptionUpdate"],u);const c=l(t,["voiceActivityDetectionSignal"]);c!=null&&d(e,["voiceActivityDetectionSignal"],c);const f=l(t,["voiceActivity"]);return f!=null&&d(e,["voiceActivity"],UE(f)),e}function PE(t){const e={},n=l(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&d(e,["fileData"],gE(o));const s=l(t,["functionCall"]);s!=null&&d(e,["functionCall"],vE(s));const a=l(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&d(e,["inlineData"],Go(u));const c=l(t,["text"]);c!=null&&d(e,["text"],c);const f=l(t,["thought"]);f!=null&&d(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function bE(t){const e={},n=l(t,["handle"]);if(n!=null&&d(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ME(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=l(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=l(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],wE(s));const a=l(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],SE(a));const u=l(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=l(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function LE(t){const e={},n=l(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const r=l(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(t,["codeExecution"]);i!=null&&d(e,["codeExecution"],i);const o=l(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>yE(p))),d(e,["functionDeclarations"],h)}const a=l(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);const u=l(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=l(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=l(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function DE(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&d(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&d(e,["totalTokenCount"],a);const u=l(t,["promptTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["promptTokensDetails"],m)}const c=l(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["cacheTokensDetails"],m)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["responseTokensDetails"],m)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["toolUsePromptTokensDetails"],m)}const p=l(t,["trafficType"]);return p!=null&&d(e,["trafficType"],p),e}function UE(t){const e={},n=l(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OE(t,e){const n={},r=l(t,["data"]);if(r!=null&&d(n,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function FE(t,e){const n={},r=l(t,["content"]);r!=null&&d(n,["content"],r);const i=l(t,["citationMetadata"]);i!=null&&d(n,["citationMetadata"],$E(i));const o=l(t,["tokenCount"]);o!=null&&d(n,["tokenCount"],o);const s=l(t,["finishReason"]);s!=null&&d(n,["finishReason"],s);const a=l(t,["avgLogprobs"]);a!=null&&d(n,["avgLogprobs"],a);const u=l(t,["groundingMetadata"]);u!=null&&d(n,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&d(n,["index"],c);const f=l(t,["logprobsResult"]);f!=null&&d(n,["logprobsResult"],f);const h=l(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),d(n,["safetyRatings"],m)}const p=l(t,["urlContextMetadata"]);return p!=null&&d(n,["urlContextMetadata"],p),n}function $E(t,e){const n={},r=l(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(n,["citations"],i)}return n}function VE(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["contents"]);if(o!=null){let s=et(o);Array.isArray(s)&&(s=s.map(a=>a)),d(r,["contents"],s)}return r}function GE(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["tokensInfo"],o)}return n}function BE(t,e){const n={},r=l(t,["values"]);r!=null&&d(n,["values"],r);const i=l(t,["statistics"]);return i!=null&&d(n,["statistics"],HE(i)),n}function HE(t,e){const n={},r=l(t,["truncated"]);r!=null&&d(n,["truncated"],r);const i=l(t,["token_count"]);return i!=null&&d(n,["tokenCount"],i),n}function $s(t,e){const n={},r=l(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>XT(s))),d(n,["parts"],o)}const i=l(t,["role"]);return i!=null&&d(n,["role"],i),n}function qE(t,e){const n={},r=l(t,["controlType"]);r!=null&&d(n,["controlType"],r);const i=l(t,["enableControlImageComputation"]);return i!=null&&d(n,["computeControl"],i),n}function zE(t,e){const n={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function WE(t,e,n){const r={},i=l(t,["systemInstruction"]);e!==void 0&&i!=null&&d(e,["systemInstruction"],ke(i));const o=l(t,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>yg(u))),d(e,["tools"],a)}const s=l(t,["generationConfig"]);return e!==void 0&&s!=null&&d(e,["generationConfig"],OT(s)),r}function JE(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["contents"]);if(o!=null){let a=et(o);Array.isArray(a)&&(a=a.map(u=>$s(u))),d(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&zE(s),r}function KE(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["contents"]);if(o!=null){let a=et(o);Array.isArray(a)&&(a=a.map(u=>u)),d(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&WE(s,r),r}function jE(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["totalTokens"]);i!=null&&d(n,["totalTokens"],i);const o=l(t,["cachedContentTokenCount"]);return o!=null&&d(n,["cachedContentTokenCount"],o),n}function YE(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["totalTokens"]);return i!=null&&d(n,["totalTokens"],i),n}function QE(t,e,n){const r={},i=l(e,["model"]);return i!=null&&d(r,["_url","name"],W(t,i)),r}function XE(t,e,n){const r={},i=l(e,["model"]);return i!=null&&d(r,["_url","name"],W(t,i)),r}function ZE(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function eT(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function tT(t,e,n){const r={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const a=l(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&d(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const v=l(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&d(e,["parameters","outputOptions","mimeType"],S);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const _=l(t,["addWatermark"]);e!==void 0&&_!=null&&d(e,["parameters","addWatermark"],_);const y=l(t,["labels"]);e!==void 0&&y!=null&&d(e,["labels"],y);const w=l(t,["editMode"]);e!==void 0&&w!=null&&d(e,["parameters","editMode"],w);const T=l(t,["baseSteps"]);return e!==void 0&&T!=null&&d(e,["parameters","editConfig","baseSteps"],T),r}function nT(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=l(e,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>iC(c))),d(r,["instances[0]","referenceImages"],u)}const a=l(e,["config"]);return a!=null&&tT(a,r),r}function rT(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Vs(s))),d(n,["generatedImages"],o)}return n}function iT(t,e,n){const r={},i=l(t,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);const o=l(t,["title"]);e!==void 0&&o!=null&&d(e,["requests[]","title"],o);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&d(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function oT(t,e,n){const r={},i=l(t,["taskType"]);e!==void 0&&i!=null&&d(e,["instances[]","task_type"],i);const o=l(t,["title"]);e!==void 0&&o!=null&&d(e,["instances[]","title"],o);const s=l(t,["outputDimensionality"]);e!==void 0&&s!=null&&d(e,["parameters","outputDimensionality"],s);const a=l(t,["mimeType"]);e!==void 0&&a!=null&&d(e,["instances[]","mimeType"],a);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&d(e,["parameters","autoTruncate"],u),r}function sT(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["contents"]);if(o!=null){let u=nc(t,o);Array.isArray(u)&&(u=u.map(c=>c)),d(r,["requests[]","content"],u)}const s=l(e,["config"]);s!=null&&iT(s,r);const a=l(e,["model"]);return a!==void 0&&d(r,["requests[]","model"],W(t,a)),r}function aT(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["contents"]);if(o!=null){let a=nc(t,o);Array.isArray(a)&&(a=a.map(u=>u)),d(r,["instances[]","content"],a)}const s=l(e,["config"]);return s!=null&&oT(s,r),r}function lT(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),d(n,["embeddings"],s)}const o=l(t,["metadata"]);return o!=null&&d(n,["metadata"],o),n}function uT(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>BE(a))),d(n,["embeddings"],s)}const o=l(t,["metadata"]);return o!=null&&d(n,["metadata"],o),n}function cT(t,e){const n={},r=l(t,["endpoint"]);r!=null&&d(n,["name"],r);const i=l(t,["deployedModelId"]);return i!=null&&d(n,["deployedModelId"],i),n}function dT(t,e){const n={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function fT(t,e){const n={},r=l(t,["id"]);r!=null&&d(n,["id"],r);const i=l(t,["args"]);i!=null&&d(n,["args"],i);const o=l(t,["name"]);if(o!=null&&d(n,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function hT(t,e){const n={},r=l(t,["allowedFunctionNames"]);r!=null&&d(n,["allowedFunctionNames"],r);const i=l(t,["mode"]);if(i!=null&&d(n,["mode"],i),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function pT(t,e){const n={},r=l(t,["description"]);r!=null&&d(n,["description"],r);const i=l(t,["name"]);i!=null&&d(n,["name"],i);const o=l(t,["parameters"]);o!=null&&d(n,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&d(n,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&d(n,["response"],a);const u=l(t,["responseJsonSchema"]);if(u!=null&&d(n,["responseJsonSchema"],u),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function mT(t,e,n,r){const i={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],$s(ke(o)));const s=l(e,["temperature"]);s!=null&&d(i,["temperature"],s);const a=l(e,["topP"]);a!=null&&d(i,["topP"],a);const u=l(e,["topK"]);u!=null&&d(i,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&d(i,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&d(i,["maxOutputTokens"],f);const h=l(e,["stopSequences"]);h!=null&&d(i,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&d(i,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&d(i,["logprobs"],m);const v=l(e,["presencePenalty"]);v!=null&&d(i,["presencePenalty"],v);const S=l(e,["frequencyPenalty"]);S!=null&&d(i,["frequencyPenalty"],S);const E=l(e,["seed"]);E!=null&&d(i,["seed"],E);const _=l(e,["responseMimeType"]);_!=null&&d(i,["responseMimeType"],_);const y=l(e,["responseSchema"]);y!=null&&d(i,["responseSchema"],rc(y));const w=l(e,["responseJsonSchema"]);if(w!=null&&d(i,["responseJsonSchema"],w),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=l(e,["safetySettings"]);if(n!==void 0&&T!=null){let ae=T;Array.isArray(ae)&&(ae=ae.map(k=>oC(k))),d(n,["safetySettings"],ae)}const C=l(e,["tools"]);if(n!==void 0&&C!=null){let ae=Vr(C);Array.isArray(ae)&&(ae=ae.map(k=>fC($r(k)))),d(n,["tools"],ae)}const x=l(e,["toolConfig"]);if(n!==void 0&&x!=null&&d(n,["toolConfig"],dC(x)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&d(n,["cachedContent"],Ft(t,I));const N=l(e,["responseModalities"]);N!=null&&d(i,["responseModalities"],N);const b=l(e,["mediaResolution"]);b!=null&&d(i,["mediaResolution"],b);const M=l(e,["speechConfig"]);if(M!=null&&d(i,["speechConfig"],ic(M)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=l(e,["thinkingConfig"]);q!=null&&d(i,["thinkingConfig"],q);const se=l(e,["imageConfig"]);se!=null&&d(i,["imageConfig"],BT(se));const ee=l(e,["enableEnhancedCivicAnswers"]);if(ee!=null&&d(i,["enableEnhancedCivicAnswers"],ee),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function gT(t,e,n,r){const i={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],ke(o));const s=l(e,["temperature"]);s!=null&&d(i,["temperature"],s);const a=l(e,["topP"]);a!=null&&d(i,["topP"],a);const u=l(e,["topK"]);u!=null&&d(i,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&d(i,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&d(i,["maxOutputTokens"],f);const h=l(e,["stopSequences"]);h!=null&&d(i,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&d(i,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&d(i,["logprobs"],m);const v=l(e,["presencePenalty"]);v!=null&&d(i,["presencePenalty"],v);const S=l(e,["frequencyPenalty"]);S!=null&&d(i,["frequencyPenalty"],S);const E=l(e,["seed"]);E!=null&&d(i,["seed"],E);const _=l(e,["responseMimeType"]);_!=null&&d(i,["responseMimeType"],_);const y=l(e,["responseSchema"]);y!=null&&d(i,["responseSchema"],rc(y));const w=l(e,["responseJsonSchema"]);w!=null&&d(i,["responseJsonSchema"],w);const T=l(e,["routingConfig"]);T!=null&&d(i,["routingConfig"],T);const C=l(e,["modelSelectionConfig"]);C!=null&&d(i,["modelConfig"],C);const x=l(e,["safetySettings"]);if(n!==void 0&&x!=null){let P=x;Array.isArray(P)&&(P=P.map(O=>O)),d(n,["safetySettings"],P)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let P=Vr(I);Array.isArray(P)&&(P=P.map(O=>yg($r(O)))),d(n,["tools"],P)}const N=l(e,["toolConfig"]);n!==void 0&&N!=null&&d(n,["toolConfig"],N);const b=l(e,["labels"]);n!==void 0&&b!=null&&d(n,["labels"],b);const M=l(e,["cachedContent"]);n!==void 0&&M!=null&&d(n,["cachedContent"],Ft(t,M));const q=l(e,["responseModalities"]);q!=null&&d(i,["responseModalities"],q);const se=l(e,["mediaResolution"]);se!=null&&d(i,["mediaResolution"],se);const ee=l(e,["speechConfig"]);ee!=null&&d(i,["speechConfig"],ic(ee));const ae=l(e,["audioTimestamp"]);ae!=null&&d(i,["audioTimestamp"],ae);const k=l(e,["thinkingConfig"]);k!=null&&d(i,["thinkingConfig"],k);const F=l(e,["imageConfig"]);if(F!=null&&d(i,["imageConfig"],HT(F)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const de=l(e,["modelArmorConfig"]);return n!==void 0&&de!=null&&d(n,["modelArmorConfig"],de),i}function zf(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["contents"]);if(o!=null){let a=et(o);Array.isArray(a)&&(a=a.map(u=>$s(u))),d(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&d(r,["generationConfig"],mT(t,s,r)),r}function Wf(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["contents"]);if(o!=null){let a=et(o);Array.isArray(a)&&(a=a.map(u=>u)),d(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&d(r,["generationConfig"],gT(t,s,r)),r}function Jf(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>FE(f))),d(n,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&d(n,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&d(n,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&d(n,["responseId"],a);const u=l(t,["usageMetadata"]);return u!=null&&d(n,["usageMetadata"],u),n}function Kf(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),d(n,["candidates"],f)}const o=l(t,["createTime"]);o!=null&&d(n,["createTime"],o);const s=l(t,["modelVersion"]);s!=null&&d(n,["modelVersion"],s);const a=l(t,["promptFeedback"]);a!=null&&d(n,["promptFeedback"],a);const u=l(t,["responseId"]);u!=null&&d(n,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&d(n,["usageMetadata"],c),n}function vT(t,e,n){const r={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const s=l(t,["guidanceScale"]);if(e!==void 0&&s!=null&&d(e,["parameters","guidanceScale"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&d(e,["parameters","includeSafetyAttributes"],c);const f=l(t,["includeRaiReason"]);e!==void 0&&f!=null&&d(e,["parameters","includeRaiReason"],f);const h=l(t,["language"]);e!==void 0&&h!=null&&d(e,["parameters","language"],h);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=l(t,["imageSize"]);if(e!==void 0&&v!=null&&d(e,["parameters","sampleImageSize"],v),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function yT(t,e,n){const r={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const a=l(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&d(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const v=l(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&d(e,["parameters","outputOptions","mimeType"],S);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const _=l(t,["addWatermark"]);e!==void 0&&_!=null&&d(e,["parameters","addWatermark"],_);const y=l(t,["labels"]);e!==void 0&&y!=null&&d(e,["labels"],y);const w=l(t,["imageSize"]);e!==void 0&&w!=null&&d(e,["parameters","sampleImageSize"],w);const T=l(t,["enhancePrompt"]);return e!==void 0&&T!=null&&d(e,["parameters","enhancePrompt"],T),r}function _T(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=l(e,["config"]);return s!=null&&vT(s,r),r}function wT(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=l(e,["config"]);return s!=null&&yT(s,r),r}function ST(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>MT(a))),d(n,["generatedImages"],s)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&d(n,["positivePromptSafetyAttributes"],gg(o)),n}function ET(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Vs(a))),d(n,["generatedImages"],s)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&d(n,["positivePromptSafetyAttributes"],vg(o)),n}function TT(t,e,n){const r={},i=l(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(t,["durationSeconds"]);if(e!==void 0&&o!=null&&d(e,["parameters","durationSeconds"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const a=l(t,["resolution"]);e!==void 0&&a!=null&&d(e,["parameters","resolution"],a);const u=l(t,["personGeneration"]);if(e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&d(e,["parameters","negativePrompt"],c);const f=l(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&d(e,["parameters","enhancePrompt"],f),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=l(t,["lastFrame"]);e!==void 0&&h!=null&&d(e,["instances[0]","lastFrame"],Gs(h));const p=l(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>xC(v))),d(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function CT(t,e,n){const r={},i=l(t,["numberOfVideos"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=l(t,["fps"]);e!==void 0&&s!=null&&d(e,["parameters","fps"],s);const a=l(t,["durationSeconds"]);e!==void 0&&a!=null&&d(e,["parameters","durationSeconds"],a);const u=l(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const f=l(t,["resolution"]);e!==void 0&&f!=null&&d(e,["parameters","resolution"],f);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&d(e,["parameters","pubsubTopic"],p);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);const v=l(t,["enhancePrompt"]);e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v);const S=l(t,["generateAudio"]);e!==void 0&&S!=null&&d(e,["parameters","generateAudio"],S);const E=l(t,["lastFrame"]);e!==void 0&&E!=null&&d(e,["instances[0]","lastFrame"],gt(E));const _=l(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>IC(C))),d(e,["instances[0]","referenceImages"],T)}const y=l(t,["mask"]);e!==void 0&&y!=null&&d(e,["instances[0]","mask"],CC(y));const w=l(t,["compressionQuality"]);return e!==void 0&&w!=null&&d(e,["parameters","compressionQuality"],w),r}function xT(t,e){const n={},r=l(t,["name"]);r!=null&&d(n,["name"],r);const i=l(t,["metadata"]);i!=null&&d(n,["metadata"],i);const o=l(t,["done"]);o!=null&&d(n,["done"],o);const s=l(t,["error"]);s!=null&&d(n,["error"],s);const a=l(t,["response","generateVideoResponse"]);return a!=null&&d(n,["response"],RT(a)),n}function IT(t,e){const n={},r=l(t,["name"]);r!=null&&d(n,["name"],r);const i=l(t,["metadata"]);i!=null&&d(n,["metadata"],i);const o=l(t,["done"]);o!=null&&d(n,["done"],o);const s=l(t,["error"]);s!=null&&d(n,["error"],s);const a=l(t,["response"]);return a!=null&&d(n,["response"],NT(a)),n}function AT(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=l(e,["image"]);s!=null&&d(r,["instances[0]","image"],Gs(s));const a=l(e,["video"]);a!=null&&d(r,["instances[0]","video"],_g(a));const u=l(e,["source"]);u!=null&&PT(u,r);const c=l(e,["config"]);return c!=null&&TT(c,r),r}function kT(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=l(e,["image"]);s!=null&&d(r,["instances[0]","image"],gt(s));const a=l(e,["video"]);a!=null&&d(r,["instances[0]","video"],wg(a));const u=l(e,["source"]);u!=null&&bT(u,r);const c=l(e,["config"]);return c!=null&&CT(c,r),r}function RT(t,e){const n={},r=l(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>DT(a))),d(n,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&d(n,["raiMediaFilteredCount"],i);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function NT(t,e){const n={},r=l(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>UT(a))),d(n,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&d(n,["raiMediaFilteredCount"],i);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function PT(t,e,n){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=l(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],Gs(o));const s=l(t,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],_g(s)),r}function bT(t,e,n){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=l(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],gt(o));const s=l(t,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],wg(s)),r}function MT(t,e){const n={},r=l(t,["_self"]);r!=null&&d(n,["image"],qT(r));const i=l(t,["raiFilteredReason"]);i!=null&&d(n,["raiFilteredReason"],i);const o=l(t,["_self"]);return o!=null&&d(n,["safetyAttributes"],gg(o)),n}function Vs(t,e){const n={},r=l(t,["_self"]);r!=null&&d(n,["image"],mg(r));const i=l(t,["raiFilteredReason"]);i!=null&&d(n,["raiFilteredReason"],i);const o=l(t,["_self"]);o!=null&&d(n,["safetyAttributes"],vg(o));const s=l(t,["prompt"]);return s!=null&&d(n,["enhancedPrompt"],s),n}function LT(t,e){const n={},r=l(t,["_self"]);r!=null&&d(n,["mask"],mg(r));const i=l(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["labels"],o)}return n}function DT(t,e){const n={},r=l(t,["video"]);return r!=null&&d(n,["video"],EC(r)),n}function UT(t,e){const n={},r=l(t,["_self"]);return r!=null&&d(n,["video"],TC(r)),n}function OT(t,e){const n={},r=l(t,["modelSelectionConfig"]);r!=null&&d(n,["modelConfig"],r);const i=l(t,["responseJsonSchema"]);i!=null&&d(n,["responseJsonSchema"],i);const o=l(t,["audioTimestamp"]);o!=null&&d(n,["audioTimestamp"],o);const s=l(t,["candidateCount"]);s!=null&&d(n,["candidateCount"],s);const a=l(t,["enableAffectiveDialog"]);a!=null&&d(n,["enableAffectiveDialog"],a);const u=l(t,["frequencyPenalty"]);u!=null&&d(n,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&d(n,["logprobs"],c);const f=l(t,["maxOutputTokens"]);f!=null&&d(n,["maxOutputTokens"],f);const h=l(t,["mediaResolution"]);h!=null&&d(n,["mediaResolution"],h);const p=l(t,["presencePenalty"]);p!=null&&d(n,["presencePenalty"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(n,["responseLogprobs"],m);const v=l(t,["responseMimeType"]);v!=null&&d(n,["responseMimeType"],v);const S=l(t,["responseModalities"]);S!=null&&d(n,["responseModalities"],S);const E=l(t,["responseSchema"]);E!=null&&d(n,["responseSchema"],E);const _=l(t,["routingConfig"]);_!=null&&d(n,["routingConfig"],_);const y=l(t,["seed"]);y!=null&&d(n,["seed"],y);const w=l(t,["speechConfig"]);w!=null&&d(n,["speechConfig"],w);const T=l(t,["stopSequences"]);T!=null&&d(n,["stopSequences"],T);const C=l(t,["temperature"]);C!=null&&d(n,["temperature"],C);const x=l(t,["thinkingConfig"]);x!=null&&d(n,["thinkingConfig"],x);const I=l(t,["topK"]);I!=null&&d(n,["topK"],I);const N=l(t,["topP"]);if(N!=null&&d(n,["topP"],N),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function FT(t,e,n){const r={},i=l(e,["model"]);return i!=null&&d(r,["_url","name"],W(t,i)),r}function $T(t,e,n){const r={},i=l(e,["model"]);return i!=null&&d(r,["_url","name"],W(t,i)),r}function VT(t,e){const n={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=l(t,["enableWidget"]);return r!=null&&d(n,["enableWidget"],r),n}function GT(t,e){const n={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=l(t,["timeRangeFilter"]);return r!=null&&d(n,["timeRangeFilter"],r),n}function BT(t,e){const n={},r=l(t,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);const i=l(t,["imageSize"]);if(i!=null&&d(n,["imageSize"],i),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function HT(t,e){const n={},r=l(t,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);const i=l(t,["imageSize"]);i!=null&&d(n,["imageSize"],i);const o=l(t,["personGeneration"]);o!=null&&d(n,["personGeneration"],o);const s=l(t,["outputMimeType"]);s!=null&&d(n,["imageOutputOptions","mimeType"],s);const a=l(t,["outputCompressionQuality"]);return a!=null&&d(n,["imageOutputOptions","compressionQuality"],a),n}function qT(t,e){const n={},r=l(t,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],mn(r));const i=l(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function mg(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);const i=l(t,["bytesBase64Encoded"]);i!=null&&d(n,["imageBytes"],mn(i));const o=l(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function Gs(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=l(t,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],mn(r));const i=l(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function gt(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);const i=l(t,["imageBytes"]);i!=null&&d(n,["bytesBase64Encoded"],mn(i));const o=l(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function zT(t,e,n,r){const i={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const a=l(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],lg(t,u)),i}function WT(t,e,n,r){const i={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const a=l(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],lg(t,u)),i}function JT(t,e,n){const r={},i=l(e,["config"]);return i!=null&&zT(t,i,r),r}function KT(t,e,n){const r={},i=l(e,["config"]);return i!=null&&WT(t,i,r),r}function jT(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=l(t,["_self"]);if(o!=null){let s=ug(o);Array.isArray(s)&&(s=s.map(a=>Dl(a))),d(n,["models"],s)}return n}function YT(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=l(t,["_self"]);if(o!=null){let s=ug(o);Array.isArray(s)&&(s=s.map(a=>Ul(a))),d(n,["models"],s)}return n}function QT(t,e){const n={},r=l(t,["maskMode"]);r!=null&&d(n,["maskMode"],r);const i=l(t,["segmentationClasses"]);i!=null&&d(n,["maskClasses"],i);const o=l(t,["maskDilation"]);return o!=null&&d(n,["dilation"],o),n}function Dl(t,e){const n={},r=l(t,["name"]);r!=null&&d(n,["name"],r);const i=l(t,["displayName"]);i!=null&&d(n,["displayName"],i);const o=l(t,["description"]);o!=null&&d(n,["description"],o);const s=l(t,["version"]);s!=null&&d(n,["version"],s);const a=l(t,["_self"]);a!=null&&d(n,["tunedModelInfo"],hC(a));const u=l(t,["inputTokenLimit"]);u!=null&&d(n,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&d(n,["outputTokenLimit"],c);const f=l(t,["supportedGenerationMethods"]);f!=null&&d(n,["supportedActions"],f);const h=l(t,["temperature"]);h!=null&&d(n,["temperature"],h);const p=l(t,["maxTemperature"]);p!=null&&d(n,["maxTemperature"],p);const m=l(t,["topP"]);m!=null&&d(n,["topP"],m);const v=l(t,["topK"]);v!=null&&d(n,["topK"],v);const S=l(t,["thinking"]);return S!=null&&d(n,["thinking"],S),n}function Ul(t,e){const n={},r=l(t,["name"]);r!=null&&d(n,["name"],r);const i=l(t,["displayName"]);i!=null&&d(n,["displayName"],i);const o=l(t,["description"]);o!=null&&d(n,["description"],o);const s=l(t,["versionId"]);s!=null&&d(n,["version"],s);const a=l(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>cT(m))),d(n,["endpoints"],p)}const u=l(t,["labels"]);u!=null&&d(n,["labels"],u);const c=l(t,["_self"]);c!=null&&d(n,["tunedModelInfo"],pC(c));const f=l(t,["defaultCheckpointId"]);f!=null&&d(n,["defaultCheckpointId"],f);const h=l(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),d(n,["checkpoints"],p)}return n}function XT(t,e){const n={},r=l(t,["mediaResolution"]);r!=null&&d(n,["mediaResolution"],r);const i=l(t,["codeExecutionResult"]);i!=null&&d(n,["codeExecutionResult"],i);const o=l(t,["executableCode"]);o!=null&&d(n,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&d(n,["fileData"],dT(s));const a=l(t,["functionCall"]);a!=null&&d(n,["functionCall"],fT(a));const u=l(t,["functionResponse"]);u!=null&&d(n,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&d(n,["inlineData"],OE(c));const f=l(t,["text"]);f!=null&&d(n,["text"],f);const h=l(t,["thought"]);h!=null&&d(n,["thought"],h);const p=l(t,["thoughtSignature"]);p!=null&&d(n,["thoughtSignature"],p);const m=l(t,["videoMetadata"]);return m!=null&&d(n,["videoMetadata"],m),n}function ZT(t,e){const n={},r=l(t,["productImage"]);return r!=null&&d(n,["image"],gt(r)),n}function eC(t,e,n){const r={},i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=l(t,["baseSteps"]);e!==void 0&&o!=null&&d(e,["parameters","baseSteps"],o);const s=l(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&d(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const f=l(t,["addWatermark"]);e!==void 0&&f!=null&&d(e,["parameters","addWatermark"],f);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m);const v=l(t,["labels"]);return e!==void 0&&v!=null&&d(e,["labels"],v),r}function tC(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["source"]);o!=null&&rC(o,r);const s=l(e,["config"]);return s!=null&&eC(s,r),r}function nC(t,e){const n={},r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Vs(o))),d(n,["generatedImages"],i)}return n}function rC(t,e,n){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=l(t,["personImage"]);e!==void 0&&o!=null&&d(e,["instances[0]","personImage","image"],gt(o));const s=l(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>ZT(u))),d(e,["instances[0]","productImages"],a)}return r}function iC(t,e){const n={},r=l(t,["referenceImage"]);r!=null&&d(n,["referenceImage"],gt(r));const i=l(t,["referenceId"]);i!=null&&d(n,["referenceId"],i);const o=l(t,["referenceType"]);o!=null&&d(n,["referenceType"],o);const s=l(t,["maskImageConfig"]);s!=null&&d(n,["maskImageConfig"],QT(s));const a=l(t,["controlImageConfig"]);a!=null&&d(n,["controlImageConfig"],qE(a));const u=l(t,["styleImageConfig"]);u!=null&&d(n,["styleImageConfig"],u);const c=l(t,["subjectImageConfig"]);return c!=null&&d(n,["subjectImageConfig"],c),n}function gg(t,e){const n={},r=l(t,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);const i=l(t,["safetyAttributes","scores"]);i!=null&&d(n,["scores"],i);const o=l(t,["contentType"]);return o!=null&&d(n,["contentType"],o),n}function vg(t,e){const n={},r=l(t,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);const i=l(t,["safetyAttributes","scores"]);i!=null&&d(n,["scores"],i);const o=l(t,["contentType"]);return o!=null&&d(n,["contentType"],o),n}function oC(t,e){const n={},r=l(t,["category"]);if(r!=null&&d(n,["category"],r),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=l(t,["threshold"]);return i!=null&&d(n,["threshold"],i),n}function sC(t,e){const n={},r=l(t,["image"]);return r!=null&&d(n,["image"],gt(r)),n}function aC(t,e,n){const r={},i=l(t,["mode"]);e!==void 0&&i!=null&&d(e,["parameters","mode"],i);const o=l(t,["maxPredictions"]);e!==void 0&&o!=null&&d(e,["parameters","maxPredictions"],o);const s=l(t,["confidenceThreshold"]);e!==void 0&&s!=null&&d(e,["parameters","confidenceThreshold"],s);const a=l(t,["maskDilation"]);e!==void 0&&a!=null&&d(e,["parameters","maskDilation"],a);const u=l(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&d(e,["parameters","binaryColorThreshold"],u);const c=l(t,["labels"]);return e!==void 0&&c!=null&&d(e,["labels"],c),r}function lC(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["source"]);o!=null&&cC(o,r);const s=l(e,["config"]);return s!=null&&aC(s,r),r}function uC(t,e){const n={},r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>LT(o))),d(n,["generatedMasks"],i)}return n}function cC(t,e,n){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=l(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],gt(o));const s=l(t,["scribbleImage"]);return e!==void 0&&s!=null&&d(e,["instances[0]","scribble"],sC(s)),r}function dC(t,e){const n={},r=l(t,["retrievalConfig"]);r!=null&&d(n,["retrievalConfig"],r);const i=l(t,["functionCallingConfig"]);return i!=null&&d(n,["functionCallingConfig"],hT(i)),n}function fC(t,e){const n={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["computerUse"]);r!=null&&d(n,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&d(n,["fileSearch"],i);const o=l(t,["codeExecution"]);if(o!=null&&d(n,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>p)),d(n,["functionDeclarations"],h)}const a=l(t,["googleMaps"]);a!=null&&d(n,["googleMaps"],VT(a));const u=l(t,["googleSearch"]);u!=null&&d(n,["googleSearch"],GT(u));const c=l(t,["googleSearchRetrieval"]);c!=null&&d(n,["googleSearchRetrieval"],c);const f=l(t,["urlContext"]);return f!=null&&d(n,["urlContext"],f),n}function yg(t,e){const n={},r=l(t,["retrieval"]);r!=null&&d(n,["retrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&d(n,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=l(t,["codeExecution"]);o!=null&&d(n,["codeExecution"],o);const s=l(t,["enterpriseWebSearch"]);s!=null&&d(n,["enterpriseWebSearch"],s);const a=l(t,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>pT(m))),d(n,["functionDeclarations"],p)}const u=l(t,["googleMaps"]);u!=null&&d(n,["googleMaps"],u);const c=l(t,["googleSearch"]);c!=null&&d(n,["googleSearch"],c);const f=l(t,["googleSearchRetrieval"]);f!=null&&d(n,["googleSearchRetrieval"],f);const h=l(t,["urlContext"]);return h!=null&&d(n,["urlContext"],h),n}function hC(t,e){const n={},r=l(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=l(t,["createTime"]);i!=null&&d(n,["createTime"],i);const o=l(t,["updateTime"]);return o!=null&&d(n,["updateTime"],o),n}function pC(t,e){const n={},r=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&d(n,["baseModel"],r);const i=l(t,["createTime"]);i!=null&&d(n,["createTime"],i);const o=l(t,["updateTime"]);return o!=null&&d(n,["updateTime"],o),n}function mC(t,e,n){const r={},i=l(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function gC(t,e,n){const r={},i=l(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function vC(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","name"],W(t,i));const o=l(e,["config"]);return o!=null&&mC(o,r),r}function yC(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["config"]);return o!=null&&gC(o,r),r}function _C(t,e,n){const r={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&d(e,["parameters","safetySetting"],o);const s=l(t,["personGeneration"]);e!==void 0&&s!=null&&d(e,["parameters","personGeneration"],s);const a=l(t,["includeRaiReason"]);e!==void 0&&a!=null&&d(e,["parameters","includeRaiReason"],a);const u=l(t,["outputMimeType"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","mimeType"],u);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&d(e,["parameters","outputOptions","compressionQuality"],c);const f=l(t,["enhanceInputImage"]);e!==void 0&&f!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],f);const h=l(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=l(t,["labels"]);e!==void 0&&p!=null&&d(e,["labels"],p);const m=l(t,["numberOfImages"]);e!==void 0&&m!=null&&d(e,["parameters","sampleCount"],m);const v=l(t,["mode"]);return e!==void 0&&v!=null&&d(e,["parameters","mode"],v),r}function wC(t,e,n){const r={},i=l(e,["model"]);i!=null&&d(r,["_url","model"],W(t,i));const o=l(e,["image"]);o!=null&&d(r,["instances[0]","image"],gt(o));const s=l(e,["upscaleFactor"]);s!=null&&d(r,["parameters","upscaleConfig","upscaleFactor"],s);const a=l(e,["config"]);return a!=null&&_C(a,r),r}function SC(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Vs(s))),d(n,["generatedImages"],o)}return n}function EC(t,e){const n={},r=l(t,["uri"]);r!=null&&d(n,["uri"],r);const i=l(t,["encodedVideo"]);i!=null&&d(n,["videoBytes"],mn(i));const o=l(t,["encoding"]);return o!=null&&d(n,["mimeType"],o),n}function TC(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&d(n,["uri"],r);const i=l(t,["bytesBase64Encoded"]);i!=null&&d(n,["videoBytes"],mn(i));const o=l(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function CC(t,e){const n={},r=l(t,["image"]);r!=null&&d(n,["_self"],gt(r));const i=l(t,["maskMode"]);return i!=null&&d(n,["maskMode"],i),n}function xC(t,e){const n={},r=l(t,["image"]);r!=null&&d(n,["image"],Gs(r));const i=l(t,["referenceType"]);return i!=null&&d(n,["referenceType"],i),n}function IC(t,e){const n={},r=l(t,["image"]);r!=null&&d(n,["image"],gt(r));const i=l(t,["referenceType"]);return i!=null&&d(n,["referenceType"],i),n}function _g(t,e){const n={},r=l(t,["uri"]);r!=null&&d(n,["uri"],r);const i=l(t,["videoBytes"]);i!=null&&d(n,["encodedVideo"],mn(i));const o=l(t,["mimeType"]);return o!=null&&d(n,["encoding"],o),n}function wg(t,e){const n={},r=l(t,["uri"]);r!=null&&d(n,["gcsUri"],r);const i=l(t,["videoBytes"]);i!=null&&d(n,["bytesBase64Encoded"],mn(i));const o=l(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AC(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),n}function kC(t){const e={},n=l(t,["config"]);return n!=null&&AC(n,e),e}function RC(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function NC(t){const e={},n=l(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&RC(r,e),e}function PC(t){const e={},n=l(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function bC(t,e){const n={},r=l(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["customMetadata"],o)}const i=l(t,["chunkingConfig"]);return e!==void 0&&i!=null&&d(e,["chunkingConfig"],i),n}function MC(t){const e={},n=l(t,["name"]);n!=null&&d(e,["name"],n);const r=l(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=l(t,["done"]);i!=null&&d(e,["done"],i);const o=l(t,["error"]);o!=null&&d(e,["error"],o);const s=l(t,["response"]);return s!=null&&d(e,["response"],DC(s)),e}function LC(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=l(t,["fileName"]);r!=null&&d(e,["fileName"],r);const i=l(t,["config"]);return i!=null&&bC(i,e),e}function DC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&d(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function UC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function OC(t){const e={},n=l(t,["config"]);return n!=null&&UC(n,e),e}function FC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=l(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["fileSearchStores"],o)}return e}function Sg(t,e){const n={},r=l(t,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=l(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),d(e,["customMetadata"],a)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function $C(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=l(t,["config"]);return r!=null&&Sg(r,e),e}function VC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GC="Content-Type",BC="X-Server-Timeout",HC="User-Agent",Ol="x-goog-api-client",qC="1.40.0",zC=`google-genai-sdk/${qC}`,WC="v1beta1",JC="v1beta";class KC{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:WC}else{if(!this.clientOptions.apiKey)throw new Ui({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:JC,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Pl.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&jC(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await jf(i),new bl(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await jf(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return ht(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield G(i.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(f,{stream:!0});try{const v=JSON.parse(h);if("error"in v){const S=JSON.parse(JSON.stringify(v.error)),E=S.status,_=S.code,y=`got status: ${E}. ${JSON.stringify(v)}`;if(_>=400&&_<600)throw new Ui({message:y,status:_})}}catch(v){if(v.name==="ApiError")throw v}s+=h;let p=-1,m=0;for(;;){p=-1,m=0;for(const E of u){const _=s.indexOf(E);_!==-1&&(p===-1||_<p)&&(p=_,m=E.length)}if(p===-1)break;const v=s.substring(0,p);s=s.substring(p+m);const S=v.trim();if(S.startsWith(a)){const E=S.substring(a.length).trim();try{const _=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield G(new bl(_))}catch(_){throw new Error(`exception parsing stream chunk ${E}. ${_}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=zC+" "+this.clientOptions.userAgentExtra;return e[HC]=n,e[Ol]=n,e[GC]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(BC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const u={file:i},c=this.getFileName(e),f=L("upload/v1beta/files",u._url),h=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,c,u,n==null?void 0:n.httpOptions);return o.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),u=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};r!=null&&Sg(r,h);const p=await this.fetchUploadUrl(c,a,u,f,h,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function jf(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Ui({message:i,status:n}):new Error(i)}}function jC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],f=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?a[u]=r(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YC="mcp_used/unknown";let QC=!1;function Eg(t){for(const e of t)if(XC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return QC}function Tg(t){var e;const n=(e=t[Ol])!==null&&e!==void 0?e:"";t[Ol]=(n+` ${YC}`).trimStart()}function XC(t){return t!==null&&typeof t=="object"&&t instanceof sc}function ZC(t){return ht(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield G(n.listTools({cursor:i}));for(const a of s.tools)yield yield G(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class sc{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new sc(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var a=!0,u=(n=void 0,pt(ZC(f))),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=f}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),kw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ex(t,e,n){const r=new ww;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class tx{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=ix(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const f=new Promise(w=>{c=w}),h=e.callbacks,p=function(){c({})},m=this.apiClient,v={onopen:p,onmessage:w=>{ex(m,h.onmessage,w)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(w){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(w){}},S=this.webSocketFactory.create(u,rx(s),v);S.connect(),await f;const y={setup:{model:W(this.apiClient,e.model)}};return S.send(JSON.stringify(y)),new nx(S,this.apiClient)}}class nx{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=AE(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=IE(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(mr.PLAY)}pause(){this.sendPlaybackControl(mr.PAUSE)}stop(){this.sendPlaybackControl(mr.STOP)}resetContext(){this.sendPlaybackControl(mr.RESET_CONTEXT)}close(){this.conn.close()}}function rx(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function ix(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ox="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function sx(t,e,n){const r=new _w;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=NE(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class ax{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new tx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Eg(e.config.tools)&&Tg(h);const p=dx(h);if(this.apiClient.isVertexAI()){const b=this.apiClient.getProject(),M=this.apiClient.getLocation(),q=this.apiClient.getApiKey(),se=!!b&&!!M||!!q;this.apiClient.getCustomBaseUrl()&&!se?f=u:(f=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f))}else{const b=this.apiClient.getApiKey();let M="BidiGenerateContent",q="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",q="access_token"),f=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${q}=${b}`}let m=()=>{};const v=new Promise(b=>{m=b}),S=e.callbacks,E=function(){var b;(b=S==null?void 0:S.onopen)===null||b===void 0||b.call(S),m({})},_=this.apiClient,y={onopen:E,onmessage:b=>{sx(_,S.onmessage,b)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(b){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(b){}},w=this.webSocketFactory.create(f,cx(p),y);w.connect(),await v;let T=W(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const b=this.apiClient.getProject(),M=this.apiClient.getLocation();b&&M&&(T=`projects/${b}/locations/${M}/`+T)}let C={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Lr.AUDIO]}:e.config.responseModalities=[Lr.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const x=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],I=[];for(const b of x)if(this.isCallableTool(b)){const M=b;I.push(await M.tool())}else I.push(b);I.length>0&&(e.config.tools=I);const N={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=xE(this.apiClient,N):C=CE(this.apiClient,N),delete C.config,w.send(JSON.stringify(C)),new ux(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const lx={turnComplete:!0};class ux{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=et(n.turns),e.isVertexAI()||(r=r.map(i=>$s(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(ox)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},lx),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:RE(e)}:n={realtimeInput:kE(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function cx(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function dx(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yf=10;function Qf(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(xr(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function xr(t){return"callTool"in t&&typeof t.callTool=="function"}function fx(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>xr(i)))!==null&&r!==void 0?r:!1}function Xf(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(xr(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function Zf(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hx extends Ot{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!fx(n)||Qf(n.config))return await this.generateContentInternal(u);const c=Xf(n);if(c.length>0){const S=c.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let f,h;const p=et(u.contents),m=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Yf;let v=0;for(;v<m&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const S=f.candidates[0].content,E=[];for(const _ of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(xr(_)){const w=await _.callTool(f.functionCalls);E.push(...w)}v++,h={role:"user",parts:E},u.contents=et(u.contents),u.contents.push(S),u.contents.push(h),Zf(u.config)&&(p.push(S),p.push(h))}return Zf(u.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),Qf(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const u=Xf(n);if(u.length>0){const h=u.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Gn(Dt.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>xr(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&Eg(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Tg(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(xr(s)){const a=s,u=await a.tool();for(const c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Yf;let s=!1,a=0;const u=await this.initAfcToolsMap(e);return function(c,f,h){return ht(this,arguments,function*(){for(var p,m,v,S,E,_;a<o;){s&&(a++,s=!1);const C=yield G(c.processParamsMaybeAddMcpUsage(h)),x=yield G(c.generateContentStreamInternal(C)),I=[],N=[];try{for(var y=!0,w=(m=void 0,pt(x)),T;T=yield G(w.next()),p=T.done,!p;y=!0){S=T.value,y=!1;const b=S;if(yield yield G(b),b.candidates&&(!((E=b.candidates[0])===null||E===void 0)&&E.content)){N.push(b.candidates[0].content);for(const M of(_=b.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<o&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(M.functionCall.name)){const q=yield G(f.get(M.functionCall.name).callTool([M.functionCall]));I.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(b){m={error:b}}finally{try{!y&&!p&&(v=w.return)&&(yield G(v.call(w)))}finally{if(m)throw m.error}}if(I.length>0){s=!0;const b=new Qr;b.candidates=[{content:{role:"user",parts:I}}],yield yield G(b);const M=[];M.push(...N),M.push({role:"user",parts:I});const q=et(h.contents).concat(M);h.contents=q}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=Wf(this.apiClient,e);return a=L("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Kf(f),p=new Qr;return Object.assign(p,h),p})}else{const c=zf(this.apiClient,e);return a=L("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Jf(f),p=new Qr;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=Wf(this.apiClient,e);return a=L("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return ht(this,arguments,function*(){var p,m,v,S;try{for(var E=!0,_=pt(h),y;y=yield G(_.next()),p=y.done,!p;E=!0){S=y.value,E=!1;const w=S,T=Kf(yield G(w.json()),e);T.sdkHttpResponse={headers:w.headers};const C=new Qr;Object.assign(C,T),yield yield G(C)}}catch(w){m={error:w}}finally{try{!E&&!p&&(v=_.return)&&(yield G(v.call(_)))}finally{if(m)throw m.error}}})})}else{const c=zf(this.apiClient,e);return a=L("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return ht(this,arguments,function*(){var p,m,v,S;try{for(var E=!0,_=pt(h),y;y=yield G(_.next()),p=y.done,!p;E=!0){S=y.value,E=!1;const w=S,T=Jf(yield G(w.json()),e);T.sdkHttpResponse={headers:w.headers};const C=new Qr;Object.assign(C,T),yield yield G(C)}}catch(w){m={error:w}}finally{try{!E&&!p&&(v=_.return)&&(yield G(v.call(_)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=aT(this.apiClient,e);return a=L("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=uT(f),p=new kf;return Object.assign(p,h),p})}else{const c=sT(this.apiClient,e);return a=L("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=lT(f),p=new kf;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=wT(this.apiClient,e);return a=L("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ET(f),p=new Rf;return Object.assign(p,h),p})}else{const c=_T(this.apiClient,e);return a=L("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ST(f),p=new Rf;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=nT(this.apiClient,e);return o=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=rT(u),f=new aw;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=wC(this.apiClient,e);return o=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=SC(u),f=new lw;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=tC(this.apiClient,e);return o=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=nC(u),f=new uw;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=lC(this.apiClient,e);return o=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=uC(u),f=new cw;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=$T(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ul(f))}else{const c=FT(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Dl(f))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=KT(this.apiClient,e);return a=L("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=YT(f),p=new Nf;return Object.assign(p,h),p})}else{const c=JT(this.apiClient,e);return a=L("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=jT(f),p=new Nf;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=yC(this.apiClient,e);return a=L("{model}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ul(f))}else{const c=vC(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Dl(f))}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=XE(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=eT(f),p=new Pf;return Object.assign(p,h),p})}else{const c=QE(this.apiClient,e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ZE(f),p=new Pf;return Object.assign(p,h),p})}}async countTokens(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=KE(this.apiClient,e);return a=L("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=YE(f),p=new bf;return Object.assign(p,h),p})}else{const c=JE(this.apiClient,e);return a=L("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=jE(f),p=new bf;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=VE(this.apiClient,e);return o=L("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=GE(u),f=new dw;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=kT(this.apiClient,e);return a=L("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=IT(f),p=new hs;return Object.assign(p,h),p})}else{const c=AT(this.apiClient,e);return a=L("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=xT(f),p=new hs;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class px extends Ot{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=tw(e);return a=L("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const c=ew(e);return a=L("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=J_(e);return o=L("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mx(t){const e={},n=l(t,["data"]);if(n!=null&&d(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function gx(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xx(o))),d(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&d(e,["role"],r),e}function vx(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&d(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&d(n,["bidiGenerateContentSetup"],Cx(t,a));const u=l(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&d(n,["fieldMask"],u),r}function yx(t,e){const n={},r=l(e,["config"]);return r!=null&&d(n,["config"],vx(t,r,n)),n}function _x(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function wx(t){const e={},n=l(t,["id"]);n!=null&&d(e,["id"],n);const r=l(t,["args"]);r!=null&&d(e,["args"],r);const i=l(t,["name"]);if(i!=null&&d(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Sx(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Ex(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Tx(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const u=l(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=l(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],oc(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],m);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&d(e,["setup","systemInstruction"],gx(ke(v)));const S=l(t,["tools"]);if(e!==void 0&&S!=null){let x=Vr(S);Array.isArray(x)&&(x=x.map(I=>Ax($r(I)))),d(e,["setup","tools"],x)}const E=l(t,["sessionResumption"]);e!==void 0&&E!=null&&d(e,["setup","sessionResumption"],Ix(E));const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","inputAudioTranscription"],_);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&d(e,["setup","outputAudioTranscription"],y);const w=l(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&d(e,["setup","realtimeInputConfig"],w);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&d(e,["setup","contextWindowCompression"],T);const C=l(t,["proactivity"]);if(e!==void 0&&C!=null&&d(e,["setup","proactivity"],C),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Cx(t,e){const n={},r=l(e,["model"]);r!=null&&d(n,["setup","model"],W(t,r));const i=l(e,["config"]);return i!=null&&d(n,["config"],Tx(i,n)),n}function xx(t){const e={},n=l(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&d(e,["fileData"],_x(o));const s=l(t,["functionCall"]);s!=null&&d(e,["functionCall"],wx(s));const a=l(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&d(e,["inlineData"],mx(u));const c=l(t,["text"]);c!=null&&d(e,["text"],c);const f=l(t,["thought"]);f!=null&&d(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function Ix(t){const e={},n=l(t,["handle"]);if(n!=null&&d(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ax(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=l(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=l(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],Sx(s));const a=l(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],Ex(a));const u=l(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=l(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kx(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function Rx(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=kx(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Nx extends Ot{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=yx(this.apiClient,e);o=L("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const u=Rx(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Px(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function bx(t){const e={},n=l(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&Px(r,e),e}function Mx(t){const e={},n=l(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function Lx(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function Dx(t){const e={},n=l(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const r=l(t,["config"]);return r!=null&&Lx(r,e),e}function Ux(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=l(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ox extends Ot{constructor(e){super(),this.apiClient=e,this.list=async n=>new Gn(Dt.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Mx(e);return o=L("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=bx(e);i=L("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Dx(e);return o=L("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Ux(u),f=new fw;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fx extends Ot{constructor(e,n=new Ox(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Gn(Dt.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=kC(e);return o=L("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=PC(e);return o=L("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=NC(e);i=L("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OC(e);return o=L("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=FC(u),f=new hw;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$C(e);return o=L("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=VC(u),f=new pw;return Object.assign(f,c),f})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=LC(e);return o=L("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=MC(u),f=new ec;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Cg=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Cg=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const $x=()=>Cg();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fl(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const $l=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rt extends Error{}class Me extends rt{constructor(e,n,r,i){super(`${Me.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Bs({message:r,cause:$l(n)});const o=n;return e===400?new Ig(e,o,r,i):e===401?new Ag(e,o,r,i):e===403?new kg(e,o,r,i):e===404?new Rg(e,o,r,i):e===409?new Ng(e,o,r,i):e===422?new Pg(e,o,r,i):e===429?new bg(e,o,r,i):e>=500?new Mg(e,o,r,i):new Me(e,o,r,i)}}class Vl extends Me{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Bs extends Me{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xg extends Bs{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ig extends Me{}class Ag extends Me{}class kg extends Me{}class Rg extends Me{}class Ng extends Me{}class Pg extends Me{}class bg extends Me{}class Mg extends Me{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vx=/^[a-z][a-z0-9+.-]*:/i,Gx=t=>Vx.test(t);let Gl=t=>(Gl=Array.isArray,Gl(t));const Bx=Gl;let Hx=Bx;const eh=Hx;function qx(t){if(!t)return!0;for(const e in t)return!1;return!0}function zx(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Wx=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new rt(`${t} must be an integer`);if(e<0)throw new rt(`${t} must be a positive integer`);return e},Jx=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kx=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Yx=()=>{var t,e,n,r,i;const o=jx();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":nh(Deno.build.os),"X-Stainless-Arch":th(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":nh((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":th((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=Qx();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Qx(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const th=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",nh=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let go;const Xx=()=>go??(go=Yx());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Lg(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function eI(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Lg({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Dg(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tI(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nI=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ug=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ta(t,e,n){return Ug(),new File(t,e??"unknown_file",n)}function rI(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const iI=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Og=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",oI=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Og(t),sI=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function aI(t,e,n){if(Ug(),t=await t,oI(t))return t instanceof File?t:Ta([await t.arrayBuffer()],t.name);if(sI(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ta(await Bl(i),e,n)}const r=await Bl(t);if(e||(e=rI(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return Ta(r,e,n)}async function Bl(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(Og(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(iI(t))try{for(var a=!0,u=pt(t),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const f=i;s.push(...await Bl(f))}}catch(f){n={error:f}}finally{try{!a&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const f=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${lI(t)}`)}return s}function lI(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fg{constructor(e){this._client=e}}Fg._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $g(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const rh=Object.freeze(Object.create(null)),uI=(t=$g)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((f,h,p)=>{var m,v,S;/[?#]/.test(h)&&(i=!0);const E=r[p];let _=(i?encodeURIComponent:t)(""+E);return p!==r.length&&(E==null||typeof E=="object"&&E.toString===((S=Object.getPrototypeOf((v=Object.getPrototypeOf((m=E.hasOwnProperty)!==null&&m!==void 0?m:rh))!==null&&v!==void 0?v:rh))===null||S===void 0?void 0:S.toString))&&(_=E+"",o.push({start:f.length+h.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+h+(p===r.length?"":_)},""),a=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(a))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((f,h)=>f.start-h.start),o.length>0){let f=0;const h=o.reduce((p,m)=>{const v=" ".repeat(m.start-f),S="^".repeat(m.length);return f=m.start+m.length,p+v+S},"");throw new rt(`Path parameters result in path with invalid segments:
${o.map(p=>p.error).join(`
`)}
${s}
${h}`)}return s},vo=uI($g);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vg extends Fg{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=ms(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new rt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new rt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(vo`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(vo`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(vo`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=ms(o,["api_version"]);return this._client.get(vo`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}Vg._key=Object.freeze(["interactions"]);class Gg extends Vg{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cI(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let yo;function ac(t){let e;return(yo??(e=new globalThis.TextEncoder,yo=e.encode.bind(e)))(t)}let _o;function ih(t){let e;return(_o??(e=new globalThis.TextDecoder,_o=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hs{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ac(e):e;this.buffer=cI([this.buffer,n]);const r=[];let i;for(;(i=dI(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(ih(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=ih(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Hs.NEWLINE_CHARS=new Set([`
`,"\r"]);Hs.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dI(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function fI(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gs={off:0,error:200,warn:300,info:400,debug:500},oh=(t,e,n)=>{if(t){if(zx(gs,t))return t;Ne(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(gs))}`)}};function ii(){}function wo(t,e,n){return!e||gs[t]>gs[n]?ii:e[t].bind(e)}const hI={error:ii,warn:ii,info:ii,debug:ii};let sh=new WeakMap;function Ne(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return hI;const i=sh.get(n);if(i&&i[0]===r)return i[1];const o={error:wo("error",n,r),warn:wo("warn",n,r),info:wo("info",n,r),debug:wo("debug",n,r)};return sh.set(n,[r,o]),o}const Sn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gr{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?Ne(r):console;function s(){return ht(this,arguments,function*(){var u,c,f,h;if(i)throw new rt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var m=!0,v=pt(pI(e,n)),S;S=yield G(v.next()),u=S.done,!u;m=!0){h=S.value,m=!1;const E=h;if(!p)if(E.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield G(JSON.parse(E.data))}catch(_){throw o.error("Could not parse message into JSON:",E.data),o.error("From chunk:",E.raw),_}}}catch(E){c={error:E}}finally{try{!m&&!u&&(f=v.return)&&(yield G(f.call(v)))}finally{if(c)throw c.error}}p=!0}catch(E){if(Fl(E))return yield G(void 0);throw E}finally{p||n.abort()}})}return new gr(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return ht(this,arguments,function*(){var u,c,f,h;const p=new Hs,m=Dg(e);try{for(var v=!0,S=pt(m),E;E=yield G(S.next()),u=E.done,!u;v=!0){h=E.value,v=!1;const _=h;for(const y of p.decode(_))yield yield G(y)}}catch(_){c={error:_}}finally{try{!v&&!u&&(f=S.return)&&(yield G(f.call(S)))}finally{if(c)throw c.error}}for(const _ of p.flush())yield yield G(_)})}function s(){return ht(this,arguments,function*(){var u,c,f,h;if(i)throw new rt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var m=!0,v=pt(o()),S;S=yield G(v.next()),u=S.done,!u;m=!0){h=S.value,m=!1;const E=h;p||E&&(yield yield G(JSON.parse(E)))}}catch(E){c={error:E}}finally{try{!m&&!u&&(f=v.return)&&(yield G(f.call(v)))}finally{if(c)throw c.error}}p=!0}catch(E){if(Fl(E))return yield G(void 0);throw E}finally{p||n.abort()}})}return new gr(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new gr(()=>i(e),this.controller,this.client),new gr(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Lg({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=ac(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function pI(t,e){return ht(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new rt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new rt("Attempted to iterate over a response with no body");const a=new gI,u=new Hs,c=Dg(t.body);try{for(var f=!0,h=pt(mI(c)),p;p=yield G(h.next()),r=p.done,!r;f=!0){s=p.value,f=!1;const m=s;for(const v of u.decode(m)){const S=a.decode(v);S&&(yield yield G(S))}}}catch(m){i={error:m}}finally{try{!f&&!r&&(o=h.return)&&(yield G(o.call(h)))}finally{if(i)throw i.error}}for(const m of u.flush()){const v=a.decode(m);v&&(yield yield G(v))}})}function mI(t){return ht(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,u=pt(t),c;c=yield G(u.next()),n=c.done,!n;a=!0){o=c.value,a=!1;const f=o;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?ac(f):f;let p=new Uint8Array(s.length+h.length);p.set(s),p.set(h,s.length),s=p;let m;for(;(m=fI(s))!==-1;)yield yield G(s.slice(0,m)),s=s.slice(m)}}catch(f){r={error:f}}finally{try{!a&&!n&&(i=u.return)&&(yield G(i.call(u)))}finally{if(r)throw r.error}}s.length>0&&(yield yield G(s))})}class gI{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=vI(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function vI(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yI(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return Ne(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):gr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),c=(a=u==null?void 0:u.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return Ne(t).debug(`[${r}] response parsed`,Sn({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lc extends Promise{constructor(e,n,r=yI){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new lc(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bg=Symbol("brand.privateNullableHeaders");function*_I(t){if(!t)return;if(Bg in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():eh(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=eh(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Xr=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of _I(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[Bg]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ca=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=G_)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hg;class qs{constructor(e){var n,r,i,o,s,a,u,{baseURL:c=Ca("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Ca("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,p=ms(e,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:f,apiVersion:h},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(r=m.timeout)!==null&&r!==void 0?r:qs.DEFAULT_TIMEOUT,this.logger=(i=m.logger)!==null&&i!==void 0?i:console;const v="warn";this.logLevel=v,this.logLevel=(s=(o=oh(m.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:oh(Ca("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:v,this.fetchOptions=m.fetchOptions,this.maxRetries=(a=m.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(u=m.fetch)!==null&&u!==void 0?u:Zx(),this.encoder=nI,this._options=m,this.apiKey=f,this.apiVersion=h,this.clientAdapter=m.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Xr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Xr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new rt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Zn}`}defaultIdempotencyKey(){return`stainless-node-retry-${$x()}`}makeStatusError(e,n,r,i){return Me.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=Gx(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return qx(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new lc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,u=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=u),await this.prepareOptions(a);const{req:c,url:f,timeout:h}=await this.buildRequest(a,{retryCount:u-n});await this.prepareRequest(c,{url:f,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(Ne(this).debug(`[${p}] sending request`,Sn({retryOfRequestLogID:r,method:a.method,url:f,options:a,headers:c.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Vl;const S=new AbortController,E=await this.fetchWithTimeout(f,c,h,S).catch($l),_=Date.now();if(E instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Vl;const T=Fl(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return Ne(this).info(`[${p}] connection ${T?"timed out":"failed"} - ${w}`),Ne(this).debug(`[${p}] connection ${T?"timed out":"failed"} (${w})`,Sn({retryOfRequestLogID:r,url:f,durationMs:_-v,message:E.message})),this.retryRequest(a,n,r??p);throw Ne(this).info(`[${p}] connection ${T?"timed out":"failed"} - error; no more retries left`),Ne(this).debug(`[${p}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Sn({retryOfRequestLogID:r,url:f,durationMs:_-v,message:E.message})),T?new xg:new Bs({cause:E})}const y=`[${p}${m}] ${c.method} ${f} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${_-v}ms`;if(!E.ok){const w=await this.shouldRetry(E);if(n&&w){const b=`retrying, ${n} attempts remaining`;return await tI(E.body),Ne(this).info(`${y} - ${b}`),Ne(this).debug(`[${p}] response error (${b})`,Sn({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:_-v})),this.retryRequest(a,n,r??p,E.headers)}const T=w?"error; no more retries left":"error; not retryable";Ne(this).info(`${y} - ${T}`);const C=await E.text().catch(b=>$l(b).message),x=Jx(C),I=x?void 0:C;throw Ne(this).debug(`[${p}] response error (${T})`,Sn({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,message:I,durationMs:Date.now()-v})),this.makeStatusError(E.status,x,I,E.headers)}return Ne(this).info(y),Ne(this).debug(`[${p}] response start`,Sn({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:_-v})),{response:E,options:a,controller:S,requestLogID:p,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,u=ms(o,["signal","method"]),c=i.abort.bind(i);s&&s.addEventListener("abort",c,{once:!0});const f=setTimeout(c,r),h=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,p=Object.assign(Object.assign(Object.assign({signal:i.signal},h?{duplex:"half"}:{}),{method:"GET"}),u);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(s=c)}const u=i==null?void 0:i.get("retry-after");if(u&&!s){const c=parseFloat(u);Number.isNaN(c)?s=Date.parse(u)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Kx(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:u,query:c,defaultBaseURL:f}=s,h=this.buildURL(u,c,f);"timeout"in s&&Wx("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:p,body:m}=this.buildBody({options:s}),v=await this.buildHeaders({options:e,method:a,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Xr([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Xx()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Xr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:eI(e)}:this.encoder({body:e,headers:r})}}qs.DEFAULT_TIMEOUT=6e4;class _e extends qs{constructor(){super(...arguments),this.interactions=new Gg(this)}}Hg=_e;_e.GeminiNextGenAPIClient=Hg;_e.GeminiNextGenAPIClientError=rt;_e.APIError=Me;_e.APIConnectionError=Bs;_e.APIConnectionTimeoutError=xg;_e.APIUserAbortError=Vl;_e.NotFoundError=Rg;_e.ConflictError=Ng;_e.RateLimitError=bg;_e.BadRequestError=Ig;_e.AuthenticationError=Ag;_e.InternalServerError=Mg;_e.PermissionDeniedError=kg;_e.UnprocessableEntityError=Pg;_e.toFile=aI;_e.Interactions=Gg;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wI(t,e){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function SI(t,e){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function EI(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function TI(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function CI(t,e,n){const r={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=l(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&d(e,["displayName"],i),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=l(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);const s=l(t,["learningRateMultiplier"]);if(s!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(l(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(l(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const a=l(t,["batchSize"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","batchSize"],a);const u=l(t,["learningRate"]);if(e!==void 0&&u!=null&&d(e,["tuningTask","hyperparameters","learningRate"],u),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(l(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(l(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(l(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(l(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function xI(t,e,n){const r={};let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const C=l(t,["validationDataset"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec"],xa(C))}else if(i==="PREFERENCE_TUNING"){const C=l(t,["validationDataset"]);e!==void 0&&C!=null&&d(e,["preferenceOptimizationSpec"],xa(C))}else if(i==="DISTILLATION"){const C=l(t,["validationDataset"]);e!==void 0&&C!=null&&d(e,["distillationSpec"],xa(C))}const o=l(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);const s=l(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const C=l(t,["epochCount"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(a==="PREFERENCE_TUNING"){const C=l(t,["epochCount"]);e!==void 0&&C!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}else if(a==="DISTILLATION"){const C=l(t,["epochCount"]);e!==void 0&&C!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],C)}let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const C=l(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(u==="PREFERENCE_TUNING"){const C=l(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}else if(u==="DISTILLATION"){const C=l(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],C)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const C=l(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(c==="PREFERENCE_TUNING"){const C=l(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}else if(c==="DISTILLATION"){const C=l(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],C)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=l(t,["adapterSize"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(f==="PREFERENCE_TUNING"){const C=l(t,["adapterSize"]);e!==void 0&&C!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}else if(f==="DISTILLATION"){const C=l(t,["adapterSize"]);e!==void 0&&C!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],C)}let h=l(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=l(t,["tuningMode"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec","tuningMode"],C)}const p=l(t,["customBaseModel"]);e!==void 0&&p!=null&&d(e,["customBaseModel"],p);let m=l(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const C=l(t,["batchSize"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],C)}let v=l(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const C=l(t,["learningRate"]);e!==void 0&&C!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],C)}const S=l(t,["labels"]);e!==void 0&&S!=null&&d(e,["labels"],S);const E=l(t,["beta"]);e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],E);const _=l(t,["baseTeacherModel"]);e!==void 0&&_!=null&&d(e,["distillationSpec","baseTeacherModel"],_);const y=l(t,["tunedTeacherModelSource"]);e!==void 0&&y!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],y);const w=l(t,["sftLossWeightMultiplier"]);e!==void 0&&w!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],w);const T=l(t,["outputUri"]);return e!==void 0&&T!=null&&d(e,["outputUri"],T),r}function II(t,e){const n={},r=l(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=l(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);const o=l(t,["trainingDataset"]);o!=null&&OI(o);const s=l(t,["config"]);return s!=null&&CI(s,n),n}function AI(t,e){const n={},r=l(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=l(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);const o=l(t,["trainingDataset"]);o!=null&&FI(o,n,e);const s=l(t,["config"]);return s!=null&&xI(s,n,e),n}function kI(t,e){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function RI(t,e){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function NI(t,e,n){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function PI(t,e,n){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function bI(t,e){const n={},r=l(t,["config"]);return r!=null&&NI(r,n),n}function MI(t,e){const n={},r=l(t,["config"]);return r!=null&&PI(r,n),n}function LI(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=l(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>qg(a))),d(n,["tuningJobs"],s)}return n}function DI(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=l(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Hl(a))),d(n,["tuningJobs"],s)}return n}function UI(t,e){const n={},r=l(t,["name"]);r!=null&&d(n,["model"],r);const i=l(t,["name"]);return i!=null&&d(n,["endpoint"],i),n}function OI(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(n,["examples","examples"],i)}return n}function FI(t,e,n){const r={};let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function qg(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&d(n,["name"],i);const o=l(t,["state"]);o!=null&&d(n,["state"],sg(o));const s=l(t,["createTime"]);s!=null&&d(n,["createTime"],s);const a=l(t,["tuningTask","startTime"]);a!=null&&d(n,["startTime"],a);const u=l(t,["tuningTask","completeTime"]);u!=null&&d(n,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=l(t,["description"]);f!=null&&d(n,["description"],f);const h=l(t,["baseModel"]);h!=null&&d(n,["baseModel"],h);const p=l(t,["_self"]);return p!=null&&d(n,["tunedModel"],UI(p)),n}function Hl(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&d(n,["name"],i);const o=l(t,["state"]);o!=null&&d(n,["state"],sg(o));const s=l(t,["createTime"]);s!=null&&d(n,["createTime"],s);const a=l(t,["startTime"]);a!=null&&d(n,["startTime"],a);const u=l(t,["endTime"]);u!=null&&d(n,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=l(t,["error"]);f!=null&&d(n,["error"],f);const h=l(t,["description"]);h!=null&&d(n,["description"],h);const p=l(t,["baseModel"]);p!=null&&d(n,["baseModel"],p);const m=l(t,["tunedModel"]);m!=null&&d(n,["tunedModel"],m);const v=l(t,["preTunedModel"]);v!=null&&d(n,["preTunedModel"],v);const S=l(t,["supervisedTuningSpec"]);S!=null&&d(n,["supervisedTuningSpec"],S);const E=l(t,["preferenceOptimizationSpec"]);E!=null&&d(n,["preferenceOptimizationSpec"],E);const _=l(t,["distillationSpec"]);_!=null&&d(n,["distillationSpec"],_);const y=l(t,["tuningDataStats"]);y!=null&&d(n,["tuningDataStats"],y);const w=l(t,["encryptionSpec"]);w!=null&&d(n,["encryptionSpec"],w);const T=l(t,["partnerModelTuningSpec"]);T!=null&&d(n,["partnerModelTuningSpec"],T);const C=l(t,["customBaseModel"]);C!=null&&d(n,["customBaseModel"],C);const x=l(t,["experiment"]);x!=null&&d(n,["experiment"],x);const I=l(t,["labels"]);I!=null&&d(n,["labels"],I);const N=l(t,["outputUri"]);N!=null&&d(n,["outputUri"],N);const b=l(t,["pipelineJob"]);b!=null&&d(n,["pipelineJob"],b);const M=l(t,["serviceAccount"]);M!=null&&d(n,["serviceAccount"],M);const q=l(t,["tunedModelDisplayName"]);q!=null&&d(n,["tunedModelDisplayName"],q);const se=l(t,["veoTuningSpec"]);return se!=null&&d(n,["veoTuningSpec"],se),n}function $I(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&d(n,["name"],i);const o=l(t,["metadata"]);o!=null&&d(n,["metadata"],o);const s=l(t,["done"]);s!=null&&d(n,["done"],s);const a=l(t,["error"]);return a!=null&&d(n,["error"],a),n}function xa(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return i!=null&&d(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VI extends Ot{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gn(Dt.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Nl.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=RI(e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>Hl(f))}else{const c=kI(e);return a=L("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>qg(f))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=MI(e);return a=L("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=DI(f),p=new Mf;return Object.assign(p,h),p})}else{const c=bI(e);return a=L("tunedModels",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=LI(f),p=new Mf;return Object.assign(p,h),p})}}async cancel(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=SI(e);return a=L("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=TI(f),p=new Lf;return Object.assign(p,h),p})}else{const c=wI(e);return a=L("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=EI(f),p=new Lf;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=AI(e,e);return o=L("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>Hl(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=II(e);return o=L("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>$I(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GI{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const BI=1024*1024*8,HI=3,qI=1e3,zI=2,vs="x-goog-upload-status";async function WI(t,e,n){var r;const i=await zg(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[vs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function JI(t,e,n){var r;const i=await zg(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[vs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=eg(o),a=new tc;return Object.assign(a,s),a}async function zg(t,e,n){var r,i;let o=0,s=0,a=new bl(new Response),u="upload";for(o=t.size;s<o;){const c=Math.min(BI,o-s),f=t.slice(s,s+c);s+c>=o&&(u+=", finalize");let h=0,p=qI;for(;h<HI&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[vs]));)h++,await jI(p),p=p*zI;if(s+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[vs])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function KI(t){return{size:t.size,type:t.type}}function jI(t){return new Promise(e=>setTimeout(e,t))}class YI{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WI(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JI(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QI{create(e,n,r){return new XI(e,n,r)}}class XI{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ah="x-goog-api-key";class ZI{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(ah)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ah,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eA="gl-node/";class zn{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new _e({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=z_(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new ZI(this.apiKey);this.apiClient=new KC({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:eA+"web",uploader:new YI,downloader:new GI}),this.models=new hx(this.apiClient),this.live=new ax(this.apiClient,i,new QI),this.batches=new SS(this.apiClient),this.chats=new nE(this.models,this.apiClient),this.caches=new ZS(this.apiClient),this.files=new pE(this.apiClient),this.operations=new px(this.apiClient),this.authTokens=new Nx(this.apiClient),this.tunings=new VI(this.apiClient),this.fileSearchStores=new Fx(this.apiClient)}}const Wn=()=>"AIzaSyDCGbTurcNSwQJMKkdyZ7mIoageboCiHI8".trim()||"";function tA(t){let e="";const n=t.byteLength;for(let r=0;r<n;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function nA(t){const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}async function rA(t,e,n,r){const i=new Int16Array(t.buffer),o=i.length/r,s=e.createBuffer(r,o,n);for(let a=0;a<r;a++){const u=s.getChannelData(a);for(let c=0;c<o;c++)u[c]=i[c*r+a]/32768}return s}const St={connectAdminLive:t=>new zn({apiKey:Wn()}).live.connect({model:"gemini-1.5-flash",callbacks:t,config:{responseModalities:[Lr.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}},systemInstruction:`Eres el Director de Gihart & Hersel. 
        Gestionas moda, pero tambin CUADROS, PINTURAS y VIDEOS de arte.
        Si el usuario habla de "piezas", se refiere a obras de arte o prendas exclusivas.
        Ayuda a organizar el inventario masivo de forma eficiente.`}}),generateVoiceResponse:async t=>{var n,r,i,o,s,a;const e=new zn({apiKey:Wn()});try{return(a=(s=(o=(i=(r=(n=(await e.models.generateContent({model:"gemini-1.5-flash",contents:[{parts:[{text:`Vendedor de arte y moda de lujo: ${t}`}]}],config:{responseModalities:[Lr.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:n[0])==null?void 0:r.content)==null?void 0:i.parts)==null?void 0:o[0])==null?void 0:s.inlineData)==null?void 0:a.data}catch{return null}},chat:async(t,e,n)=>{const r=new zn({apiKey:Wn()});try{const i=t.map(s=>({role:s.role==="user"?"user":"model",parts:[{text:s.text}]}));return i.push({role:"user",parts:[{text:e}]}),{text:(await r.models.generateContent({model:"gemini-1.5-flash",contents:i,config:{systemInstruction:`Eres el Curador Maestro de Gihart & Hersel.
          Tu misin es ayudar al administrador a gestionar un inventario de lujo (Moda, Cuadros, Pinturas, Videos).
          
          TAREAS ESPECFICAS:
          1. Generar reseas persuasivas y elegantes para los productos.
          2. Crear publicaciones para Facebook Marketplace que sean "seguras" (evita mencionar marcas explcitamente si esto puede causar baneos por logos, enfcate en la calidad, materiales y estilo "Old Money" / "Luxury").
          3. Ayudar a organizar el inventario masivo.
          
          INVENTARIO ACTUAL: ${n}
          REGLA: Si el cliente pregunta por algo que no est, ofrece una pieza similar.
          Siempre dirige al cierre de venta en WhatsApp. No des respuestas vacas.`,tools:[{googleSearch:{}}]}})).text}}catch(i){throw console.error("Chat Error:",i),i}},getQuickSuggestion:async t=>{const e=new zn({apiKey:Wn()});try{return(await e.models.generateContent({model:"gemini-1.5-flash",contents:`Sugerencia de estilo/arte (10 palabras): ${t}`})).text}catch{return"El arte y la moda definen tu legado."}},generateImage:async(t,e,n)=>{var a,u;const s=(a=(await new zn({apiKey:Wn()}).models.generateContent({model:"gemini-1.5-flash",contents:{parts:[{text:t}]},config:{imageConfig:{aspectRatio:e}}})).candidates)==null?void 0:a[0];if((u=s==null?void 0:s.content)!=null&&u.parts){for(const c of s.content.parts)if(c.inlineData)return`data:${c.inlineData.mimeType||"image/png"};base64,${c.inlineData.data}`}throw new Error("No image generated by the model")},editImage:async(t,e)=>{var a,u;const n=new zn({apiKey:Wn()});let r="image/png",i=t;if(t.includes(",")){const[c,f]=t.split(","),h=c.match(/:(.*?);/);h&&(r=h[1]),i=f}const s=(a=(await n.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{data:i,mimeType:r}},{text:e}]}})).candidates)==null?void 0:a[0];if((u=s==null?void 0:s.content)!=null&&u.parts){for(const c of s.content.parts)if(c.inlineData)return`data:${c.inlineData.mimeType||"image/png"};base64,${c.inlineData.data}`}throw new Error("No edited image returned by the model")},utils:{decode:nA,decodeAudioData:rA,encode:tA}},iA=()=>{const[t,e]=A.useState("Elevando el estilo masculino..."),[n,r]=A.useState(!0);return A.useEffect(()=>{r(!0),St.getQuickSuggestion("mens high fashion trends").then(i=>{e(i??"Elevando el estilo masculino..."),r(!1)}).catch(()=>{e("El arte y la moda definen tu legado."),r(!1)})},[]),g.jsxs("div",{className:"space-y-32 pb-20 overflow-x-hidden",children:[g.jsx("div",{className:"bg-white/5 border-y border-white/5 py-4 overflow-hidden select-none",children:g.jsx("div",{className:"animate-marquee whitespace-nowrap flex items-center gap-20",children:[...Array(10)].map((i,o)=>g.jsxs("span",{className:"text-[10px] font-black uppercase tracking-[0.8em] text-white/40 flex items-center gap-4",children:[g.jsx("span",{className:"text-pink-500",children:""})," TRENDY ONLINE 2025 MASTER COLLECTION ",g.jsx("span",{className:"text-cyan-400",children:""})," LUXURY APPAREL"]},o))})}),g.jsxs("section",{className:"relative rounded-3xl md:rounded-[50px] overflow-hidden h-[500px] md:h-[650px] lg:h-[750px] flex items-center group animate-fade-in",children:[g.jsx("img",{src:"https://images.unsplash.com/photo-1550246140-5119ae4790b8?auto=format&fit=crop&q=80&w=2000",alt:"Estilo de lujo masculino",loading:"lazy",className:"absolute inset-0 w-full h-full object-cover opacity-50 scale-110 group-hover:scale-100 transition-transform duration-[4000ms] ease-out"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/40 to-transparent"}),g.jsxs("div",{className:"relative z-10 max-w-4xl mx-4 md:mx-8 lg:ml-16 space-y-8 md:space-y-12",children:[g.jsx("div",{className:"animate-float",children:g.jsx("span",{className:"accent-gradient text-white px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-[0.4em] shadow-2xl",children:"Nivel Maestro 2025"})}),g.jsxs("h1",{className:"text-5xl sm:text-7xl lg:text-9xl font-black tracking-tighter leading-[0.8] drop-shadow-2xl",children:["FORJA TU ",g.jsx("br",{}),g.jsx("span",{className:"text-gradient",children:"LEGADO."})]}),g.jsx("p",{className:"text-2xl text-gray-300 max-w-xl font-light leading-relaxed",children:"La curadura perfecta para el hombre que no busca destacar, sino ser recordado."}),g.jsxs("div",{className:"flex gap-8",children:[g.jsx(Ue,{to:"/shop",className:"accent-gradient text-white px-14 py-6 rounded-full font-black text-sm uppercase tracking-widest hover:scale-105 transition-all shadow-2xl shadow-pink-500/30 ring-2 ring-white/10",children:"Ver Coleccin"}),g.jsx(Ue,{to:"/gallery",className:"bg-white/5 backdrop-blur-xl border border-white/10 text-white px-14 py-6 rounded-full font-black text-sm uppercase tracking-widest hover:bg-white/10 transition-all",children:"Ver Lookbook"})]})]})]}),g.jsxs("section",{className:"glass rounded-[40px] p-16 flex flex-col md:flex-row items-center gap-12 relative overflow-hidden group",children:[g.jsx("div",{className:"absolute -top-24 -right-24 w-80 h-80 accent-gradient rounded-full blur-[120px] opacity-10 group-hover:opacity-30 transition-all duration-1000"}),g.jsx("div",{className:"accent-gradient p-6 rounded-[2rem] shadow-2xl shadow-pink-500/40 rotate-12 group-hover:rotate-0 transition-transform",children:g.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-7.714 2.143L11 21l-2.286-6.857L1 12l7.714-2.143L11 3z"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"text-cyan-400 font-black uppercase tracking-[0.5em] text-[11px] mb-4",children:"Insider Insight"}),n?g.jsx("p",{className:"text-2xl md:text-4xl text-white/60 font-black tracking-tighter leading-none animate-pulse",children:"Cargando insight..."}):g.jsxs("p",{className:"text-2xl md:text-4xl text-white font-black tracking-tighter leading-none",children:["",t,""]})]})]}),g.jsxs("section",{children:[g.jsx("div",{className:"flex justify-between items-end mb-20",children:g.jsxs("div",{className:"space-y-2",children:[g.jsxs("h2",{className:"text-6xl font-black tracking-tighter uppercase italic",children:["Essential ",g.jsx("span",{className:"text-gradient",children:"Drops"})]}),g.jsx("p",{className:"text-gray-500 text-lg uppercase font-bold tracking-widest",children:"Limitados. Premium. nicos."})]})}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[{name:"Polos Luxury",img:"https://images.unsplash.com/photo-1598533022411-ad4b23659397?auto=format&fit=crop&q=80&w=800",cat:"Polos"},{name:"Essential Tees",img:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&q=80&w=800",cat:"Playeras"},{name:"Masters Gear",img:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&q=80&w=800",cat:"Accesorios"}].map((i,o)=>g.jsxs("div",{className:"group relative",children:[g.jsxs("div",{className:"aspect-[4/5] rounded-[40px] overflow-hidden mb-8 bg-white/5 border border-white/5 shadow-2xl",children:[g.jsx("img",{src:i.img,alt:i.name,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-110"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all flex items-end p-12",children:g.jsxs(Ue,{to:"/shop",className:"w-full py-5 glass text-white rounded-2xl font-black text-xs uppercase tracking-widest text-center hover:bg-white hover:text-black transition-all",children:["Ver ",i.cat]})})]}),g.jsx("h3",{className:"text-3xl font-black tracking-tighter",children:i.name}),g.jsx("p",{className:"text-gray-600 font-black text-[10px] uppercase tracking-widest mt-1",children:"Calidad Garantizada"})]},o))})]})]})};function zs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function oA(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(h){s(h)}}function u(f){try{c(r.throw(f))}catch(h){s(h)}}function c(f){f.done?o(f.value):i(f.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}const sA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class uc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class aA extends uc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lh extends uc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class uh extends uc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ql;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ql||(ql={}));class lA{constructor(e,{headers:n={},customFetch:r,region:i=ql.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=sA(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return oA(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{const{headers:a,method:u,body:c,signal:f,timeout:h}=r;let p={},{region:m}=r;m||(m=this.region);const v=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,v.searchParams.set("forceFunctionRegion",m));let S;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",S=c):typeof c=="string"?(p["Content-Type"]="text/plain",S=c):typeof FormData<"u"&&c instanceof FormData?S=c:(p["Content-Type"]="application/json",S=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?S=JSON.stringify(c):S=c;let E=f;h&&(s=new AbortController,o=setTimeout(()=>s.abort(),h),f?(E=s.signal,f.addEventListener("abort",()=>s.abort())):E=s.signal);const _=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:S,signal:E}).catch(C=>{throw new aA(C)}),y=_.headers.get("x-relay-error");if(y&&y==="true")throw new lh(_);if(!_.ok)throw new uh(_);let w=((i=_.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return w==="application/json"?T=yield _.json():w==="application/octet-stream"||w==="application/pdf"?T=yield _.blob():w==="text/event-stream"?T=_:w==="multipart/form-data"?T=yield _.formData():T=yield _.text(),{data:T,error:null,response:_}}catch(a){return{data:null,error:a,response:a instanceof uh||a instanceof lh?a.context:void 0}}finally{o&&clearTimeout(o)}})}}var uA=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},cA=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let s=null,a=null,u=null,c=o.status,f=o.statusText;if(o.ok){var h,p;if(n.method!=="HEAD"){var m;const _=await o.text();_===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?a=_:a=JSON.parse(_))}const S=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),E=(p=o.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");S&&E&&E.length>1&&(u=parseInt(E[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,u=null,c=406,f="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const S=await o.text();try{s=JSON.parse(S),Array.isArray(s)&&o.status===404&&(a=[],s=null,c=200,f="OK")}catch{o.status===404&&S===""?(c=204,f="No Content"):s={message:S}}if(s&&n.isMaybeSingle&&(!(s==null||(v=s.details)===null||v===void 0)&&v.includes("0 rows"))&&(s=null,c=200,f="OK"),s&&n.shouldThrowOnError)throw new uA(s)}return{error:s,data:a,count:u,status:c,statusText:f}});return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",u="",c="";const f=o==null?void 0:o.cause;if(f){var h,p,m,v;const _=(h=f==null?void 0:f.message)!==null&&h!==void 0?h:"",y=(p=f==null?void 0:f.code)!==null&&p!==void 0?p:"";a=`${(m=o==null?void 0:o.name)!==null&&m!==void 0?m:"FetchError"}: ${o==null?void 0:o.message}`,a+=`

Caused by: ${(v=f==null?void 0:f.name)!==null&&v!==void 0?v:"Error"}: ${_}`,y&&(a+=` (${y})`),f!=null&&f.stack&&(a+=`
${f.stack}`)}else{var S;a=(S=o==null?void 0:o.stack)!==null&&S!==void 0?S:""}const E=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(c="",u="Request was aborted (timeout or manual cancellation)",E>this.urlLengthLimit&&(u+=`. Note: Your request URL is ${E} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((f==null?void 0:f.name)==="HeadersOverflowError"||(f==null?void 0:f.code)==="UND_ERR_HEADERS_OVERFLOW")&&(c="",u="HTTP headers exceeded server limits (typically 16KB)",E>this.urlLengthLimit&&(u+=`. Your request URL is ${E} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(s=o==null?void 0:o.name)!==null&&s!==void 0?s:"FetchError"}: ${o==null?void 0:o.message}`,details:a,hint:u,code:c},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},dA=class extends cA{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ch=new RegExp("[,()]");var er=class extends dA{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ch.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ch.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},fA=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const s=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join(""),{url:a,headers:u}=this.cloneRequestState();return a.searchParams.set("select",s),r&&u.append("Prefer",`count=${r}`),new er({method:i,url:a,headers:u,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:s}=this.cloneRequestState();if(e&&s.append("Prefer",`count=${e}`),n||s.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);o.searchParams.set("columns",u.join(","))}}return new er({method:i,url:o,headers:s,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const s="POST",{url:a,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&u.append("Prefer",`count=${r}`),i||u.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(c.length>0){const f=[...new Set(c)].map(h=>`"${h}"`);a.searchParams.set("columns",f.join(","))}}return new er({method:s,url:a,headers:u,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new er({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new er({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Oi(t){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oi(t)}function hA(t,e){if(Oi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pA(t){var e=hA(t,"string");return Oi(e)=="symbol"?e:e+""}function mA(t,e,n){return(e=pA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function So(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dh(Object(n),!0).forEach(function(r){mA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var gA=class Wg{constructor(e,{headers:n={},schema:r,fetch:i,timeout:o,urlLengthLimit:s=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=s;const a=i??globalThis.fetch;o!==void 0&&o>0?this.fetch=(u,c)=>{const f=new AbortController,h=setTimeout(()=>f.abort(),o),p=c==null?void 0:c.signal;if(p){if(p.aborted)return clearTimeout(h),a(u,c);const m=()=>{clearTimeout(h),f.abort()};return p.addEventListener("abort",m,{once:!0}),a(u,So(So({},c),{},{signal:f.signal})).finally(()=>{clearTimeout(h),p.removeEventListener("abort",m)})}return a(u,So(So({},c),{},{signal:f.signal})).finally(()=>clearTimeout(h))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new fA(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new Wg(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let a;const u=new URL(`${this.url}/rpc/${e}`);let c;const f=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(f)),h=r&&Object.values(n).some(f);h?(a="POST",c=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{u.searchParams.append(m,v)})):(a="POST",c=n);const p=new Headers(this.headers);return h?p.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&p.set("Prefer",`count=${o}`),new er({method:a,url:u,headers:p,schema:this.schemaName,body:c,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}};class vA{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const yA="2.95.3",_A=`realtime-js/${yA}`,wA="1.0.0",Jg="2.0.0",fh=Jg,zl=1e4,SA=1e3,EA=100;var Ht;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ht||(Ht={}));var pe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pe||(pe={}));var ut;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ut||(ut={}));var Wl;(function(t){t.websocket="websocket"})(Wl||(Wl={}));var Tn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Tn||(Tn={}));class TA{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,n,r){var i,o;const s=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",u=(o=e.join_ref)!==null&&o!==void 0?o:"",c=e.payload.event,f=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(f).length===0?"":JSON.stringify(f);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+a.length+s.length+c.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+p);let v=new DataView(m),S=0;v.setUint8(S++,this.KINDS.userBroadcastPush),v.setUint8(S++,u.length),v.setUint8(S++,a.length),v.setUint8(S++,s.length),v.setUint8(S++,c.length),v.setUint8(S++,h.length),v.setUint8(S++,n),Array.from(u,_=>v.setUint8(S++,_.charCodeAt(0))),Array.from(a,_=>v.setUint8(S++,_.charCodeAt(0))),Array.from(s,_=>v.setUint8(S++,_.charCodeAt(0))),Array.from(c,_=>v.setUint8(S++,_.charCodeAt(0))),Array.from(h,_=>v.setUint8(S++,_.charCodeAt(0)));var E=new Uint8Array(m.byteLength+r.byteLength);return E.set(new Uint8Array(m),0),E.set(new Uint8Array(r),m.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,s,a,u]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:u})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4);let u=this.HEADER_LENGTH+4;const c=r.decode(e.slice(u,u+i));u=u+i;const f=r.decode(e.slice(u,u+o));u=u+o;const h=r.decode(e.slice(u,u+s));u=u+s;const p=e.slice(u,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,v={type:this.BROADCAST_EVENT,event:f,payload:m};return s>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Kg{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var K;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(K||(K={}));const hh=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,s)=>(o[s]=CA(s,t,e,i),o),{}):{}},CA=(t,e,n,r)=>{const i=e.find(a=>a.name===t),o=i==null?void 0:i.type,s=n[t];return o&&!r.includes(o)?jg(o,s):Jl(s)},jg=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return kA(e,n)}switch(t){case K.bool:return xA(e);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return IA(e);case K.json:case K.jsonb:return AA(e);case K.timestamp:return RA(e);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return Jl(e);default:return Jl(e)}},Jl=t=>t,xA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},IA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},AA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},kA=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const s=t.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>jg(e,a))}return t},RA=t=>typeof t=="string"?t.replace(" ","T"):t,Yg=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ia{constructor(e,n,r={},i=zl){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ph;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ph||(ph={}));class mi{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mi.syncState(this.state,i,o,s),this.pendingDiffs.forEach(u=>{this.state=mi.syncDiff(this.state,u,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=mi.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),s=this.transformState(n),a={},u={};return this.map(o,(c,f)=>{s[c]||(u[c]=f)}),this.map(s,(c,f)=>{const h=o[c];if(h){const p=f.map(E=>E.presence_ref),m=h.map(E=>E.presence_ref),v=f.filter(E=>m.indexOf(E.presence_ref)<0),S=h.filter(E=>p.indexOf(E.presence_ref)<0);v.length>0&&(a[c]=v),S.length>0&&(u[c]=S)}else a[c]=f}),this.syncDiff(o,{joins:a,leaves:u},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,u)=>{var c;const f=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(u),f.length>0){const h=e[a].map(m=>m.presence_ref),p=f.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,f,u)}),this.map(s,(a,u)=>{let c=e[a];if(!c)return;const f=u.map(h=>h.presence_ref);c=c.filter(h=>f.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,u),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(mh||(mh={}));var gi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(gi||(gi={}));var It;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(It||(It={}));class vr{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ia(this,ut.join,this.params,this.timeout),this.rejoinTimer=new Kg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ut.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new mi(this),this.broadcastEndpointURL=Yg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==pe.closed){const{config:{broadcast:s,presence:a,private:u}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[gi.PRESENCE]&&this.bindings[gi.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},p={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:f}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(It.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(It.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(It.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,E=(v=S==null?void 0:S.length)!==null&&v!==void 0?v:0,_=[];for(let y=0;y<E;y++){const w=S[y],{filter:{event:T,schema:C,table:x,filter:I}}=w,N=m&&m[y];if(N&&N.event===T&&vr.isFilterValueEqual(N.schema,C)&&vr.isFilterValueEqual(N.table,x)&&vr.isFilterValueEqual(N.filter,I))_.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=pe.errored,e==null||e(It.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(It.SUBSCRIBED);return}}).receive("error",m=>{this.state=pe.errored,e==null||e(It.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(It.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===pe.joined&&e===gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let u=a.statusText;try{const c=await a.json();u=c.error||c.message||u}catch{}return Promise.reject(new Error(u))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:s}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ut.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ia(this,ut.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ia(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>EA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const s=e.toLocaleLowerCase(),{close:a,error:u,leave:c,join:f}=ut;if(r&&[a,u,c,f].indexOf(s)>=0&&r!==this._joinRef())return;let p=this._onMessage(s,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var v,S,E;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((E=(S=m.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(m=>m.callback(p,r)):(o=this.bindings[s])===null||o===void 0||o.filter(m=>{var v,S,E,_,y,w;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const T=m.id,C=(v=m.filter)===null||v===void 0?void 0:v.event;return T&&((S=n.ids)===null||S===void 0?void 0:S.includes(T))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const T=(y=(_=m==null?void 0:m.filter)===null||_===void 0?void 0:_.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return T==="*"||T===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:S,table:E,commit_timestamp:_,type:y,errors:w}=v;p=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:_,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(v))}m.callback(p,r)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&vr.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ut.close,{},e)}_onError(e){this._on(ut.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hh(e.columns,e.old_record)),n}}const Aa=()=>{},Eo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},NA=[1e3,2e3,5e3,1e4],PA=1e4,bA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MA{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zl,this.transport=null,this.heartbeatIntervalMs=Eo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Aa,this.ref=0,this.reconnectTimer=null,this.vsn=fh,this.logger=Aa,this.conn=null,this.sendBuffer=[],this.serializer=new TA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Wl.websocket}`,this.httpEndpoint=Yg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ht.connecting:return Tn.Connecting;case Ht.open:return Tn.Open;case Ht.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new vr(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(SA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Eo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(f){this.log("error","error in heartbeat callback",f)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",u=o.status||"";this.log("receive",`${u} ${r} ${i} ${a}`.trim(),o),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ht.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ht.open||this.conn.readyState===Ht.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ut.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([bA],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:_A};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ut.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Kg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Eo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,s,a,u,c,f,h,p,m;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:zl,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Eo.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=e==null?void 0:e.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Aa,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:fh,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:v=>NA[v-1]||PA,this.vsn){case wA:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(v,S)=>S(JSON.stringify(v)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(v,S)=>S(JSON.parse(v));break;case Jg:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Fi=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function LA(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function DA(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function UA(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:s}){const a=LA(t.baseUrl,r,i),u=await DA(t.auth),c=await e(a,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...u,...s},body:o?JSON.stringify(o):void 0}),f=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),p=h&&f?JSON.parse(f):f;if(!c.ok){const m=h?p:void 0,v=m==null?void 0:m.error;throw new Fi((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:m})}return{status:c.status,headers:c.headers,data:p}}}}function To(t){return t.join("")}var OA=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:To(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${To(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${To(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${To(t.namespace)}`}),!0}catch(e){if(e instanceof Fi&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Fi&&n.status===409)return;throw n}}};function Jn(t){return t.join("")}var FA=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jn(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jn(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jn(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jn(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jn(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jn(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Fi&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Fi&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},$A=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=UA({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new OA(this.client,e),this.tableOps=new FA(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ws=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Js(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Co=class extends Ws{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Qg=class extends Ws{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const VA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),GA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Kl=t=>{if(Array.isArray(t))return t.map(n=>Kl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Kl(r)}),e},BA=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function $i(t){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$i(t)}function HA(t,e){if($i(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($i(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qA(t){var e=HA(t,"string");return $i(e)=="symbol"?e:e+""}function zA(t,e,n){return(e=qA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gh(Object(n),!0).forEach(function(r){zA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const vh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},WA=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,o=i.status||500;if(typeof i.json=="function")i.json().then(s=>{const a=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||o+"";e(new Co(vh(s),o,a,r))}).catch(()=>{if(r==="vectors"){const s=o+"";e(new Co(i.statusText||`HTTP ${o} error`,o,s,r))}else{const s=o+"";e(new Co(i.statusText||`HTTP ${o} error`,o,s,r))}});else{const s=o+"";e(new Co(i.statusText||`HTTP ${o} error`,o,s,r))}}else e(new Qg(vh(t),t,r))},JA=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?V(V({},i),n):(GA(r)?(i.headers=V({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),V(V({},i),n))};async function Zr(t,e,n,r,i,o,s){return new Promise((a,u)=>{t(n,JA(e,r,i,o)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;if(s==="vectors"){const f=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!f||!f.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>WA(c,u,r,s))})}function Xg(t="storage"){return{get:async(e,n,r,i)=>Zr(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,o)=>Zr(e,"POST",n,i,o,r,t),put:async(e,n,r,i,o)=>Zr(e,"PUT",n,i,o,r,t),head:async(e,n,r,i)=>Zr(e,"HEAD",n,V(V({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,o)=>Zr(e,"DELETE",n,i,o,r,t)}}const KA=Xg("storage"),{get:Vi,post:at,put:jl,head:jA,remove:cc}=KA,qe=Xg("vectors");var Br=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=VA(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Js(n))return{data:null,error:n};throw n}}},YA=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Js(e))return{data:null,error:e};throw e}}};let Zg;Zg=Symbol.toStringTag;var QA=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Zg]="BlobDownloadBuilder",this.promise=null}asStream(){return new YA(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Js(e))return{data:null,error:e};throw e}}};const XA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ZA=class extends Br{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let o;const s=V(V({},yh),r);let a=V(V({},i.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const u=s.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),u&&o.append("metadata",i.encodeMetadata(u)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),u&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(u))):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,u&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r!=null&&r.headers&&(a=V(V({},a),r.headers));const c=i._removeEmptyFolders(e),f=i._getFinalPath(c),h=await(t=="PUT"?jl:at)(i.fetch,`${i.url}/object/${f}`,o,V({headers:a},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{path:c,id:h.Id,fullPath:h.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);return a.searchParams.set("token",e),i.handleOperation(async()=>{let u;const c=V({upsert:yh.upsert},r),f=V(V({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType),{path:o,fullPath:(await jl(i.fetch,a.toString(),u,{headers:f})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=V({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await at(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+o.url),a=s.searchParams.get("token");if(!a)throw new Ws("No token returned by API");return{signedUrl:s.toString(),path:t,token:a}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await at(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await at(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),o=await at(r.fetch,`${r.url}/object/sign/${i}`,V({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await at(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(s=>V(V({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=i?`?${i}`:"",s=this._getFinalPath(t),a=()=>Vi(this.fetch,`${this.url}/${r}/${s}${o}`,{headers:this.headers,noResolveJson:!0},n);return new QA(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Kl(await Vi(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await jA(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Js(r)&&r instanceof Qg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await cc(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=V(V(V({},XA),e),{},{prefix:t||""});return await at(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=V({},t);return await at(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const ek="2.95.3",ji={"X-Client-Info":`storage-js/${ek}`};var tk=class extends Br{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),s=V(V({},ji),e);super(o,s,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Vi(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Vi(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await at(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await jl(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await at(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await cc(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},nk=class extends Br{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=V(V({},ji),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await at(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Vi(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await cc(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!BA(t))throw new Ws("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new $A({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const s=i[o];return typeof s!="function"?s:async(...a)=>{try{return{data:await s.apply(i,a),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}},rk=class extends Br{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=V(V({},ji),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await qe.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await qe.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},ik=class extends Br{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=V(V({},ji),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},ok=class extends Br{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=V(V({},ji),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await qe.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},sk=class extends ok{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ak(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},ak=class extends rk{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,V(V({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,V(V({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new lk(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},lk=class extends ik{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,V(V({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,V(V({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,V(V({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,V(V({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,V(V({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},uk=class extends tk{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new ZA(this.url,this.headers,t,this.fetch)}get vectors(){return new sk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new nk(this.url+"/iceberg",this.headers,this.fetch)}};const ev="2.95.3",tr=30*1e3,Yl=3,ka=Yl*tr,ck="http://localhost:9999",dk="supabase.auth.token",fk={"X-Client-Info":`gotrue-js/${ev}`},Ql="X-Supabase-Api-Version",tv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pk=10*60*1e3;class Gi extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class mk extends Gi{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function gk(t){return U(t)&&t.name==="AuthApiError"}class Cn extends Gi{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class $t extends Gi{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Be extends $t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ra(t){return U(t)&&t.name==="AuthSessionMissingError"}class Kn extends $t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xo extends $t{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Io extends $t{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vk(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class _h extends $t{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yk extends $t{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Xl extends $t{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Na(t){return U(t)&&t.name==="AuthRetryableFetchError"}class wh extends $t{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Zl extends $t{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ys="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sh=` 	
\r=`.split(""),_k=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Sh.length;e+=1)t[Sh[e].charCodeAt(0)]=-2;for(let e=0;e<ys.length;e+=1)t[ys[e].charCodeAt(0)]=e;return t})();function Eh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ys[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ys[r]),e.queuedBits-=6}}function nv(t,e,n){const r=_k[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Th(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{Ek(s,r,n)};for(let s=0;s<t.length;s+=1)nv(t.charCodeAt(s),i,o);return e.join("")}function wk(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Sk(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}wk(r,e)}}function Ek(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ir(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)nv(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Tk(t){const e=[];return Sk(t,n=>e.push(n)),new Uint8Array(e)}function kn(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Eh(i,n,r)),Eh(null,n,r),e.join("")}function Ck(t){return Math.round(Date.now()/1e3)+t}function xk(){return Symbol("auth-callback")}const Se=()=>typeof window<"u"&&typeof document<"u",gn={tested:!1,writable:!1},rv=()=>{if(!Se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gn.tested)return gn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),gn.tested=!0,gn.writable=!0}catch{gn.tested=!0,gn.writable=!1}return gn.writable};function Ik(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const iv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ak=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",nr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},vn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},we=async(t,e)=>{await t.removeItem(e)};class Ks{constructor(){this.promise=new Ks.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ks.promiseConstructor=Promise;function Ao(t){const e=t.split(".");if(e.length!==3)throw new Zl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!hk.test(e[r]))throw new Zl("JWT not in base64url format");return{header:JSON.parse(Th(e[0])),payload:JSON.parse(Th(e[1])),signature:Ir(e[2]),raw:{header:e[0],payload:e[1]}}}async function kk(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Rk(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const s=await t(o);if(!e(o,null,s)){r(s);return}}catch(s){if(!e(o,s)){i(s);return}}})()})}function Nk(t){return("0"+t.toString(16)).substr(-2)}function Pk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Nk).join("")}async function bk(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function Mk(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await bk(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jn(t,e,n=!1){const r=Pk();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await nr(t,`${e}-code-verifier`,i);const o=await Mk(r);return[o,r===o?"plain":"s256"]}const Lk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dk(t){const e=t.headers.get(Ql);if(!e||!e.match(Lk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Uk(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ok(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Fk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yn(t){if(!Fk.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pa(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $k(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Ch(t){return JSON.parse(JSON.stringify(t))}const En=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vk=[502,503,504];async function xh(t){var e;if(!Ak(t))throw new Xl(En(t),0);if(Vk.includes(t.status))throw new Xl(En(t),t.status);let n;try{n=await t.json()}catch(o){throw new Cn(En(o),o)}let r;const i=Dk(t);if(i&&i.getTime()>=tv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new wh(En(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Be}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new wh(En(n),t.status,n.weak_password.reasons);throw new mk(En(n),t.status||500,r)}const Gk=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function $(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Ql]||(o[Ql]=tv["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",u=await Bk(t,e,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Bk(t,e,n,r,i,o){const s=Gk(e,r,i,o);let a;try{a=await t(n,Object.assign({},s))}catch(u){throw console.error(u),new Xl(En(u),0)}if(a.ok||await xh(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(u){await xh(u)}}function ot(t){var e;let n=null;zk(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Ck(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ih(t){const e=ot(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Jt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Hk(t){return{data:t,error:null}}function qk(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,s=zs(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},u=Object.assign({},s);return{data:{properties:a,user:u},error:null}}function Ah(t){return t}function zk(t){return t.access_token&&t.refresh_token&&t.expires_in}const ba=["global","local","others"];class Wk{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=iv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ba[0]){if(ba.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ba.join(", ")}`);try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Jt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=zs(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:qk,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,s,a,u;try{const c={nextPage:null,lastPage:0,total:0},f=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ah});if(f.error)throw f.error;const h=await f.json(),p=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(u=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return m.length>0&&(m.forEach(v=>{const S=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(v.split(";")[1].split("=")[1]);c[`${E}Page`]=S}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(U(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Yn(e);try{return await $(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Yn(e);try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Jt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Yn(e);try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Jt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yn(e.userId);try{const{data:n,error:r}=await $(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Yn(e.userId),Yn(e.id);try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,s,a,u;try{const c={nextPage:null,lastPage:0,total:0},f=await $(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ah});if(f.error)throw f.error;const h=await f.json(),p=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(u=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return m.length>0&&(m.forEach(v=>{const S=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(v.split(";")[1].split("=")[1]);c[`${E}Page`]=S}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(U(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await $(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await $(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(U(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await $(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}}function kh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Qn={debug:!!(globalThis&&rv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ov extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Jk extends ov{}async function Kk(t,e,n){Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Jk(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Qn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function jk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Yk(t){return parseInt(t,16)}function Qk(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Xk(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:u,resources:c,scheme:f,uri:h,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=sv(t.address),v=f?`${f}://${r}`:r,S=t.statement?`${t.statement}
`:"",E=`${v} wants you to sign in with your Ethereum account:
${m}

${S}`;let _=`URI: ${h}
Version: ${p}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(_+=`
Expiration Time: ${i.toISOString()}`),a&&(_+=`
Not Before: ${a.toISOString()}`),u&&(_+=`
Request ID: ${u}`),c){let y=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);y+=`
- ${w}`}_+=y}return`${E}
${_}`}class fe extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class _s extends fe{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Zk({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new fe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new fe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new fe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new fe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new fe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new fe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new fe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new fe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(av(s)){if(o.rp.id!==s)return new fe({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new fe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function eR({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new fe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new fe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(av(r)){if(n.rpId!==r)return new fe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class tR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const nR=new tR;function rR(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=zs(t,["challenge","user","excludeCredentials"]),o=Ir(e).buffer,s=Object.assign(Object.assign({},n),{id:Ir(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const c=r[u];a.excludeCredentials[u]=Object.assign(Object.assign({},c),{id:Ir(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function iR(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=zs(t,["challenge","allowCredentials"]),i=Ir(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Ir(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function oR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:kn(new Uint8Array(t.response.attestationObject)),clientDataJSON:kn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function sR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:kn(new Uint8Array(i.authenticatorData)),clientDataJSON:kn(new Uint8Array(i.clientDataJSON)),signature:kn(new Uint8Array(i.signature)),userHandle:i.userHandle?kn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function av(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Rh(){var t,e;return!!(Se()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function aR(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new _s("Browser returned unexpected credential type",e)}:{data:null,error:new _s("Empty credential response",e)}}catch(e){return{data:null,error:Zk({error:e,options:t})}}}async function lR(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new _s("Browser returned unexpected credential type",e)}:{data:null,error:new _s("Empty credential response",e)}}catch(e){return{data:null,error:eR({error:e,options:t})}}}const uR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ws(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(e(s)){const a=r[o];e(a)?r[o]=ws(a,s):r[o]=ws(s)}else r[o]=s}return r}function dR(t,e){return ws(uR,t,e||{})}function fR(t,e){return ws(cR,t,e||{})}class hR{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){var s;try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:u};const c=i??nR.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;if(!f.name){const h=r;if(h)f.name=`${f.id}:${h}`;else{const m=(await this.client.getUser()).data.user,v=((s=m==null?void 0:m.user_metadata)===null||s===void 0?void 0:s.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";f.name=`${f.id}:${v}`}}f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=dR(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await aR({publicKey:f,signal:c});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=fR(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await lR(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return U(a)?{data:null,error:a}:{data:null,error:new Cn("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Gi("rpId is required for WebAuthn authentication")};try{if(!Rh())return{data:null,error:new Cn("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};const{webauthn:u}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(s){return U(s)?{data:null,error:s}:{data:null,error:new Cn("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Gi("rpId is required for WebAuthn registration")};try{if(!Rh())return{data:null,error:new Cn("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(f=>{var h;return(h=f.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:a};const{data:u,error:c}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:s.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:c}}catch(s){return U(s)?{data:null,error:s}:{data:null,error:new Cn("Unexpected error in register",s)}}}}jk();const pR={url:ck,storageKey:dk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Nh(t,e,n){return await n()}const Xn={};class Bi{get jwks(){var e,n;return(n=(e=Xn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Xn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},pR),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Bi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Bi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Se()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Wk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=iv(o.fetch),this.lock=o.lock||Nh,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Se()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Kk:this.lock=Nh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new hR(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:rv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kh(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=kh(this.memoryStorage)),Se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s);try{await this._notifyAllSubscribers(s.data.event,s.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(s=>{this._debug("#initialize()","error",s)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ev}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Se()&&(n=Ik(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Se()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),vk(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:s,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?this._returnResult({error:n}):this._returnResult({error:new Cn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ot}),{data:s,error:a}=o;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const u=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(o){if(U(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:f,password:h,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await jn(this.storage,this.storageKey)),o=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},xform:ot})}else if("phone"in e){const{phone:f,password:h,options:p}=e;o=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ot})}else throw new xo("You must provide either an email or phone number and a password");const{data:s,error:a}=o;if(a||!s)return await we(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const u=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(o){if(await we(this.storage,`${this.storageKey}-code-verifier`),U(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:s,options:a}=e;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ih})}else if("phone"in e){const{phone:o,password:s,options:a}=e;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ih})}else throw new xo("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Kn;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(U(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,s,a,u,c,f,h,p;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:S,wallet:E,statement:_,options:y}=e;let w;if(Se())if(typeof E=="object")w=E;else{const b=window;if("ethereum"in b&&typeof b.ethereum=="object"&&"request"in b.ethereum&&typeof b.ethereum.request=="function")w=b.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=E}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),C=await w.request({method:"eth_requestAccounts"}).then(b=>b).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=sv(C[0]);let I=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const b=await w.request({method:"eth_chainId"});I=Yk(b)}const N={domain:T.host,address:x,statement:_,uri:T.href,version:"1",chainId:I,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(o=y==null?void 0:y.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(f=y==null?void 0:y.signInWithEthereum)===null||f===void 0?void 0:f.resources};m=Xk(N),v=await w.request({method:"personal_sign",params:[Qk(m),x]})}try{const{data:S,error:E}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ot});if(E)throw E;if(!S||!S.session||!S.user){const _=new Kn;return this._returnResult({data:{user:null,session:null},error:_})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:E})}catch(S){if(U(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var n,r,i,o,s,a,u,c,f,h,p,m;let v,S;if("message"in e)v=e.message,S=e.signature;else{const{chain:E,wallet:_,statement:y,options:w}=e;let T;if(Se())if(typeof _=="object")T=_;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))T=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=_}const C=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const x=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),y?{statement:y}:null));let I;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")I=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)I=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)v=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),S=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${C.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const x=await T.signMessage(new TextEncoder().encode(v),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=x}}try{const{data:E,error:_}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:kn(S)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ot});if(_)throw _;if(!E||!E.session||!E.user){const y=new Kn;return this._returnResult({data:{user:null,session:null},error:y})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:_})}catch(E){if(U(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await vn(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new yk;const{data:o,error:s}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ot});if(await we(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!o||!o.session||!o.user){const a=new Kn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:s})}catch(o){if(await we(this.storage,`${this.storageKey}-code-verifier`),U(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:s}=e,a=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ot}),{data:u,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u||!u.session||!u.user){const f=new Kn;return this._returnResult({data:{user:null,session:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:c})}catch(n){if(U(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,s;try{if("email"in e){const{email:a,options:u}=e;let c=null,f=null;this.flowType==="pkce"&&([c,f]=await jn(this.storage,this.storageKey));const{error:h}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:f},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:u}=e,{data:c,error:f}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(o=u==null?void 0:u.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(s=u==null?void 0:u.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new xo("You must provide either an email or phone number.")}catch(a){if(await we(this.storage,`${this.storageKey}-code-verifier`),U(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:a}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:ot});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const u=s.session,c=s.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(U(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,s;try{let a=null,u=null;this.flowType==="pkce"&&([a,u]=await jn(this.storage,this.storageKey));const c=await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:Hk});return!((o=c.data)===null||o===void 0)&&o.url&&Se()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await we(this.storage,`${this.storageKey}-code-verifier`),U(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Be;const{error:i}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(U(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:s}=await $(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:s,error:a}=await $(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:a})}throw new xo("You must provide either an email or phone number and a type")}catch(n){if(U(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await vn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ka:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await vn(this.userStorage,this.storageKey+"-user");s!=null&&s.user?e.user=s.user:e.user=Pa()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=$k(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jt}):await this._useSession(async n=>{var r,i,o;const{data:s,error:a}=n;if(a)throw a;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Be}:await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Jt})})}catch(n){if(U(n))return Ra(n)&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Be;const s=i.session;let a=null,u=null;this.flowType==="pkce"&&e.email!=null&&([a,u]=await jn(this.storage,this.storageKey));const{data:c,error:f}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:u}),jwt:s.access_token,xform:Jt});if(f)throw f;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(await we(this.storage,`${this.storageKey}-code-verifier`),U(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Be;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:s}=Ao(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:a,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:u}=await this._getUser(e.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(U(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:a}=n;if(a)throw a;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Be;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(U(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Se())throw new Io("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Io(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _h("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Io("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _h("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:s,expires_in:a,expires_at:u,token_type:c}=e;if(!o||!a||!s||!c)throw new Io("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(a);let p=f+h;u&&(p=parseInt(u));const m=p-f;m*1e3<=tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=p-h;f-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,f):f-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,f);const{data:S,error:E}=await this._getUser(o);if(E)throw E;const _={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:p,refresh_token:s,token_type:c,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:e.type},error:null})}catch(r){if(U(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await vn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!Ra(o))return this._returnResult({error:o});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:a}=await this.admin.signOut(s,e);if(a&&!(gk(a)&&(a.status===404||a.status===401||a.status===403)||Ra(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=xk(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await jn(this.storage,this.storageKey,!0));try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await we(this.storage,`${this.storageKey}-code-verifier`),U(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var s,a,u,c,f;const{data:h,error:p}=o;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return Se()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(U(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:s,provider:a,token:u,access_token:c,nonce:f}=e,h=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:u,access_token:c,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ot}),{data:p,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Kn}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),U(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)throw s;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Rk(async i=>(i>0&&await kk(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ot})),(i,o)=>{const s=200*Math.pow(2,i);return o&&Na(o)&&Date.now()+s-r<tr})}catch(r){if(this._debug(n,"error",r),U(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Se()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await vn(this.storage,this.storageKey);if(i&&this.userStorage){let s=await vn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await nr(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s==null?void 0:s.user)!==null&&e!==void 0?e:Pa()}else if(i&&!i.user&&!i.user){const s=await vn(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await we(this.storage,this.storageKey+"-user"),await nr(this.storage,this.storageKey,i)):i.user=Pa()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ka;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ka}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Na(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:a}=await this._getUser(i.access_token);!a&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Be;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ks;const{data:o,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new Be;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={data:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),U(o)){const s={data:null,error:o};return Na(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(u){o.push(u)}});if(await Promise.all(s),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await we(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await nr(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Ch(i);await nr(this.storage,this.storageKey,o)}else{const i=Ch(n);await nr(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await we(this.storage,this.storageKey),await we(this.storage,this.storageKey+"-code-verifier"),await we(this.storage,this.storageKey+"-user"),this.userStorage&&await we(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Se()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${tr}ms, refresh threshold is ${Yl} ticks`),i<=Yl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ov)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Se()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,s]=await jn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await $(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:c}=await $(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?oR(e.webauthn.credential_response):sR(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:u}=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:u}))})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const s=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:a}=s;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:rR(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:iR(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,o;if(e)try{const{payload:m}=Ao(e);let v=null;m.aal&&(v=m.aal);let S=v;const{data:{user:E},error:_}=await this.getUser(e);if(_)return this._returnResult({data:null,error:_});((r=(n=E==null?void 0:E.factors)===null||n===void 0?void 0:n.filter(T=>T.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(S="aal2");const w=m.amr||[];return{data:{currentLevel:v,nextLevel:S,currentAuthenticationMethods:w},error:null}}catch(m){if(U(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Ao(s.access_token);let c=null;u.aal&&(c=u.aal);let f=c;((o=(i=s.user.factors)===null||i===void 0?void 0:i.filter(m=>m.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(f="aal2");const p=u.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await $(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Be})})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Be});const s=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return s.data&&s.data.redirect_url&&Se()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Be});const s=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return s.data&&s.data.redirect_url&&Se()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await $(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Be})})}catch(e){if(U(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await $(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Be})})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+pk>i)return r;const{data:o,error:s}=await $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:v}=await this.getSession();if(v||!m.session)return this._returnResult({data:null,error:v});r=m.session.access_token}const{header:i,payload:o,signature:s,raw:{header:a,payload:u}}=Ao(r);n!=null&&n.allowExpired||Uk(o.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:o,header:i,signature:s},error:null}}const f=Ok(i.alg),h=await crypto.subtle.importKey("jwk",c,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,s,Tk(`${a}.${u}`)))throw new Zl("Invalid JWT signature");return{data:{claims:o,header:i,signature:s},error:null}}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}}Bi.nextInstanceID={};const mR=Bi,gR="2.95.3";let oi="";typeof Deno<"u"?oi="deno":typeof document<"u"?oi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oi="react-native":oi="node";const vR={"X-Client-Info":`supabase-js-${oi}/${gR}`},yR={headers:vR},_R={schema:"public"},wR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SR={};function Hi(t){"@babel/helpers - typeof";return Hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hi(t)}function ER(t,e){if(Hi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TR(t){var e=ER(t,"string");return Hi(e)=="symbol"?e:e+""}function CR(t,e,n){return(e=TR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ph(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ph(Object(n),!0).forEach(function(r){CR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ph(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const xR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),IR=()=>Headers,AR=(t,e,n)=>{const r=xR(n),i=IR();return async(o,s)=>{var a;const u=(a=await e())!==null&&a!==void 0?a:t;let c=new i(s==null?void 0:s.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(o,ie(ie({},s),{},{headers:c}))}};function kR(t){return t.endsWith("/")?t:t+"/"}function RR(t,e){var n,r;const{db:i,auth:o,realtime:s,global:a}=t,{db:u,auth:c,realtime:f,global:h}=e,p={db:ie(ie({},u),i),auth:ie(ie({},c),o),realtime:ie(ie({},f),s),storage:{},global:ie(ie(ie({},h),a),{},{headers:ie(ie({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function NR(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(kR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var PR=class extends mR{constructor(t){super(t)}},bR=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=NR(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:_R,realtime:SR,auth:ie(ie({},wR),{},{storageKey:s}),global:yR},u=RR(n??{},a);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=u.auth)!==null&&c!==void 0?c:{},this.headers,u.global.fetch)}this.fetch=AR(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(ie({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new gA(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch,timeout:u.db.timeout,urlLengthLimit:u.db.urlLengthLimit}),this.storage=new uk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new lA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:u,throwOnError:c},f,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new PR({url:this.authUrl.href,headers:ie(ie({},p),f),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:a,debug:u,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new MA(this.realtimeUrl.href,ie(ie({},t),{},{params:ie(ie({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const MR=(t,e,n)=>new bR(t,e,n);function LR(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}LR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DR="https://pjtlypmeiwaisketufos.supabase.co",UR="sb_publishable_Fx2k7dH4gCbb4FsS8l0t3Q_L5qA77o4",qt=MR(DR,UR),lv=A.createContext(void 0),OR=({children:t})=>{const[e,n]=A.useState([]),[r,i]=A.useState([]),[o,s]=A.useState(!0),a=async()=>{s(!0);try{const{data:p,error:m}=await qt.from("products").select("*").order("created_at",{ascending:!1});if(m)throw m;n(p||[]);const{data:v,error:S}=await qt.from("gallery").select("*").order("created_at",{ascending:!1});if(S)throw S;i(v||[])}catch(p){console.error("Error fetching Supabase data:",p)}finally{s(!1)}};A.useEffect(()=>{a()},[]);const u=async p=>{try{const{data:m,error:v}=await qt.from("products").insert([p]).select();if(v)throw v;m&&n([m[0],...e])}catch(m){console.error("Error adding product:",m),alert("Error al guardar el producto en la nube.")}},c=async p=>{try{const{error:m}=await qt.from("products").delete().eq("id",p);if(m)throw m;n(e.filter(v=>v.id!==p))}catch(m){console.error("Error removing product:",m)}},f=async p=>{try{const{data:m,error:v}=await qt.from("gallery").insert([p]).select();if(v)throw v;m&&i([m[0],...r])}catch(m){console.error("Error adding to gallery:",m)}},h=async p=>{try{const{error:m}=await qt.from("gallery").delete().eq("id",p);if(m)throw m;i(r.filter(v=>v.id!==p))}catch(m){console.error("Error removing from gallery:",m)}};return g.jsx(lv.Provider,{value:{products:e,gallery:r,addProduct:u,removeProduct:c,addToGallery:f,removeFromGallery:h,isLoading:o},children:t})},Rn=()=>{const t=A.useContext(lv);if(!t)throw new Error("useProducts must be used within a ProductProvider");return t},FR=()=>{const{products:t}=Rn(),[e,n]=A.useState("Polos"),[r,i]=A.useState("M"),o=["Polos","Playeras","Accesorios"],s=["S","M","L","XL","2XL"],a=localStorage.getItem("wa_number")||"+521234567890",u=A.useMemo(()=>t.filter(c=>{var h;const f=c.category===e;return e==="Accesorios"?f:f&&(!r||((h=c.sizes)==null?void 0:h.includes(r)))}),[t,e,r]);return g.jsxs("div",{className:"space-y-16 animate-fade-in pb-20",children:[g.jsxs("header",{className:"flex flex-col lg:flex-row justify-between items-end gap-10 border-b border-white/5 pb-16",children:[g.jsxs("div",{className:"max-w-xl",children:[g.jsxs("h1",{className:"text-8xl font-black tracking-tighter uppercase leading-[0.8] mb-4",children:["Gihart ",g.jsx("span",{className:"text-gradient",children:"Catalog"})]}),g.jsx("p",{className:"text-gray-500 text-lg",children:"Moda masculina premium. Importacin directa."})]}),g.jsx("div",{className:"flex flex-wrap gap-3",children:o.map(c=>g.jsx("button",{onClick:()=>{n(c),i(c==="Accesorios"?null:"M")},className:`px-8 py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${e===c?"accent-gradient shadow-xl":"bg-white/5 text-gray-500 border border-white/5 hover:bg-white/10"}`,children:c},c))})]}),g.jsxs("div",{className:"flex flex-col xl:flex-row gap-12",children:[e!=="Accesorios"&&g.jsx("aside",{className:"xl:w-72 space-y-8 shrink-0",children:g.jsxs("div",{className:"glass p-8 rounded-[2.5rem] border-white/10 sticky top-28",children:[g.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-pink-500 mb-6 text-center",children:"Filtrar por Talla"}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(c=>g.jsx("button",{onClick:()=>i(c),className:`py-4 rounded-xl text-[10px] font-black border transition-all ${r===c?"accent-gradient border-transparent text-white":"bg-white/5 border-white/5 text-gray-500 hover:text-white"}`,children:c},c))}),g.jsx("p",{className:"mt-8 text-[9px] text-gray-600 text-center uppercase font-bold leading-relaxed",children:"* Stock sujeto a disponibilidad inmediata."})]})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-8",children:u.map(c=>{var f;return g.jsxs("div",{className:"group glass rounded-[2.5rem] overflow-hidden border-white/5 flex flex-col h-full hover:border-pink-500/30 transition-all shadow-2xl",children:[g.jsxs("div",{className:"aspect-[3/4] overflow-hidden relative",children:[g.jsx("img",{src:c.image,alt:c.name,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000"}),g.jsx("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:g.jsx("span",{className:"bg-black/80 backdrop-blur-md px-3 py-1 rounded-full text-[8px] font-black uppercase text-white tracking-widest border border-white/10",children:"Gihart & Hersel"})})]}),g.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsx("h3",{className:"font-bold text-xl leading-tight uppercase tracking-tighter",children:c.name}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"text-2xl font-black text-white",children:["$",c.price," ",g.jsx("span",{className:"text-[8px] text-gray-500",children:"MXN"})]}),c.wholesalePrice&&g.jsxs("div",{className:"mt-1",children:[g.jsxs("p",{className:"text-[10px] text-pink-500 font-black uppercase",children:["Mayoreo: $",c.wholesalePrice]}),g.jsx("p",{className:"text-[7px] text-gray-600 font-black uppercase tracking-tighter",children:"(A partir de 6 piezas)"})]})]})]}),g.jsx("div",{className:"mb-6 flex flex-wrap gap-1",children:(f=c.sizes)==null?void 0:f.map(h=>g.jsx("span",{className:"text-[8px] font-black bg-white/5 px-2 py-1 rounded border border-white/5 text-gray-400 uppercase",children:h},h))}),g.jsxs("p",{className:"text-xs text-gray-500 italic line-clamp-2 mb-8 leading-relaxed",children:['"',c.description,'"']}),g.jsx("div",{className:"mt-auto",children:g.jsx("a",{href:`https://wa.me/${a.replace("+","")}?text=Hola! Me interesa: ${c.name}. Talla: ${r||"Verificar"}.`,target:"_blank",className:"w-full py-4 accent-gradient text-center rounded-2xl text-[10px] font-black uppercase tracking-widest hover:brightness-125 transition-all block text-white shadow-xl shadow-pink-500/10",children:"Consultar Disponibilidad"})})]})]},c.id)})}),u.length===0&&g.jsx("div",{className:"text-center py-40 glass rounded-[3rem] border-dashed border-white/10 border-2",children:g.jsx("h3",{className:"text-xl font-bold text-gray-700 italic uppercase tracking-widest",children:"Sin stock en esta seleccin"})})]})]})]})},$R=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState([]),[i,o]=A.useState(""),[s,a]=A.useState(!1),u=A.useRef(null);A.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[n]);const c=async()=>{if(!i.trim())return;const f=i;o(""),r(h=>[...h,{role:"user",text:f}]);try{const h=await St.chat(n,f,"Contexto: Panel de Administracin de Inventario.");r(p=>[...p,{role:"model",text:h.text??"Sin respuesta."}])}catch(h){console.error("DEBUG AI ERROR:",h);const p=h.message||"Error desconocido";r(m=>[...m,{role:"model",text:`ERROR: ${p}. Verifica tu conexin o API Key.`}])}};return g.jsxs("div",{className:"glass rounded-[2rem] border-white/10 flex flex-col h-[400px] overflow-hidden",children:[g.jsxs("div",{className:"bg-cyan-500/20 p-4 flex justify-between items-center border-b border-white/5",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${t?"bg-cyan-400 animate-pulse":"bg-gray-600"}`}),g.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-cyan-400",children:"Co-Piloto Maestro"})]}),g.jsx("button",{onClick:()=>e(!t),className:"text-[9px] font-black uppercase bg-white/5 px-3 py-1 rounded-full hover:bg-white/10 transition-all",children:t?"Desactivar":"Activar Voz"})]}),g.jsxs("div",{ref:u,className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[n.length===0&&g.jsxs("div",{className:"text-center mt-10 space-y-4 px-6",children:[g.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest",children:"Asistente de Control Maestro"}),g.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[g.jsx("div",{className:"p-3 bg-white/5 rounded-xl border border-white/5 text-[9px] text-gray-400 font-bold uppercase",children:" Generar Reseas Elegantes"}),g.jsx("div",{className:"p-3 bg-white/5 rounded-xl border border-white/5 text-[9px] text-gray-400 font-bold uppercase",children:" Posts de Marketplace (Anti-Ban)"}),g.jsx("div",{className:"p-3 bg-white/5 rounded-xl border border-white/5 text-[9px] text-gray-400 font-bold uppercase",children:" Optimizar Inventario"})]})]}),n.map((f,h)=>g.jsx("div",{className:`flex ${f.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[80%] p-3 rounded-xl text-[10px] ${f.role==="user"?"bg-cyan-600 text-white":"bg-white/5 text-gray-400 border border-white/5"}`,children:f.text})},h))]}),g.jsxs("div",{className:"p-4 bg-black/40 border-t border-white/5 flex gap-2",children:[g.jsx("input",{type:"text",value:i,onChange:f=>o(f.target.value),onKeyDown:f=>f.key==="Enter"&&c(),placeholder:"Escribe comando...",className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-[10px] outline-none focus:border-cyan-500 text-white"}),g.jsx("button",{onClick:c,className:"bg-cyan-500 p-2 rounded-xl hover:scale-105 transition-all",children:g.jsx("svg",{className:"w-4 h-4 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeWidth:"3"})})})]})]})},VR=({onLogout:t})=>{const{addProduct:e,addToGallery:n}=Rn(),[r,i]=A.useState([]),o=A.useRef(null),[s,a]=A.useState(""),[u,c]=A.useState(450),[f,h]=A.useState(350),[p,m]=A.useState(""),[v,S]=A.useState("Polos"),[E,_]=A.useState("Hombre"),[y,w]=A.useState(!1),[T,C]=A.useState({facebookStoreUrl:localStorage.getItem("fb_store_url")||"",whatsappNumber:localStorage.getItem("wa_number")||"+521"}),x=["Polos","Playeras","Accesorios","Cuadros","Pinturas","Videos"],I=["Hombre","Mujer","Unisex"],N=["S","M","L","XL","2XL"],b=k=>{const F=k.target.files;F&&Array.from(F).forEach(de=>{const P=new FileReader;P.onload=()=>{i(O=>[...O,{id:Math.random().toString(36).substr(2,9),src:P.result,name:de.name.split(".")[0],target:"shop",price:450,wholesalePrice:350,category:"Polos",gender:"Hombre",sizes:["M","L"],description:"Nueva pieza de coleccin Master Edition."}])},P.readAsDataURL(de)})},M=(k,F)=>{i(de=>de.map(P=>P.id===k?{...P,...F}:P))},q=(k,F)=>{const de=r.find(O=>O.id===k);if(!de)return;const P=de.sizes.includes(F)?de.sizes.filter(O=>O!==F):[...de.sizes,F];M(k,{sizes:P})},se=async()=>{w(!0);try{for(const k of r){let F=k.src;if(k.src.startsWith("data:")){const de=k.src.split(";")[0].split("/")[1],P=`${Math.random()}.${de}`,O=`${k.target}/${P}`,B=k.src.split(",")[1],Y=atob(B),le=new Array(Y.length);for(let Qi=0;Qi<Y.length;Qi++)le[Qi]=Y.charCodeAt(Qi);const Bn=new Uint8Array(le),Ct=new Blob([Bn],{type:k.src.split(";")[0].split(":")[1]}),{data:Yi,error:vt}=await qt.storage.from("images").upload(O,Ct);if(vt)throw vt;const{data:{publicUrl:Hn}}=qt.storage.from("images").getPublicUrl(O);F=Hn}k.target==="shop"?await e({name:k.name,price:k.price,wholesalePrice:k.wholesalePrice,category:k.category,gender:k.gender,image:F,description:k.description,sizes:k.sizes}):await n({url:F,type:k.src.startsWith("data:video")?"video":"image",name:k.name,category:k.category})}i([]),alert("Inventario sincronizado con xito.")}catch(k){console.error("Upload error:",k),alert("Error al subir archivos.")}finally{w(!1)}},ee=async()=>{if(!s||!u)return alert("Nombre y precio obligatorios");w(!0);try{await e({name:s,price:u,wholesalePrice:f,category:v,gender:E,image:p||"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=800",description:"Carga manual estratgica.",sizes:["M","L"]}),a(""),m(""),alert("Pieza aadida con xito!")}catch(k){console.error(k)}finally{w(!1)}},ae=()=>{localStorage.setItem("fb_store_url",T.facebookStoreUrl),localStorage.setItem("wa_number",T.whatsappNumber),alert("Configuracin de contacto guardada.")};return g.jsxs("div",{className:"space-y-12 pb-20 animate-fade-in max-w-7xl mx-auto",children:[g.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-center gap-8 glass p-8 rounded-[2.5rem] border-white/10 shadow-2xl",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"accent-gradient p-4 rounded-2xl rotate-3 shadow-xl",children:g.jsx("span",{className:"text-white font-black text-2xl uppercase",children:"Master"})}),g.jsxs("div",{children:[g.jsxs("h1",{className:"text-4xl font-black uppercase tracking-tighter",children:["Control ",g.jsx("span",{className:"text-gradient",children:"Total"})]}),g.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Gihart & Hersel Group 2025"})]})]}),g.jsx("div",{className:"flex gap-4",children:g.jsx("button",{onClick:t,className:"glass border-red-500/20 px-8 py-3 rounded-2xl text-[10px] font-black uppercase text-red-500 hover:bg-red-500/10 transition-all",children:"Desconectarse"})})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[g.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[g.jsxs("section",{className:"glass p-10 rounded-[3rem] border-white/5 space-y-8 bg-gradient-to-br from-white/[0.02] to-transparent",children:[g.jsxs("h2",{className:"text-2xl font-black uppercase tracking-tighter italic",children:["Entrada ",g.jsx("span",{className:"text-cyan-400",children:"Directa"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Producto"}),g.jsx("input",{type:"text",value:s,onChange:k=>a(k.target.value),placeholder:"Ej: Polo Obsidian Black",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-sm text-white outline-none focus:border-cyan-400"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Precio Menudeo"}),g.jsx("input",{type:"number",value:u,onChange:k=>c(Number(k.target.value)),placeholder:"450",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-sm text-white outline-none"})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Precio Mayoreo (+6 pzs)"}),g.jsx("input",{type:"number",value:f,onChange:k=>h(Number(k.target.value)),placeholder:"350",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-sm text-white outline-none"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Gnero"}),g.jsx("div",{className:"flex gap-2",children:I.map(k=>g.jsx("button",{onClick:()=>_(k),className:`flex-1 py-3 rounded-xl text-[9px] font-bold uppercase transition-all ${E===k?"bg-cyan-500 text-black shadow-lg shadow-cyan-500/20":"bg-white/5 text-gray-400 border border-white/5 hover:bg-white/10"}`,children:k},k))})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Categora"}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(k=>g.jsx("button",{onClick:()=>S(k),className:`py-3 rounded-xl text-[8px] font-bold uppercase transition-all ${v===k?"bg-pink-500 text-white shadow-lg shadow-pink-500/20":"bg-white/5 text-gray-400 border border-white/5 hover:bg-white/10"}`,children:k},k))})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"URL Imagen"}),g.jsx("input",{type:"text",value:p,onChange:k=>m(k.target.value),placeholder:"https://...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-sm text-white outline-none"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:async()=>{if(!s)return alert("Escribe un nombre primero");const k=await St.chat([],`Genera una descripcin de lujo para un producto llamado ${s} de categora ${v}.`,"");alert(`Sugerencia AI:

`+k.text)},className:"flex-1 py-3 bg-pink-500/10 border border-pink-500/20 rounded-xl text-[8px] font-black uppercase text-pink-500 hover:bg-pink-500 transition-all hover:text-white",children:"Sugerir Resea"}),g.jsx("button",{onClick:async()=>{if(!s)return alert("Escribe un nombre y precio");const k=await St.chat([],`Crea un post de Marketplace para ${s} con precio ${u}. Sin marcas.`,"");alert("Post copiado al portapapeles."),k.text&&navigator.clipboard.writeText(k.text)},className:"flex-1 py-3 bg-cyan-500/10 border border-cyan-500/20 rounded-xl text-[8px] font-black uppercase text-cyan-400 hover:bg-cyan-400 transition-all hover:text-black",children:"Post FB"})]}),g.jsx("button",{onClick:ee,disabled:y,className:`w-full py-5 accent-gradient text-white rounded-2xl text-[10px] font-black uppercase tracking-widest hover:scale-[1.02] transition-all shadow-xl shadow-cyan-500/10 ${y?"opacity-50 cursor-not-wait":""}`,children:y?"Guardando...":"Registrar en el Sistema"})]}),g.jsxs("div",{className:"bg-white/5 border border-dashed border-white/10 rounded-3xl p-8 flex flex-col justify-center text-center space-y-4",children:[g.jsx("div",{className:"w-16 h-16 bg-cyan-400/10 rounded-2xl flex items-center justify-center mx-auto text-cyan-400",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:"2"})})}),g.jsx("h3",{className:"text-xs font-black uppercase tracking-tighter",children:"Creacin Rpida"}),g.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest leading-relaxed",children:"Ideal para piezas sin fotos nuevas o para actualizar stock rpidamente desde el mvil."})]})]})]}),g.jsxs("section",{className:"glass p-10 rounded-[3rem] border-white/5 space-y-8",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h2",{className:"text-2xl font-black uppercase tracking-tighter italic",children:["Stock ",g.jsx("span",{className:"text-pink-500",children:"Actual"})]}),g.jsxs("span",{className:"bg-pink-500/10 text-pink-500 px-4 py-1 rounded-full text-[9px] font-black uppercase",children:[Rn().products.length," Items"]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Rn().products.map(k=>g.jsxs("div",{className:"glass p-5 rounded-[2rem] border-white/5 flex gap-5 items-center group hover:bg-white/[0.03] transition-all",children:[g.jsx("img",{src:k.image,className:"w-20 h-20 rounded-2xl object-cover shadow-2xl"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-[11px] font-black uppercase tracking-tighter leading-none mb-1",children:k.name}),g.jsxs("p",{className:"text-[10px] text-pink-500 font-black",children:["$",k.price," ",g.jsx("span",{className:"text-gray-600",children:"MXN"})]}),g.jsx("div",{className:"flex gap-1 mt-2",children:g.jsx("span",{className:"text-[7px] font-black uppercase bg-white/5 px-2 py-0.5 rounded text-gray-400",children:k.category})})]}),g.jsx("button",{onClick:()=>Rn().removeProduct(k.id),className:"p-3 bg-red-500/10 text-red-500 rounded-xl hover:bg-red-500 hover:text-white transition-all",title:"Eliminar producto",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16",strokeWidth:"2"})})})]},k.id))})]}),g.jsxs("section",{className:"glass p-10 rounded-[3rem] border-white/5 space-y-8 relative overflow-hidden",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h2",{className:"text-2xl font-black uppercase tracking-tighter italic",children:["Carga ",g.jsx("span",{className:"text-pink-500",children:"Multimodal"})]}),r.length>0&&g.jsxs("button",{onClick:se,className:"accent-gradient px-10 py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-2xl hover:scale-105 transition-all text-white",children:["Sincronizar ",r.length," Piezas"]})]}),g.jsxs("div",{onClick:()=>{var k;return(k=o.current)==null?void 0:k.click()},className:"aspect-[4/1] border-2 border-dashed border-white/10 rounded-[2rem] flex flex-col items-center justify-center cursor-pointer hover:border-cyan-400 transition-all bg-white/5 group",children:[g.jsx("svg",{className:"w-8 h-8 text-cyan-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12",strokeWidth:"1.5"})}),g.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest",children:"Arrastra o haz clic para subir"}),g.jsx("input",{type:"file",ref:o,multiple:!0,accept:"image/*,video/*",className:"hidden",onChange:b})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(k=>g.jsxs("div",{className:"glass p-6 rounded-[2.5rem] border-white/10 space-y-6 relative group overflow-hidden",children:[g.jsx("button",{onClick:()=>i(F=>F.filter(de=>de.id!==k.id)),className:"absolute top-4 right-4 bg-red-500 w-8 h-8 rounded-full text-white text-[10px] font-black z-20",children:""}),g.jsxs("div",{className:"aspect-[4/3] rounded-3xl overflow-hidden border border-white/5 mb-4 relative",children:[k.src.startsWith("data:video")?g.jsx("video",{src:k.src,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0}):g.jsx("img",{src:k.src,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:g.jsxs("select",{value:k.target,onChange:F=>M(k.id,{target:F.target.value}),className:"bg-white text-black text-[9px] font-black uppercase px-4 py-2 rounded-full outline-none",children:[g.jsx("option",{value:"shop",children:"Ir a Tienda"}),g.jsx("option",{value:"gallery",children:"Ir a Galera"})]})})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("input",{type:"text",value:k.name,onChange:F=>M(k.id,{name:F.target.value}),placeholder:"Nombre de la pieza",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-[11px] text-white outline-none focus:border-pink-500"}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2",children:"Menudeo MXN"}),g.jsx("input",{type:"number",value:k.price,onChange:F=>M(k.id,{price:Number(F.target.value)}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-[10px] text-white"})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2",children:["Mayoreo MXN ",g.jsx("span",{className:"text-pink-500",children:"(+6 pzs)"})]}),g.jsx("input",{type:"number",value:k.wholesalePrice,onChange:F=>M(k.id,{wholesalePrice:Number(F.target.value)}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-[10px] text-white"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Categora"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(F=>g.jsx("button",{onClick:()=>M(k.id,{category:F}),className:`px-3 py-2 rounded-lg text-[8px] font-bold uppercase transition-all ${k.category===F?"bg-pink-500 text-white shadow-lg":"bg-white/5 text-gray-400 border border-white/5 hover:bg-white/10"}`,children:F},F))})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Gnero"}),g.jsx("div",{className:"flex gap-2",children:I.map(F=>g.jsx("button",{onClick:()=>M(k.id,{gender:F}),className:`flex-1 py-2 rounded-lg text-[9px] font-bold uppercase transition-all ${k.gender===F?"bg-cyan-500 text-black shadow-lg":"bg-white/5 text-gray-500 border border-white/5 hover:bg-white/10"}`,children:F},F))})]}),k.target==="shop"&&!["Accesorios","Cuadros","Pinturas","Videos"].includes(k.category)&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase ml-2 tracking-widest",children:"Tallas"}),g.jsx("div",{className:"flex justify-between gap-1",children:N.map(F=>g.jsx("button",{onClick:()=>q(k.id,F),className:`flex-1 py-2 rounded-lg text-[9px] font-black border transition-all ${k.sizes.includes(F)?"bg-white text-black border-transparent shadow-lg":"bg-white/5 border-white/5 text-gray-600"}`,children:F},F))})]}),g.jsxs("div",{className:"pt-4 border-t border-white/5 space-y-3",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:async()=>{const F=await St.chat([],`Genera una descripcin corta y elegante para una ${k.category} llamada ${k.name} de gnero ${k.gender}. S muy persuasivo.`,"");M(k.id,{description:F.text||k.description})},className:"flex-1 py-3 bg-white/5 border border-white/10 rounded-xl text-[8px] font-black uppercase text-pink-500 hover:bg-pink-500/10 transition-all flex items-center justify-center gap-2",children:[g.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M11.5 7.5L14 10L11.5 12.5L9 10L11.5 7.5ZM19 12L21 14L19 16L17 14L19 12ZM7 14L9 16L7 18L5 16L7 14ZM11.5 3L13.1 6.4L16.5 8L13.1 9.6L11.5 13L9.9 9.6L6.5 8L9.9 6.4L11.5 3Z"})}),"Resea AI"]}),g.jsxs("button",{onClick:async()=>{const F=await St.chat([],`Genera una publicacin para Facebook Marketplace de una ${k.category} llamada ${k.name}. PRECIO: ${k.price}. No menciones marcas si hay logos, enfcate en calidad premium y exclusividad. Usa emojis.`,"");alert(`Copiado al portapapeles: 

`+F.text),F.text&&navigator.clipboard.writeText(F.text)},className:"flex-1 py-3 bg-white/5 border border-white/10 rounded-xl text-[8px] font-black uppercase text-cyan-400 hover:bg-cyan-400/10 transition-all flex items-center justify-center gap-2",children:[g.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M17 2H7C5.89543 2 5 2.89543 5 4V20C5 21.1046 5.89543 22 7 22H17C18.1046 22 19 21.1046 19 20V4C19 2.89543 18.1046 2 -17 2ZM17 20H7V4H17V20ZM12 18C13.1046 18 14 17.1046 14 16C14 14.8954 13.1046 14 12 14C10.8954 14 10 14.8954 10 16C10 17.1046 10.8954 18 12 18Z"})}),"Post Marketplace"]})]}),g.jsx("textarea",{value:k.description,onChange:F=>M(k.id,{description:F.target.value}),rows:2,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-[10px] text-gray-400 outline-none focus:border-pink-500 resize-none"})]})]})]},k.id))})]})]}),g.jsxs("div",{className:"lg:col-span-4 space-y-10",children:[g.jsxs("section",{className:"space-y-4",children:[g.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-cyan-400 ml-4",children:"Asistente Inteligente"}),g.jsx($R,{})]}),g.jsxs("section",{className:"glass p-8 rounded-[2.5rem] border-white/10 space-y-6",children:[g.jsxs("h3",{className:"text-xl font-black uppercase tracking-tighter italic",children:["Configuracin ",g.jsx("span",{className:"text-gradient",children:"Redes"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase ml-2",children:"WhatsApp de Ventas"}),g.jsx("input",{type:"text",value:T.whatsappNumber,onChange:k=>C({...T,whatsappNumber:k.target.value}),placeholder:"+52...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-xs text-white"})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase ml-2",children:"URL Facebook Store"}),g.jsx("input",{type:"text",value:T.facebookStoreUrl,onChange:k=>C({...T,facebookStoreUrl:k.target.value}),placeholder:"https://facebook.com/tienda",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-xs text-white"})]}),g.jsx("button",{onClick:ae,className:"w-full py-4 bg-white text-black rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-cyan-400 hover:text-white transition-all shadow-xl",children:"Guardar Configuracin"})]})]}),g.jsxs("div",{className:"bg-pink-500/10 border border-pink-500/20 p-6 rounded-[2rem] space-y-4",children:[g.jsx("h4",{className:"text-[10px] font-black text-pink-500 uppercase tracking-widest",children:"Tip de Maestro"}),g.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed font-bold uppercase italic",children:'"Para un catlogo impecable, usa fotos en fondo neutro. El agente detectar automticamente los colores si lo activas."'})]})]})]})]})},GR=({onLoginSuccess:t})=>{const[e,n]=A.useState(""),[r,i]=A.useState(!1),o=Xu(),s=a=>{a.preventDefault(),e==="trendy2024"?(localStorage.setItem("trendy_is_admin","true"),t(),o("/admin")):(i(!0),n(""))};return g.jsx("div",{className:"min-h-[70vh] flex items-center justify-center p-4 animate-fade-in",children:g.jsxs("div",{className:"glass p-10 md:p-16 rounded-[4rem] w-full max-w-md border-white/10 shadow-2xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 accent-gradient rounded-full blur-[80px] opacity-20"}),g.jsxs("div",{className:"text-center mb-12 relative z-10",children:[g.jsx("div",{className:"accent-gradient w-20 h-20 rounded-[2rem] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-pink-500/30 rotate-6",children:g.jsx("span",{className:"text-white font-black text-3xl",children:"TO"})}),g.jsxs("h2",{className:"text-4xl font-black uppercase tracking-tighter mb-2",children:["Panel ",g.jsx("span",{className:"text-gradient",children:"Master"})]}),g.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-[0.3em]",children:"Introduce la clave secreta"})]}),g.jsxs("form",{onSubmit:s,className:"space-y-8 relative z-10",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("input",{type:"password",value:e,onChange:a=>{n(a.target.value),i(!1)},className:`w-full bg-white/5 border ${r?"border-red-500":"border-white/10"} rounded-[2rem] px-8 py-6 text-sm focus:outline-none focus:border-cyan-500 transition-all text-center tracking-[0.6em] placeholder:tracking-normal`,placeholder:"",autoFocus:!0}),r&&g.jsx("div",{className:"flex items-center justify-center gap-2 text-red-500",children:g.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Contrasea Incorrecta"})})]}),g.jsx("button",{type:"submit",className:"w-full py-6 accent-gradient rounded-[2rem] font-black text-xs uppercase tracking-[0.3em] shadow-2xl shadow-pink-500/20 hover:scale-[1.03] transition-all text-white",children:"Entrar al Control"})]})]})})},BR=()=>{const{gallery:t,removeFromGallery:e}=Rn(),n=localStorage.getItem("trendy_is_admin")==="true";return g.jsxs("div",{className:"space-y-16 animate-fade-in pb-20",children:[g.jsxs("header",{className:"text-center space-y-6",children:[g.jsxs("h1",{className:"text-8xl font-black tracking-tighter uppercase leading-none",children:["Trendy ",g.jsx("span",{className:"text-gradient",children:"Gallery"})]}),g.jsx("p",{className:"text-gray-500 text-xl font-light tracking-widest uppercase",children:"Capturando la esencia del estilo maestro."})]}),t.length>0?g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-12",children:t.map(r=>g.jsxs("div",{className:"group relative rounded-[3rem] overflow-hidden bg-white/5 border border-white/10 aspect-[4/5] shadow-2xl transition-all hover:scale-[1.02] hover:shadow-pink-500/20",children:[r.type==="image"?g.jsx("img",{src:r.url,alt:r.name,className:"w-full h-full object-cover transition-transform duration-[2s] group-hover:scale-110"}):g.jsx("video",{src:r.url,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,"aria-label":r.name}),g.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col justify-end p-12",children:[g.jsx("span",{className:"text-[10px] font-black text-cyan-400 uppercase tracking-[0.5em] mb-2",children:"Exclusivo Trendy"}),g.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:r.name.split(".")[0]}),n&&g.jsx("button",{onClick:()=>e(r.id),className:"mt-6 self-start bg-red-500/80 p-3 rounded-xl hover:bg-red-500 transition-colors",children:g.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2"})})})]})]},r.id))}):g.jsxs("div",{className:"text-center py-40 glass rounded-[4rem] border-dashed border-white/10 max-w-4xl mx-auto",children:[g.jsx("div",{className:"bg-white/5 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-10 animate-float",children:g.jsx("svg",{className:"w-12 h-12 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsx("h3",{className:"text-3xl font-black text-gray-500 uppercase tracking-tighter italic",children:"Revelando la Visin..."}),g.jsx("p",{className:"text-gray-700 text-sm mt-4 font-bold uppercase tracking-widest",children:"Contenido exclusivo en proceso de curadura."})]})]})},HR=({isAdmin:t})=>{const e=Vn(),[n,r]=A.useState(!1);return g.jsx("nav",{className:"sticky top-0 z-50 glass border-b border-white/5",children:g.jsxs("div",{className:"container mx-auto px-4 h-24 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4 group",children:[g.jsx(Ue,{to:t?"/admin":"/login",className:`accent-gradient p-3 rounded-2xl rotate-3 group-hover:rotate-0 transition-all duration-700 shadow-xl shadow-pink-500/20 ${t?"ring-2 ring-cyan-400":""}`,children:g.jsx("span",{className:"text-white font-black text-2xl tracking-tighter",children:"TO"})}),g.jsxs(Ue,{to:"/",className:"text-3xl font-extrabold tracking-tighter group flex items-baseline",children:["Trendy",g.jsx("span",{className:"text-gradient group-hover:brightness-150 transition-all",children:"Online"})]})]}),g.jsxs("div",{className:"hidden md:flex items-center gap-10",children:[g.jsx(Ue,{to:"/shop",className:`text-[11px] font-black uppercase tracking-widest transition-all ${e.pathname==="/shop"?"text-pink-500 scale-110":"text-gray-400 hover:text-white"}`,children:"Coleccin"}),g.jsx(Ue,{to:"/gallery",className:`text-[11px] font-black uppercase tracking-widest transition-all ${e.pathname==="/gallery"?"text-pink-500 scale-110":"text-gray-400 hover:text-white"}`,children:"Galera"}),g.jsx("div",{className:"h-4 w-[1px] bg-white/10 mx-2"}),g.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"text-gray-400 hover:text-[#1877F2] transition-colors",children:g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})}),t&&g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(Ue,{to:"/admin",className:"text-[10px] font-black uppercase tracking-widest text-cyan-400 bg-cyan-400/10 border border-cyan-400/30 px-6 py-3 rounded-full hover:bg-cyan-400/20 transition-all shadow-lg shadow-cyan-400/10",children:"Admin Maestro"}),g.jsx("button",{onClick:()=>{localStorage.removeItem("trendy_is_admin"),window.location.reload()},className:"text-[9px] font-black uppercase tracking-widest text-red-500 bg-red-500/10 border border-red-500/30 px-4 py-3 rounded-full hover:bg-red-500 hover:text-white transition-all",children:"Salir"})]})]}),g.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[g.jsx("button",{type:"button",onClick:()=>r(!n),className:"w-12 h-12 rounded-xl glass flex items-center justify-center hover:bg-white/10 transition-colors","aria-label":n?"Cerrar men":"Abrir men","aria-expanded":n,children:n?g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),n&&g.jsxs("div",{className:"absolute top-24 left-0 right-0 glass border-b border-white/10 py-6 px-4 flex flex-col gap-4 animate-fade-in",children:[g.jsx(Ue,{to:"/shop",className:"text-[11px] font-black uppercase tracking-widest py-3 px-4 rounded-xl hover:bg-white/10",onClick:()=>r(!1),children:"Coleccin"}),g.jsx(Ue,{to:"/gallery",className:"text-[11px] font-black uppercase tracking-widest py-3 px-4 rounded-xl hover:bg-white/10",onClick:()=>r(!1),children:"Galera"}),g.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-[11px] font-black uppercase tracking-widest py-3 px-4 rounded-xl hover:bg-white/10",children:"Facebook"}),t&&g.jsx(Ue,{to:"/admin",className:"text-cyan-400 text-[11px] font-black uppercase tracking-widest py-3 px-4 rounded-xl hover:bg-cyan-400/20",onClick:()=>r(!1),children:"Admin"})]})]})]})})},qR=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[i,o]=A.useState([{role:"model",text:"Bienvenido. Buscas alguna pieza de arte o prenda exclusiva hoy?"}]),[s,a]=A.useState(""),[u,c]=A.useState(!1),{products:f}=Rn(),h=A.useRef(null),p=A.useRef(null);A.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[i]);const m=async S=>{if(!n)try{p.current||(p.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}));const E=await St.generateVoiceResponse(S);if(E){const _=await St.utils.decodeAudioData(St.utils.decode(E),p.current,24e3,1),y=p.current.createBufferSource();y.buffer=_,y.connect(p.current.destination),y.start()}}catch(E){console.error("TTS Error:",E)}},v=async()=>{if(!s.trim()||u)return;const S=s;a(""),o(E=>[...E,{role:"user",text:S}]),c(!0);try{const E=f.reduce((T,C)=>(T[C.category]=(T[C.category]||"")+`${C.name} ($${C.price}), `,T),{}),_=Object.entries(E).map(([T,C])=>`${T}: ${C}`).join(" | "),w=(await St.chat(i,S,_)).text??"Sin respuesta.";o(T=>[...T,{role:"model",text:w}]),w.length<300&&m(w)}catch(E){console.error("CHATBOT ERROR:",E);const _=E.message||"Error desconocido";o(y=>[...y,{role:"model",text:`ERROR: ${_}. Verifica tu conexin o comunica el error al administrador.`}])}finally{c(!1)}};return g.jsx("div",{className:"fixed bottom-6 right-6 z-[60]",children:t?g.jsxs("div",{className:"w-80 sm:w-96 h-[600px] flex flex-col glass rounded-[2.5rem] shadow-2xl overflow-hidden border border-white/10 animate-fade-in",children:[g.jsxs("div",{className:"accent-gradient p-6 flex justify-between items-center text-white",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:g.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"})})}),g.jsx("span",{className:"font-black text-[11px] uppercase tracking-widest",children:"Curador IA"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{onClick:()=>r(!n),className:`hover:scale-110 transition-transform ${n?"text-white/40":"text-white"}`,children:n?g.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",strokeWidth:"2"}),g.jsx("path",{d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2",strokeWidth:"2"})]}):g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",strokeWidth:"2"})})}),g.jsx("button",{onClick:()=>e(!1),className:"hover:rotate-90 transition-transform opacity-50",children:""})]})]}),g.jsxs("div",{ref:h,className:"flex-1 overflow-y-auto p-6 space-y-4 bg-black/60 custom-scrollbar",children:[i.map((S,E)=>g.jsx("div",{className:`flex flex-col ${S.role==="user"?"items-end":"items-start"}`,children:g.jsx("div",{className:`max-w-[85%] p-4 rounded-2xl text-[11px] leading-relaxed shadow-xl ${S.role==="user"?"bg-cyan-600 text-white rounded-tr-none":"bg-white/10 text-gray-300 rounded-tl-none border border-white/5"}`,children:S.text})},E)),u&&g.jsx("div",{className:"flex justify-start",children:g.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl flex gap-1 animate-pulse",children:[g.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"}),g.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"}),g.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})]})})]}),g.jsxs("div",{className:"p-5 border-t border-white/5 bg-black/90 space-y-3",children:[g.jsxs("div",{className:"flex gap-3",children:[g.jsx("input",{type:"text",value:s,onChange:S=>a(S.target.value),onKeyDown:S=>S.key==="Enter"&&v(),placeholder:"Escribe aqu tu consulta...",className:"flex-1 bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-[11px] outline-none focus:border-cyan-500 transition-all text-white"}),g.jsx("button",{onClick:v,className:"accent-gradient p-4 rounded-2xl hover:scale-105 transition-all",children:g.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeWidth:"3"})})})]}),g.jsx("p",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest text-center",children:"Modo Texto Prioritario Habilitado"})]})]}):g.jsx("button",{onClick:()=>e(!0),className:"w-16 h-16 accent-gradient rounded-[1.8rem] shadow-2xl flex items-center justify-center hover:scale-110 transition-all border border-white/10",children:g.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z",strokeWidth:"2"})})})})},zR=()=>{const t=Vn(),e=localStorage.getItem("wa_number")||"+521234567890";return t.pathname==="/admin"||t.pathname==="/login"?null:g.jsxs("a",{href:`https://wa.me/${e.replace("+","").replace(" ","")}`,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-28 right-6 z-[60] w-16 h-16 accent-gradient rounded-[1.5rem] shadow-2xl flex items-center justify-center hover:scale-110 transition-transform duration-300 group",title:"Contactar Asesor",children:[g.jsx("span",{className:"sr-only",children:"Contactar por WhatsApp"}),g.jsx("svg",{className:"w-8 h-8 text-white group-hover:rotate-12 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})]})},WR=()=>{const[t,e]=A.useState(!1);A.useEffect(()=>{const i=localStorage.getItem("trendy_is_admin")==="true";e(i)},[]);const n=()=>{localStorage.setItem("trendy_is_admin","true"),e(!0)},r=()=>{localStorage.removeItem("trendy_is_admin"),e(!1)};return g.jsx(O_,{children:g.jsx(OR,{children:g.jsxs("div",{className:"min-h-screen bg-[#050505] text-white flex flex-col selection:bg-pink-500 selection:text-white",children:[g.jsx(HR,{isAdmin:t}),g.jsx("main",{className:"container mx-auto px-4 py-8 flex-grow",children:g.jsxs(N_,{children:[g.jsx(wn,{path:"/",element:g.jsx(iA,{})}),g.jsx(wn,{path:"/shop",element:g.jsx(FR,{})}),g.jsx(wn,{path:"/gallery",element:g.jsx(BR,{})}),g.jsx(wn,{path:"/login",element:t?g.jsx(Ea,{to:"/admin",replace:!0}):g.jsx(GR,{onLoginSuccess:n})}),g.jsx(wn,{path:"/admin",element:t?g.jsx(VR,{onLogout:r}):g.jsx(Ea,{to:"/login",replace:!0})}),g.jsx(wn,{path:"*",element:g.jsx(Ea,{to:"/",replace:!0})})]})}),g.jsx(zR,{}),g.jsx(qR,{}),g.jsx("footer",{className:"border-t border-white/5 py-20 bg-black/50 mt-20",children:g.jsxs("div",{className:"container mx-auto px-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"accent-gradient p-2 rounded-xl rotate-6 shadow-xl shadow-pink-500/20",children:g.jsx("span",{className:"text-white font-black text-sm tracking-tighter",children:"GH"})}),g.jsx("span",{className:"text-2xl font-black tracking-tighter",children:"Gihart & Hersel"})]}),g.jsx("p",{className:"text-gray-500 text-xs leading-relaxed max-w-xs uppercase font-bold tracking-widest",children:"Curadura de moda masculina premium para el hombre que define su propia historia."}),g.jsx("div",{className:"flex gap-4",children:g.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"w-10 h-10 rounded-xl glass flex items-center justify-center hover:bg-white hover:text-black transition-all",children:g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})})]}),g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-pink-500",children:"Navegacin"}),g.jsx(Ue,{to:"/shop",className:"text-xs text-gray-500 hover:text-white transition-colors uppercase font-bold",children:"Catlogo MXN"}),g.jsx(Ue,{to:"/gallery",className:"text-xs text-gray-500 hover:text-white transition-colors uppercase font-bold",children:"Lookbook 2025"})]}),g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-cyan-400",children:"Privacidad"}),g.jsx(Ue,{to:"/login",className:"text-[10px] text-gray-800 hover:text-gray-500 transition-colors uppercase font-black",children:"Acceso Propietario"})]}),g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-purple-500",children:"Sede"}),g.jsxs("p",{className:"text-xs text-gray-500 uppercase font-bold",children:["Distribucin Nacional. ",g.jsx("br",{})," Calidad Garantizada."]})]})]}),g.jsx("div",{className:"pt-10 border-t border-white/5 text-center",children:g.jsx("p",{className:"text-[9px] text-gray-700 font-bold uppercase tracking-[0.5em]",children:" 2025 GIHART & HERSEL GROUP. TODOS LOS DERECHOS RESERVADOS."})})]})})]})})})},uv=document.getElementById("root");if(!uv)throw new Error("Could not find root element to mount to");const JR=Ma.createRoot(uv);JR.render(g.jsx(Bh.StrictMode,{children:g.jsx(WR,{})}));
